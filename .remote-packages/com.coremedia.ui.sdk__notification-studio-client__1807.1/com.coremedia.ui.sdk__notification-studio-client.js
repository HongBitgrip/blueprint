Ext.define("com.coremedia.cms.editor.notification.components.NotificationToast",function(NotificationToast){function NotificationToast$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.ui.components.AnimatedNotification,{});var defaults_$1=AS3.cast(NotificationToast,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"position","lt");AS3.setBindable(config_$1,"yOffset",4);AS3.setBindable(config_$1,"xOffset",37);AS3.setBindable(config_$1,
"target","actions-toolbar");AS3.setBindable(config_$1,"isMouseAware",true);config_$1.hideAnchor=true;AS3.setBindable(config_$1,"minHeight",60);AS3.setBindable(config_$1,"width",400);config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.TipSkin.EMBEDDING.getSkin());var notifications_NotificationWrapper_42_5_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationWrapper,{});AS3.setBindable(notifications_NotificationWrapper_42_5_$1,"notification",AS3.getBindable(config,
"notification"));notifications_NotificationWrapper_42_5_$1.buttonHandler=AS3.bind(this,"destroy");notifications_NotificationWrapper_42_5_$1.buttonIconCls=net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons","remove"));var ui_BEMPlugin_46_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_46_9_$1,"block","cm-notification-wrapper");AS3.setBindable(ui_BEMPlugin_46_9_$1,"modifier","toast");notifications_NotificationWrapper_42_5_$1.plugins=
[ui_BEMPlugin_46_9_$1];notifications_NotificationWrapper_42_5_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;config_$1.items=[notifications_NotificationWrapper_42_5_$1];var layout_Fit_53_5_$1=AS3.cast(Ext.layout.container.Fit,{});AS3.setBindable(config_$1,"layout",layout_Fit_53_5_$1);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$zY2X(config_$1)}return{extend:"com.coremedia.ui.components.AnimatedNotification",alias:"widget.com.coremedia.cms.editor.notification.config.notificationToast",constructor:NotificationToast$,
super$zY2X:function(){com.coremedia.ui.components.AnimatedNotification.prototype.constructor.apply(this,arguments)},config:{notification:null},requires:["Ext.layout.container.Fit","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.components.AnimatedNotification","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.skins.TipSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.notification.components.NotificationWrapper"]}});Ext.define("com.coremedia.cms.editor.notification.components.DefaultNotificationDetailsBase",function(DefaultNotificationDetailsBase){var BLOCK$static;function BLOCK$static_(){BLOCK$static=new com.coremedia.ui.models.bem.BEMBlock("cm-notification-details")}var ELEMENT_HIGHLIGHTED$static;function ELEMENT_HIGHLIGHTED$static_(){ELEMENT_HIGHLIGHTED$static=BLOCK$static.createElement("highlighted")}var ELEMENT_DATE$static;function ELEMENT_DATE$static_(){ELEMENT_DATE$static=BLOCK$static.createElement("date")}
function DefaultNotificationDetailsBase$(config){if(arguments.length<=0)config=null;this.super$whv2(config)}function getIconClsVE(){var this$=this;if(!this.iconClsVE$whv2)this.iconClsVE$whv2=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var notificationType=AS3.getBindable(this$,"notification").getType();if(notificationType)return this$.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","Notification_"+notificationType+"_iconCls");return undefined});
return this.iconClsVE$whv2}function getTextVE(){var this$=this;var me=this;if(!this.textVE$whv2)this.textVE$whv2=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var parameters=AS3.getBindable(this$,"notification").getParameters()||[];if(AS3.is(me,com.coremedia.cms.editor.notification.components.TextParametersPreProcessor))parameters=AS3.as(me,com.coremedia.cms.editor.notification.components.TextParametersPreProcessor).preProcessTextParameters(parameters);var message=this$.computeText$whv2(parameters);
var date=computeDate$static(AS3.getBindable(this$,"notification").getCreationDate());if(date)message+='\x3cdiv class\x3d"'+ELEMENT_DATE$static+'"\x3e'+date+"\x3c/div\x3e";return'\x3cdiv class\x3d"'+BLOCK$static+'"\x3e'+message.replace(/\[u]/g,'\x3cspan class\x3d"'+ELEMENT_HIGHLIGHTED$static+'"\x3e').replace(/\[\/u]/g,"\x3c/span\x3e")+"\x3c/div\x3e"});return this.textVE$whv2}function computeText(parameters){parameters=parameters.map(function(param){if(AS3.is(param,String))return com.coremedia.ui.util.EncodingUtil.encodeForHTML(param);
else return param});var textKey=this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","Notification_"+AS3.getBindable(this,"notification").getType()+"_"+AS3.getBindable(this,"notification").getKey()+"_msg");if(textKey)return Ext.String.format.apply(null,[textKey].concat(parameters));else return parameters[0]}function computeDate$static(date){if(date)return com.coremedia.ui.util.EncodingUtil.encodeForHTML(Ext.Date.format(date,mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.Editor",
"dateFormat")));return null}return{extend:"com.coremedia.cms.editor.notification.components.NotificationDetails",metadata:{"":["PublicApi"]},textVE$whv2:null,iconClsVE$whv2:null,constructor:DefaultNotificationDetailsBase$,super$whv2:function(){com.coremedia.cms.editor.notification.components.NotificationDetails.prototype.constructor.apply(this,arguments)},getIconClsVE:getIconClsVE,getTextVE:getTextVE,computeText$whv2:computeText,statics:{BLOCK:undefined,ELEMENT_HIGHLIGHTED:undefined,ELEMENT_DATE:undefined,
__initStatics__:function(){BLOCK$static_();ELEMENT_HIGHLIGHTED$static_();ELEMENT_DATE$static_()}},requires:["Ext.Date","Ext.String","com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.cms.editor.notification.components.NotificationDetails","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.models.bem.BEMBlock","com.coremedia.ui.util.EncodingUtil","mx.resources.ResourceManager"],uses:["com.coremedia.cms.editor.notification.components.TextParametersPreProcessor"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationDetails",function(NotificationDetails){function NotificationDetails$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationDetailsBase,{});var defaults_$1=AS3.cast(NotificationDetails,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$VyOy(config_$1)}return{extend:"com.coremedia.cms.editor.notification.components.NotificationDetailsBase",
metadata:{"":["PublicApi"]},alias:"widget.com.coremedia.cms.editor.notification.config.notificationDetails",constructor:NotificationDetails$,super$VyOy:function(){com.coremedia.cms.editor.notification.components.NotificationDetailsBase.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.notification.components.NotificationDetailsBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationsMenuBase",function(NotificationsMenuBase){function NotificationsMenuBase$(config){if(arguments.length<=0)config=null;this.super$OgVz(config)}function afterRender(){Ext.menu.Menu.prototype.afterRender.call(this);this.arrow$OgVz=this.getEl().createChild({cls:"cm-notifications-menu-arrow"},this.getEl().dom)}function afterShow(animateTarget,callback,scope){switch(Math.max(arguments.length,1)){case 1:callback=null;case 2:scope=null}Ext.menu.Menu.prototype.afterShow.call(this,
animateTarget,callback,scope);this.arrow$OgVz.setZIndex(this.getEl().getZIndex()+1);this.arrow$OgVz.show()}function afterHide(callback,scope){switch(arguments.length){case 0:callback=null;case 1:scope=null}Ext.menu.Menu.prototype.afterHide.call(this,callback,scope);this.arrow$OgVz.hide()}function alignTo(element,position,offsets,animate){switch(Math.max(arguments.length,1)){case 1:position="tl-bl?";case 2:offsets=null}Ext.menu.Menu.prototype.alignTo.call(this,element,position,offsets||[0,10],animate);
this.arrow$OgVz.alignTo(element,"tc-b",[0,-10],animate)}function markAllAsRead$static(){com.coremedia.cms.editor.notification.NotificationsManager.getInstance().getUnreadNotificationsVE().loadValue(function(unreadNotifications){unreadNotifications.forEach(function(notification){notification.markAsRead()})})}function notificationButtonHandler$static(notification){notification.markAsRead()}function computeHeight$static(notifications){if(notifications&&notifications.length>4)return 430;return undefined}
return{extend:"Ext.menu.Menu",arrow$OgVz:null,constructor:NotificationsMenuBase$,super$OgVz:function(){Ext.menu.Menu.prototype.constructor.apply(this,arguments)},afterRender:afterRender,afterShow:afterShow,afterHide:afterHide,alignTo:alignTo,config:{notificationsVE:null},statics:{HEADER_TOOLBAR_ITEM_ID:"headerToolbarItemId",markAllAsRead:markAllAsRead$static,notificationButtonHandler:notificationButtonHandler$static,computeHeight:computeHeight$static},requires:["Ext.menu.Menu"],uses:["com.coremedia.cms.editor.notification.NotificationsManager"]}});Ext.define("com.coremedia.cms.editor.notification.components.TextParametersPreProcessor",function(TextParametersPreProcessor){return{}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationsMenu",function(NotificationsMenu){function NotificationsMenu$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationsMenuBase,{});var defaults_$1=AS3.cast(NotificationsMenu,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.MenuSkin.EMBEDDED.getSkin());AS3.setBindable(config_$1,
"width",400);AS3.setBindable(config_$1,"scrollable",true);config_$1.allowFocusingDisabledChildren=false;config_$1["handleItemOver"]=Ext.emptyFn;config_$1.plain=true;config_$1.tabNavigationMode=ext.mixin.AdvancedFocusableContainerMixin.TAB_NAVIGATION_MODE_ONLY;var ui_BEMPlugin_44_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_44_5_$1,"block",com.coremedia.ui.bem.SeparatorBEMEntities.VERTICAL_SEPARATOR_BLOCK);AS3.setBindable(ui_BEMPlugin_44_5_$1,"defaultElement",com.coremedia.ui.bem.SeparatorBEMEntities.VERTICAL_SEPARATOR_ELEMENT_ITEM);
var ui_BindComponentsPlugin_46_5_$1=AS3.cast(com.coremedia.ui.plugins.BindComponentsPlugin,{});AS3.setBindable(ui_BindComponentsPlugin_46_5_$1,"valueExpression",AS3.getBindable(config,"notificationsVE"));AS3.setBindable(ui_BindComponentsPlugin_46_5_$1,"configBeanParameterName","notification");AS3.setBindable(ui_BindComponentsPlugin_46_5_$1,"reuseComponents",false);AS3.setBindable(ui_BindComponentsPlugin_46_5_$1,"clearBeforeUpdate",true);var notifications_NotificationWrapper_51_9_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationWrapper,
{});notifications_NotificationWrapper_51_9_$1.buttonHandler=com.coremedia.cms.editor.notification.components.NotificationsMenuBase.notificationButtonHandler;notifications_NotificationWrapper_51_9_$1.buttonIconCls=net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons","approve"));AS3.setBindable(ui_BindComponentsPlugin_46_5_$1,"template",notifications_NotificationWrapper_51_9_$1);var ui_BindPropertyPlugin_55_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,
{});ui_BindPropertyPlugin_55_5_$1.bindTo=AS3.getBindable(config,"notificationsVE");ui_BindPropertyPlugin_55_5_$1.componentProperty="height";ui_BindPropertyPlugin_55_5_$1.transformer=com.coremedia.cms.editor.notification.components.NotificationsMenuBase.computeHeight;config_$1.plugins=[ui_BEMPlugin_44_5_$1,ui_BindComponentsPlugin_46_5_$1,ui_BindPropertyPlugin_55_5_$1];var layout_VBox_60_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_60_5_$1,"align","stretch");AS3.setBindable(config_$1,
"layout",layout_VBox_60_5_$1);var toolbar_63_5_$1=AS3.cast(Ext.toolbar.Toolbar,{});toolbar_63_5_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.editor.notification.components.NotificationsMenuBase.HEADER_TOOLBAR_ITEM_ID);toolbar_63_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ToolbarSkin.MENU_HEADER.getSkin());toolbar_63_5_$1["tabGuard"]=false;var tbFill_65_9_$1=AS3.cast(Ext.toolbar.Fill,{});var button_66_9_$1=AS3.cast(Ext.button.Button,{});button_66_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE.getSkin());
button_66_9_$1.itemId=net.jangaroo.ext.Exml.asString(NotificationsMenu.MARK_ALL_AS_READ_BTN_ITEM_ID);AS3.setBindable(button_66_9_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","NotificationsMenu_markAllReadBtn_text")));AS3.setBindable(button_66_9_$1,"handler",com.coremedia.cms.editor.notification.components.NotificationsMenuBase.markAllAsRead);var ui_BindPropertyPlugin_71_13_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,
{});ui_BindPropertyPlugin_71_13_$1.componentProperty="disabled";ui_BindPropertyPlugin_71_13_$1.bindTo=com.coremedia.cms.editor.notification.NotificationsManager.getInstance().getUnreadNotificationsVE();ui_BindPropertyPlugin_71_13_$1.transformer=function(unreadNotifications){return unreadNotifications===undefined?true:unreadNotifications.length===0};button_66_9_$1.plugins=[ui_BindPropertyPlugin_71_13_$1];toolbar_63_5_$1.items=[tbFill_65_9_$1,button_66_9_$1];config_$1.tbar=toolbar_63_5_$1;net.jangaroo.ext.Exml.apply(config_$1,
config);this.super$cvCC(config_$1)}return{extend:"com.coremedia.cms.editor.notification.components.NotificationsMenuBase",alias:"widget.com.coremedia.cms.editor.notification.config.notificationsMenu",constructor:NotificationsMenu$,super$cvCC:function(){com.coremedia.cms.editor.notification.components.NotificationsMenuBase.prototype.constructor.apply(this,arguments)},statics:{MARK_ALL_AS_READ_BTN_ITEM_ID:"markAllAsReadBtnItemId"},requires:["Ext","Ext.button.Button","Ext.layout.container.VBox","Ext.toolbar.Fill",
"Ext.toolbar.Toolbar","com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.cms.editor.notification.components.NotificationsMenuBase","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.bem.SeparatorBEMEntities","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindComponentsPlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin","com.coremedia.ui.skins.MenuSkin","com.coremedia.ui.skins.ToolbarSkin","ext.mixin.AdvancedFocusableContainerMixin",
"net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.notification.NotificationsManager","com.coremedia.cms.editor.notification.components.NotificationWrapper"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationWrapperBase",function(NotificationWrapperBase){function NotificationWrapperBase$(config){var this$=this;if(arguments.length<=0)config=null;this.super$jiJ_(config);this.stateIndicatorCt$jiJ_=AS3.as(this.queryById(com.coremedia.cms.editor.notification.components.NotificationWrapper.STATE_INDICATOR_ITEM_ID),Ext.container.Container);this.detailsCt$jiJ_=AS3.as(this.queryById(com.coremedia.cms.editor.notification.components.NotificationWrapper.DETAILS_ITEM_ID),
Ext.container.Container);this.button$jiJ_=AS3.as(this.queryById(com.coremedia.cms.editor.notification.components.NotificationWrapper.BTN_ITEM_ID),Ext.button.Button);if(AS3.is(AS3.getBindable(this,"notification"),com.coremedia.ui.data.RemoteBean))AS3.as(AS3.getBindable(this,"notification"),com.coremedia.ui.data.RemoteBean).load(function(){this$.initNotification$jiJ_()});else this.initNotification$jiJ_()}function attachAction(){var this$=this;if(!this.actionInitialized$jiJ_){this.actionInitialized$jiJ_=
true;var markAsActionHolderEventually=new com.coremedia.ui.util.ExecuteEventually(function(){this$.actionHolderVE$jiJ_.setValue(true)});attachActionOnEnterKeyHandlerAfterRender();this.stateIndicatorCt$jiJ_&&attachActionClickHandler(this.stateIndicatorCt$jiJ_);this.detailsCt$jiJ_&&attachActionClickHandler(this.detailsCt$jiJ_);markAsActionHolderEventually.proceed()}function attachActionOnEnterKeyHandlerAfterRender(){markAsActionHolderEventually.delay();if(this$.rendered)attachActionOnEnterKeyHandler();
else this$.on("afterrender",attachActionOnEnterKeyHandler,null,{single:true})}function attachActionOnEnterKeyHandler(){this$.mon(this$.getEl(),"keydown",AS3.bind(this$,"triggerActionOnEnterKey$jiJ_"));markAsActionHolderEventually.proceed()}function attachActionClickHandler(cmp){markAsActionHolderEventually.delay();if(cmp.rendered)attachActionClickHandlerAfterRender(cmp);else this$.mon(cmp,"afterrender",attachActionClickHandlerAfterRender,null,{single:true})}function attachActionClickHandlerAfterRender(cmp){this$.mon(cmp.getEl(),
"click",AS3.bind(this$,"triggerAction$jiJ_"));markAsActionHolderEventually.proceed()}}function triggerActionOnEnterKey(evt){if(evt.getKey()===Ext.event.Event.ENTER||evt.getKey()===Ext.event.Event.SPACE)this.triggerAction$jiJ_()}function removeAction(){var this$=this;if(this.actionInitialized$jiJ_){this.actionInitialized$jiJ_=false;this.actionHolderVE$jiJ_.setValue(false);removeActionOnEnterKeyHandler();this.stateIndicatorCt$jiJ_&&removeActionClickHandler(this.stateIndicatorCt$jiJ_);this.detailsCt$jiJ_&&
removeActionClickHandler(this.detailsCt$jiJ_)}function removeActionOnEnterKeyHandler(){if(this$.rendered)removeActionOnEnterKeyHandlerAfterRender();else this$.on("afterrender",removeActionOnEnterKeyHandlerAfterRender,null,{single:true})}function removeActionOnEnterKeyHandlerAfterRender(){this$.mun(this$.getEl(),"keydown",AS3.bind(this$,"triggerActionOnEnterKey$jiJ_"))}function removeActionClickHandler(cmp){if(cmp.rendered)removeActionClickHandlerAfterRender(cmp);else this$.mon(cmp,"afterrender",removeActionClickHandlerAfterRender,
null,{single:true})}function removeActionClickHandlerAfterRender(cmp){this$.mun(cmp.getEl(),"click",AS3.bind(this$,"triggerAction$jiJ_"))}}function triggerAction(){this.notificationAction$jiJ_.execute();AS3.getBindable(this,"notification").markAsRead();var notificationsMenuCmp=AS3.as(this.findParentByType(com.coremedia.cms.editor.notification.components.NotificationsMenu.xtype),com.coremedia.cms.editor.notification.components.NotificationsMenu);if(notificationsMenuCmp&&notificationsMenuCmp.isVisible(true))notificationsMenuCmp.hide()}
function initNotification(){this.addDetailsCmp$jiJ_();this.initActionHandling$jiJ_();this.initButtonActionHandling$jiJ_()}function addDetailsCmp(){var this$=this;var detailsComponentCfg=com.coremedia.cms.editor.notification.NotificationsManager.getInstance().getNotificationComponentConfig(AS3.getBindable(this,"notification").getType());if(!detailsComponentCfg)detailsComponentCfg=AS3.cast(com.coremedia.cms.editor.notification.components.DefaultNotificationDetails,{});detailsComponentCfg["notification"]=
AS3.getBindable(this,"notification");detailsComponentCfg["bemElement"]="text";this.details$jiJ_=Ext.ComponentManager.create(detailsComponentCfg);this.detailsCt$jiJ_.insert(0,this.details$jiJ_);this.mon(this.details$jiJ_,"disable",function(){this$.removeAction$jiJ_()});this.mon(this.details$jiJ_,"enable",function(){this$.attachAction$jiJ_()})}function initActionHandling(){this.notificationAction$jiJ_=this.details$jiJ_&&AS3.as(this.details$jiJ_.baseAction,com.coremedia.cms.editor.notification.actions.NotificationAction);
if(this.notificationAction$jiJ_){this.notificationAction$jiJ_.setNotification(AS3.getBindable(this,"notification"));if(!this.notificationAction$jiJ_.isDisabled())this.attachAction$jiJ_()}}function initButtonActionHandling(){var this$=this;if(this.button$jiJ_)this.mon(this.button$jiJ_,"afterrender",function(){this$.mon(this$.button$jiJ_.getEl(),"click",AS3.bind(this$,"callButtonHandler$jiJ_"));this$.mon(this$.button$jiJ_.getEl(),"keydown",function(evt){if(evt.getKey()===13){evt.stopEvent();this$.callButtonHandler$jiJ_()}})},
null,{single:true})}function callButtonHandler(){this.buttonHandler(AS3.getBindable(this,"notification"))}function getModifiersVE(){var this$=this;if(!this.modifiersVE$jiJ_)this.modifiersVE$jiJ_=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var notificationState=AS3.getBindable(this$,"notification").getNotificationState();var modifiers=["state-"+(notificationState?notificationState.toLowerCase():"unread")];if(this$.getActionHolderVE$jiJ_().getValue())modifiers.push("action-holder");
return modifiers});return this.modifiersVE$jiJ_}function getActionHolderVE(){if(!this.actionHolderVE$jiJ_)this.actionHolderVE$jiJ_=com.coremedia.ui.data.ValueExpressionFactory.createFromValue(false);return this.actionHolderVE$jiJ_}function getNotificationStateVE(){var this$=this;if(!this.notificationStateVE$jiJ_)this.notificationStateVE$jiJ_=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return AS3.getBindable(this$,"notification").getNotificationState()});return this.notificationStateVE$jiJ_}
function computeNotificationUIVE(){return this.getNotificationStateVE$jiJ_()}function computeStateIndicatorUIVE(){return this.getNotificationStateVE$jiJ_()}return{extend:"Ext.container.Container",buttonHandler:null,buttonIconCls:null,stateIndicatorCt$jiJ_:null,detailsCt$jiJ_:null,details$jiJ_:null,button$jiJ_:null,modifiersVE$jiJ_:null,notificationStateVE$jiJ_:null,notificationAction$jiJ_:null,actionInitialized$jiJ_:false,actionHolderVE$jiJ_:null,constructor:NotificationWrapperBase$,super$jiJ_:function(){Ext.container.Container.prototype.constructor.apply(this,
arguments)},attachAction$jiJ_:attachAction,triggerActionOnEnterKey$jiJ_:triggerActionOnEnterKey,removeAction$jiJ_:removeAction,triggerAction$jiJ_:triggerAction,initNotification$jiJ_:initNotification,addDetailsCmp$jiJ_:addDetailsCmp,initActionHandling$jiJ_:initActionHandling,initButtonActionHandling$jiJ_:initButtonActionHandling,callButtonHandler$jiJ_:callButtonHandler,getModifiersVE:getModifiersVE,getActionHolderVE$jiJ_:getActionHolderVE,getNotificationStateVE$jiJ_:getNotificationStateVE,computeNotificationUIVE:computeNotificationUIVE,
computeStateIndicatorUIVE:computeStateIndicatorUIVE,config:{notification:null},requires:["Ext.ComponentManager","Ext.button.Button","Ext.container.Container","Ext.event.Event","com.coremedia.cms.editor.Editor_properties","com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.ExecuteEventually"],uses:["com.coremedia.cms.editor.notification.NotificationsManager","com.coremedia.cms.editor.notification.actions.NotificationAction",
"com.coremedia.cms.editor.notification.components.DefaultNotificationDetails","com.coremedia.cms.editor.notification.components.NotificationWrapper","com.coremedia.cms.editor.notification.components.NotificationsMenu"]}});Ext.define("com.coremedia.cms.editor.notification.components.DefaultNotificationDetails",function(DefaultNotificationDetails){function DefaultNotificationDetails$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.components.DefaultNotificationDetailsBase,{});var defaults_$1=AS3.cast(DefaultNotificationDetails,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.htmlEncode=false;config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.IconDisplayFieldSkin.INFO.getSkin());
AS3.setBindable(config_$1,"scale","large");AS3.setBindable(config_$1,"overflowBehaviour",com.coremedia.ui.mixins.OverflowBehaviour.BREAK_WORD);var ui_BindPropertyPlugin_30_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_30_5_$1.bindTo=this.getTextVE();var ui_BindPropertyPlugin_31_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_31_5_$1.bindTo=this.getIconClsVE();ui_BindPropertyPlugin_31_5_$1.componentProperty="iconCls";config_$1.plugins=
[ui_BindPropertyPlugin_30_5_$1,ui_BindPropertyPlugin_31_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$IvFH(config_$1)}return{extend:"com.coremedia.cms.editor.notification.components.DefaultNotificationDetailsBase",metadata:{"":["PublicApi"]},alias:"widget.com.coremedia.cms.editor.notification.config.defaultNotificationDetails",constructor:DefaultNotificationDetails$,super$IvFH:function(){com.coremedia.cms.editor.notification.components.DefaultNotificationDetailsBase.prototype.constructor.apply(this,
arguments)},requires:["com.coremedia.cms.editor.notification.components.DefaultNotificationDetailsBase","com.coremedia.ui.mixins.OverflowBehaviour","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.IconDisplayFieldSkin","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationDetailsBase",function(NotificationDetailsBase){function NotificationDetailsBase$(config){if(arguments.length<=0)config=null;this.super$cSCj(config)}function enable(silent){if(arguments.length<=0)silent=false;this.fireEvent("enable",this)}function disable(silent){if(arguments.length<=0)silent=false;if(silent!==true)this.fireEvent("disable",this)}return{extend:"com.coremedia.ui.components.IconDisplayField",metadata:{"":["PublicApi"]},
constructor:NotificationDetailsBase$,super$cSCj:function(){com.coremedia.ui.components.IconDisplayField.prototype.constructor.apply(this,arguments)},enable:enable,disable:disable,config:{notification:null},requires:["com.coremedia.ui.components.IconDisplayField"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationWrapper",function(NotificationWrapper){function NotificationWrapper$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationWrapperBase,{});var defaults_$1=AS3.cast(NotificationWrapper,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.defaultFocus=":focusable";var ui_BEMPlugin_43_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_43_5_$1,
"block","cm-notification-wrapper");AS3.setBindable(ui_BEMPlugin_43_5_$1,"modifier",this.getModifiersVE());var ui_BindPropertyPlugin_45_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_45_5_$1.componentProperty="UI";ui_BindPropertyPlugin_45_5_$1.bindTo=this.computeNotificationUIVE();config_$1.plugins=[ui_BEMPlugin_43_5_$1,ui_BindPropertyPlugin_45_5_$1];var box_51_5_$1=AS3.cast(Ext.Component,{});box_51_5_$1.itemId=net.jangaroo.ext.Exml.asString(NotificationWrapper.STATE_INDICATOR_ITEM_ID);
AS3.setBindable(box_51_5_$1,"width",6);var ui_BEMMixin_54_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_54_9_$1,"bemElement","state-indicator");delete ui_BEMMixin_54_9_$1["xtype"];delete ui_BEMMixin_54_9_$1["xclass"];net.jangaroo.ext.Exml.apply(box_51_5_$1,ui_BEMMixin_54_9_$1);var ui_BindPropertyPlugin_57_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_57_9_$1.componentProperty="UI";ui_BindPropertyPlugin_57_9_$1.bindTo=this.computeStateIndicatorUIVE();
box_51_5_$1.plugins=[ui_BindPropertyPlugin_57_9_$1];var container_62_5_$1=AS3.cast(Ext.container.Container,{});container_62_5_$1.itemId=net.jangaroo.ext.Exml.asString(NotificationWrapper.DETAILS_ITEM_ID);container_62_5_$1["focusable"]=true;container_62_5_$1.tabIndex=-1;container_62_5_$1.flex=1;var ui_BEMMixin_67_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_67_9_$1,"bemElement","details");delete ui_BEMMixin_67_9_$1["xtype"];delete ui_BEMMixin_67_9_$1["xclass"];net.jangaroo.ext.Exml.apply(container_62_5_$1,
ui_BEMMixin_67_9_$1);var layout_VBox_70_9_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_70_9_$1,"align","stretch");AS3.setBindable(container_62_5_$1,"layout",layout_VBox_70_9_$1);var ui_IconButton_74_5_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_74_5_$1.itemId=net.jangaroo.ext.Exml.asString(NotificationWrapper.BTN_ITEM_ID);AS3.setBindable(ui_IconButton_74_5_$1,"scale","small");AS3.setBindable(ui_IconButton_74_5_$1,"width",60);ui_IconButton_74_5_$1.ui=
net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE_HIGHLIGHT.getSkin());AS3.setBindable(ui_IconButton_74_5_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","Notification_readBtn_text")));AS3.setBindable(ui_IconButton_74_5_$1,"tooltip",this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","Notification_readBtn_tooltip"));AS3.setBindable(ui_IconButton_74_5_$1,"iconCls",net.jangaroo.ext.Exml.asString(config.buttonIconCls));
var ui_BEMMixin_82_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_82_9_$1,"bemElement","btn");delete ui_BEMMixin_82_9_$1["xtype"];delete ui_BEMMixin_82_9_$1["xclass"];net.jangaroo.ext.Exml.apply(ui_IconButton_74_5_$1,ui_BEMMixin_82_9_$1);var ui_BindPropertyPlugin_85_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_85_9_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.create("state",AS3.getBindable(config,"notification"));ui_BindPropertyPlugin_85_9_$1.componentProperty=
"disabled";ui_BindPropertyPlugin_85_9_$1.transformer=function(value){return value==="READ"};ui_IconButton_74_5_$1.plugins=[ui_BindPropertyPlugin_85_9_$1];config_$1.items=[box_51_5_$1,container_62_5_$1,ui_IconButton_74_5_$1];var layout_HBox_94_5_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_94_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_HBox_94_5_$1);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$m5YD(config_$1)}return{extend:"com.coremedia.cms.editor.notification.components.NotificationWrapperBase",
alias:"widget.com.coremedia.cms.editor.notification.config.notificationWrapper",constructor:NotificationWrapper$,super$m5YD:function(){com.coremedia.cms.editor.notification.components.NotificationWrapperBase.prototype.constructor.apply(this,arguments)},statics:{STATE_INDICATOR_ITEM_ID:"stateIndicatorItemId",DETAILS_ITEM_ID:"detailsItemId",ICON_ITEM_ID:"iconItemId",BTN_ITEM_ID:"btnItemId"},requires:["Ext.Component","Ext.container.Container","Ext.layout.container.HBox","Ext.layout.container.VBox","com.coremedia.cms.editor.notification.Notifications_properties",
"com.coremedia.cms.editor.notification.components.NotificationWrapperBase","com.coremedia.ui.components.IconButton","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.plugins.BEMMixin","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationsButton",function(NotificationsButton){function NotificationsButton$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationsButtonBase,{});var defaults_$1=AS3.cast(NotificationsButton,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.itemId="notificationsBtnItemId";AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons",
"inbox")));AS3.setBindable(config_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","NotificationsButton_text")));config_$1["id"]=NotificationsButton.COMPONENT_ID;config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.MAIN_NAVIGATION.getSkin());AS3.setBindable(config_$1,"arrowVisible",false);var ui_BindPropertyPlugin_33_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_33_5_$1.componentProperty=
"disabled";ui_BindPropertyPlugin_33_5_$1.bindTo=this.getNotificationsVE();ui_BindPropertyPlugin_33_5_$1.transformer=function(notifications){return notifications.length===0};var ui_BadgePlugin_36_5_$1=AS3.cast(com.coremedia.ui.plugins.BadgePlugin,{});ui_BadgePlugin_36_5_$1.bindTo=this.getUnreadNotificationsVE();ui_BadgePlugin_36_5_$1.maxValue=99;ui_BadgePlugin_36_5_$1.inverted=true;ui_BadgePlugin_36_5_$1.x=-2;ui_BadgePlugin_36_5_$1.y=3;var ui_BEMPlugin_41_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,
{});AS3.setBindable(ui_BEMPlugin_41_5_$1,"block","cm-notifications-button");config_$1.plugins=[ui_BindPropertyPlugin_33_5_$1,ui_BadgePlugin_36_5_$1,ui_BEMPlugin_41_5_$1];var notifications_NotificationsMenu_45_5_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationsMenu,{});AS3.setBindable(notifications_NotificationsMenu_45_5_$1,"notificationsVE",this.getNotificationsVE());config_$1.menu=notifications_NotificationsMenu_45_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$8UsV(config_$1)}
return{extend:"com.coremedia.cms.editor.notification.components.NotificationsButtonBase",alias:"widget.com.coremedia.cms.editor.notification.config.notificationsButton",constructor:NotificationsButton$,super$8UsV:function(){com.coremedia.cms.editor.notification.components.NotificationsButtonBase.prototype.constructor.apply(this,arguments)},statics:{COMPONENT_ID:"notificationsButton"},requires:["com.coremedia.cms.editor.notification.components.NotificationsButtonBase","com.coremedia.ui.plugins.BEMPlugin",
"com.coremedia.ui.plugins.BadgePlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.notification.components.NotificationsMenu"]}});Ext.define("com.coremedia.cms.editor.notification.components.NotificationsButtonBase",function(NotificationsButtonBase){function NotificationsButtonBase$(config){var this$=this;if(arguments.length<=0)config=null;this.super$Gu4G(config);this.on("afterrender",function(){this$.ariaDescription$Gu4G=com.coremedia.ui.util.AriaUtils.createReferenceableAriaEl(this,"description");com.coremedia.ui.util.AriaUtils.addDescribedBy(this$.el,this$.ariaDescription$Gu4G.id);this$.getNotificationsVE().addChangeListener(AS3.bind(this$,
"updateTooltip$Gu4G"));this$.updateTooltip$Gu4G()})}function updateTooltip(){var notifications=this.getNotificationsVE().getValue();if(notifications.length>0){var s=this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","NotificationsButton_tooltip",[notifications.length]);AS3.setBindable(this,"tooltip",s);this.ariaDescription$Gu4G.dom.innerHTML=s}else{var t=this.resourceManager.getString("com.coremedia.cms.editor.notification.Notifications","NotificationsButton_noNotifications_tooltip");
AS3.setBindable(this,"tooltip",t);this.ariaDescription$Gu4G.dom.innerHTML=t}}function getNotificationsVE(){if(!this.notificationsVE$Gu4G)this.notificationsVE$Gu4G=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return com.coremedia.cms.editor.notification.NotificationsManager.getInstance().getNotificationsValueExpression().getValue()||[]});return this.notificationsVE$Gu4G}function getUnreadNotificationsVE(){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return com.coremedia.cms.editor.notification.NotificationsManager.getInstance().getUnreadNotificationsVE().getValue()||
[]})}function destroy(){var params=Array.prototype.slice.call(arguments);this.getNotificationsVE().removeChangeListener(AS3.bind(this,"updateTooltip$Gu4G"));com.coremedia.ui.components.IconButton.prototype.destroy.call(this,params)}return{extend:"com.coremedia.ui.components.IconButton",notificationsVE$Gu4G:null,ariaDescription$Gu4G:null,constructor:NotificationsButtonBase$,super$Gu4G:function(){com.coremedia.ui.components.IconButton.prototype.constructor.apply(this,arguments)},updateTooltip$Gu4G:updateTooltip,
getNotificationsVE:getNotificationsVE,getUnreadNotificationsVE:getUnreadNotificationsVE,destroy:destroy,requires:["com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.ui.components.IconButton","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.AriaUtils"],uses:["com.coremedia.cms.editor.notification.NotificationsManager"]}});Ext.define("com.coremedia.cms.editor.notification.model.impl.NotificationBase",function(NotificationBase){function NotificationBase$(){}function getType(){return"notification"}function getKey(){throw new AS3.Error("must be overridden in subclasses");}function getParameters(){throw new AS3.Error("must be overridden in subclasses");}function getCreationDate(){return null}function getNotificationState(){return"none"}function markAsRead(){}function isRead(){return false}return{mixins:["com.coremedia.cms.editor.notification.model.Notification"],
constructor:NotificationBase$,getType:getType,getKey:getKey,getParameters:getParameters,getCreationDate:getCreationDate,getNotificationState:getNotificationState,markAsRead:markAsRead,isRead:isRead,requires:["AS3.Error","com.coremedia.cms.editor.notification.model.Notification"]}});Ext.define("com.coremedia.cms.editor.notification.model.Notification",function(Notification){return{}});Ext.define("com.coremedia.cms.editor.notification.NotificationsManager",function(NotificationsManager){var notificationsManager$static=null;function notificationDetailsRegistry_(){this.notificationDetailsRegistry$C7nY={}}function toastQueue_(){this.toastQueue$C7nY=[]}function getInstance$static(){if(!notificationsManager$static)notificationsManager$static=new NotificationsManager;return notificationsManager$static}function NotificationsManager$(){notificationDetailsRegistry_.call(this);toastQueue_.call(this);
this.notificationsBean$C7nY=com.coremedia.ui.data.beanFactory.getRemoteBean("usernotifications/"+com.coremedia.cms.editor.sdk.editorContext.getSession().getUser().get("numericId"))}function startNotificationTracking(){this.getNotificationsValueExpression().addChangeListener(AS3.bind(this,"notificationsChanged$C7nY"))}function registerNotificationDetailsComponentConfig(notificationType,notificationDetailsComponentConfig){this.notificationDetailsRegistry$C7nY[notificationType]=notificationDetailsComponentConfig}
function getNotificationComponentConfig(notificationType){return this.notificationDetailsRegistry$C7nY[notificationType]}function getNotificationsValueExpression(){if(!this.notificationsVE$C7nY)this.notificationsVE$C7nY=com.coremedia.ui.data.ValueExpressionFactory.create("items",this.notificationsBean$C7nY);return this.notificationsVE$C7nY}function getUnreadNotificationsVE(){var this$=this;if(!this.unreadNotificationsVE$C7nY)this.unreadNotificationsVE$C7nY=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var notifications=
this$.getNotificationsValueExpression().getValue();if(!notifications)return undefined;var unreadNotifications=[];var allLoaded=true;notifications.forEach(function(notification){if(!notification.isLoaded()){notification.load();allLoaded=false}if(!notification.isRead())unreadNotifications.push(notification)});return allLoaded?unreadNotifications:undefined});return this.unreadNotificationsVE$C7nY}function notificationsChanged(){var actual=this.getNotificationsValueExpression().getValue()||[];if(this.processed$C7nY){var diff=
this.buildDiff$C7nY(actual);this.showToasts(diff)}this.processed$C7nY=actual}function buildDiff(actual){var this$=this;var diff=[];actual.forEach(function(notification){if(this$.processed$C7nY.indexOf(notification)===-1)diff.push(notification)});return diff}function showToasts(notifications){var this$=this;if(notifications.length>0){notifications.forEach(function(notification){this$.toastQueue$C7nY.push(notification)});this.showNextToast$C7nY()}}function showNextToast(){if(this.isToastVisible$C7nY)return;
var next=this.toastQueue$C7nY.shift();if(next){this.isToastVisible$C7nY=true;if(AS3.is(next,com.coremedia.ui.data.RemoteBean))AS3.as(next,com.coremedia.ui.data.RemoteBean).load(AS3.bind(this,"afterLoad$C7nY"));else this.afterLoad$C7nY(next)}}function afterLoad(notification){var config=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationToast,{});AS3.setBindable(config,"notification",notification);var toast=new com.coremedia.cms.editor.notification.components.NotificationToast(config);
toast.mon(toast,"beforehide",AS3.bind(this,"toastGone$C7nY"));toast.mon(toast,"beforedestroy",AS3.bind(this,"toastGone$C7nY"));toast.show()}function toastGone(){if(this.isToastVisible$C7nY)this.isToastVisible$C7nY=false;this.showNextToast$C7nY()}return{notificationsBean$C7nY:null,processed$C7nY:null,isToastVisible$C7nY:false,notificationsVE$C7nY:null,unreadNotificationsVE$C7nY:null,constructor:NotificationsManager$,startNotificationTracking:startNotificationTracking,registerNotificationDetailsComponentConfig:registerNotificationDetailsComponentConfig,
getNotificationComponentConfig:getNotificationComponentConfig,getNotificationsValueExpression:getNotificationsValueExpression,getUnreadNotificationsVE:getUnreadNotificationsVE,notificationsChanged$C7nY:notificationsChanged,buildDiff$C7nY:buildDiff,showToasts:showToasts,showNextToast$C7nY:showNextToast,afterLoad$C7nY:afterLoad,toastGone$C7nY:toastGone,statics:{getInstance:getInstance$static},requires:["com.coremedia.cms.editor.sdk.editorContext","com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.ValueExpressionFactory",
"com.coremedia.ui.data.beanFactory"],uses:["com.coremedia.cms.editor.notification.components.NotificationToast"]}});Ext.define("com.coremedia.cms.editor.notification.RegisterNotificationDetailsPlugin",function(RegisterNotificationDetailsPlugin){function RegisterNotificationDetailsPlugin$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.RegisterNotificationDetailsPluginBase,{});var defaults_$1=AS3.cast(RegisterNotificationDetailsPlugin,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$bWlg(config_$1)}
return{extend:"com.coremedia.cms.editor.notification.RegisterNotificationDetailsPluginBase",metadata:{"":["PublicApi"]},constructor:RegisterNotificationDetailsPlugin$,super$bWlg:function(){com.coremedia.cms.editor.notification.RegisterNotificationDetailsPluginBase.prototype.constructor.apply(this,arguments)},config:{notificationType:null,notificationDetailsComponentConfig:null,resourceBundles:null},requires:["com.coremedia.cms.editor.notification.RegisterNotificationDetailsPluginBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.notification.rest.impl.NotificationImpl",function(NotificationImpl){function NotificationImpl$(path){this.super$6AeS(path)}function getType(){return this.get("type")}function getKey(){return this.get("key")}function getParameters(){return this.get("parameters")}function getNotificationState(){return this.get("state")}function getCreationDate(){return this.get("creationDate")}function markAsRead(){var this$=this;if(this.isLoaded())this.markAsReadUnchecked$6AeS();
else this.load(function(){if(this$.isLoaded())this$.markAsReadUnchecked$6AeS()})}function markAsReadUnchecked(){if(!this.isRead()){var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath()+"/markAsRead","PUT");rsm.request(null,AS3.bind(this,"invalidate"))}}function isRead(){return this.getNotificationState()==="READ"}return{extend:"com.coremedia.ui.data.impl.RemoteBeanImpl",mixins:["com.coremedia.cms.editor.notification.model.Notification"],metadata:{"":["RestResource",["uriTemplate",
"notification/{id:[a-zA-Z0-9-]+}"]]},constructor:NotificationImpl$,super$6AeS:function(){com.coremedia.ui.data.impl.RemoteBeanImpl.prototype.constructor.apply(this,arguments)},getType:getType,getKey:getKey,getParameters:getParameters,getNotificationState:getNotificationState,getCreationDate:getCreationDate,markAsRead:markAsRead,markAsReadUnchecked$6AeS:markAsReadUnchecked,isRead:isRead,requires:["com.coremedia.cms.editor.notification.model.Notification","com.coremedia.ui.data.impl.RemoteBeanImpl",
"com.coremedia.ui.data.impl.RemoteServiceMethod"]}});Ext.define("com.coremedia.cms.editor.notification.actions.NotificationAction",function(NotificationAction){function NotificationAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.actions.NotificationActionBase,{});var defaults_$1=AS3.cast(NotificationAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$FnYF(config_$1)}return{extend:"com.coremedia.cms.editor.notification.actions.NotificationActionBase",
metadata:{"":["PublicApi"]},constructor:NotificationAction$,super$FnYF:function(){com.coremedia.cms.editor.notification.actions.NotificationActionBase.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.notification.actions.NotificationActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.notification.actions.NotificationActionBase",function(NotificationActionBase){function actionStateHandlers_(){this.actionStateHandlers$yRG0={}}function NotificationActionBase$(config){if(arguments.length<=0)config=null;if(config.handler===undefined)AS3.setBindable(config,"handler",AS3.bind(this,"executeAction$yRG0"));this.super$yRG0(config);actionStateHandlers_.call(this);this.registerActionStateHandler(this.ACTION_STATE_NOTIFICATION_NOT_ACCESSIBLE,handleActionStateNotificationNotAccessible$static)}
function setNotification(notification){this.getNotificationVE$yRG0().setValue(notification)}function calculateDisabled(){var actionState=this.getActionState();return actionState===undefined||actionState===this.ACTION_STATE_DISABLED}function getNotification(){return this.getNotificationVE$yRG0().getValue()}function handleActionStateNotificationNotAccessible$static(){com.coremedia.ui.logging.Logger.error("Notification not accessible")}function getNotificationVE(){if(!this.notificationVE$yRG0)this.notificationVE$yRG0=
com.coremedia.ui.data.ValueExpressionFactory.createFromValue(undefined);return this.notificationVE$yRG0}function registerActionStateHandler(actionState,actionStateHandler){if(this.actionStateHandlers$yRG0[actionState]!==undefined)com.coremedia.ui.logging.Logger.debug("Notification Action State Handler for '"+actionState+"' is overriden");this.actionStateHandlers$yRG0[actionState]=actionStateHandler}function getActionState(){var notification=this.getNotification();if(!notification)return this.ACTION_STATE_NOTIFICATION_NOT_ACCESSIBLE;
if(AS3.is(notification,com.coremedia.ui.data.RemoteBean))switch(com.coremedia.ui.data.RemoteBeanUtil.isAccessible(AS3.as(notification,com.coremedia.ui.data.RemoteBean))){case undefined:return undefined;case false:return this.ACTION_STATE_NOTIFICATION_NOT_ACCESSIBLE}return this.ACTION_STATE_EXECUTABLE}function executeAction(){var this$=this;this.getActionStateVE$yRG0().loadValue(function(actionState){var handler=this$.actionStateHandlers$yRG0[actionState];if(handler!==undefined&&AS3.is(handler,Function))handler();
else com.coremedia.ui.logging.Logger.debug("Notification Action State Handler not defined for '"+actionState+"'")})}function getActionStateVE(){var this$=this;if(!this.actionStateVE)this.actionStateVE=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return this$.getActionState()});return this.actionStateVE}return{extend:"com.coremedia.ui.actions.DependencyTrackedAction",metadata:{"":["PublicApi"]},notificationVE$yRG0:null,ACTION_STATE_NOTIFICATION_NOT_ACCESSIBLE:"notificationNotAccessible",
ACTION_STATE_EXECUTABLE:"notificationActionExecutable",ACTION_STATE_DISABLED:"notificationActionDisabled",actionStateVE:null,constructor:NotificationActionBase$,super$yRG0:function(){com.coremedia.ui.actions.DependencyTrackedAction.prototype.constructor.apply(this,arguments)},setNotification:setNotification,calculateDisabled:calculateDisabled,getNotification:getNotification,getNotificationVE$yRG0:getNotificationVE,registerActionStateHandler:registerActionStateHandler,getActionState:getActionState,
executeAction$yRG0:executeAction,getActionStateVE$yRG0:getActionStateVE,requires:["com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.RemoteBeanUtil","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.cms.editor.notification.NotificationsStudioPlugin",function(NotificationsStudioPlugin){function NotificationsStudioPlugin$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.notification.NotificationsStudioPluginBase,{});var defaults_$1=AS3.cast(NotificationsStudioPlugin,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var editor_HeaderToolbar_43_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.desktop.HeaderToolbar,{});var ui_AddItemsPlugin_45_9_$1=
AS3.cast(com.coremedia.ui.plugins.AddItemsPlugin,{});var container_47_13_$1=AS3.cast(Ext.container.Container,{});container_47_13_$1.defaultFocus=":focusable";container_47_13_$1["ariaRole"]="region";container_47_13_$1.ariaLabel=net.jangaroo.ext.Exml.asString(mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.notification.Notifications","NotificationsRegion_label"));var notifications_NotificationsButton_52_17_$1=AS3.cast(com.coremedia.cms.editor.notification.components.NotificationsButton,
{});notifications_NotificationsButton_52_17_$1["ariaRole"]="menuitem";container_47_13_$1.items=[notifications_NotificationsButton_52_17_$1];AS3.setBindable(ui_AddItemsPlugin_45_9_$1,"items",[container_47_13_$1]);var component_57_13_$1=AS3.cast(Ext.Component,{});component_57_13_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.editor.sdk.desktop.HeaderToolbar.USER_MENU_BUTTON_ITEM_ID);AS3.setBindable(ui_AddItemsPlugin_45_9_$1,"before",[component_57_13_$1]);editor_HeaderToolbar_43_5_$1.plugins=
[ui_AddItemsPlugin_45_9_$1];AS3.setBindable(config_$1,"rules",[editor_HeaderToolbar_43_5_$1]);var editor_RegisterRestResource_65_5_$1=AS3.cast(com.coremedia.cms.editor.configuration.RegisterRestResource,{});AS3.setBindable(editor_RegisterRestResource_65_5_$1,"beanClass",com.coremedia.cms.editor.notification.rest.impl.NotificationImpl);AS3.setBindable(config_$1,"configuration",[new com.coremedia.cms.editor.configuration.RegisterRestResource(editor_RegisterRestResource_65_5_$1)]);net.jangaroo.ext.Exml.apply(config_$1,
config);this.super$pmaK(config_$1)}return{extend:"com.coremedia.cms.editor.notification.NotificationsStudioPluginBase",metadata:{"":["PublicApi"]},constructor:NotificationsStudioPlugin$,super$pmaK:function(){com.coremedia.cms.editor.notification.NotificationsStudioPluginBase.prototype.constructor.apply(this,arguments)},config:{resourceBundles:null},requires:["Ext.Component","Ext.container.Container","com.coremedia.cms.editor.configuration.RegisterRestResource","com.coremedia.cms.editor.notification.NotificationsStudioPluginBase",
"com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.cms.editor.sdk.desktop.HeaderToolbar","com.coremedia.ui.plugins.AddItemsPlugin","mx.resources.ResourceManager","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.notification.components.NotificationsButton","com.coremedia.cms.editor.notification.rest.impl.NotificationImpl"]}});Ext.define("com.coremedia.cms.editor.notification.NotificationsStudioPluginBase",function(NotificationsStudioPluginBase){function NotificationsStudioPluginBase$(config){if(arguments.length<=0)config=null;this.super$Mze5(config);addAdditionalResourceBundles$static(AS3.getBindable(config,"resourceBundles"));com.coremedia.cms.editor.notification.NotificationsManager.getInstance().startNotificationTracking()}function addAdditionalResourceBundles$static(resourceBundles){if(resourceBundles&&AS3.is(resourceBundles,
Array))resourceBundles.forEach(function(bundle){com.coremedia.ui.i18n.ResourceBundle.overrideProperties(mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.editor.notification.Notifications"),bundle)})}return{extend:"com.coremedia.cms.editor.configuration.StudioPlugin",metadata:{"":["PublicApi"]},constructor:NotificationsStudioPluginBase$,super$Mze5:function(){com.coremedia.cms.editor.configuration.StudioPlugin.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.configuration.StudioPlugin",
"com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.ui.i18n.ResourceBundle","mx.resources.ResourceManager"],uses:["com.coremedia.cms.editor.notification.NotificationsManager"]}});Ext.define("com.coremedia.cms.editor.notification.RegisterNotificationDetailsPluginBase",function(RegisterNotificationDetailsPluginBase){function RegisterNotificationDetailsPluginBase$(config){if(arguments.length<=0)config=null;this.super$cO7R(config);addAdditionalResourceBundles$static(AS3.getBindable(config,"resourceBundles"));registerDetailsComponentConfig$static(AS3.getBindable(config,"notificationType"),AS3.getBindable(config,"notificationDetailsComponentConfig"))}function registerDetailsComponentConfig$static(notificationType,
notificationDetailsComponentConfig){if(notificationType&&notificationDetailsComponentConfig)com.coremedia.cms.editor.notification.NotificationsManager.getInstance().registerNotificationDetailsComponentConfig(notificationType,notificationDetailsComponentConfig)}function addAdditionalResourceBundles$static(resourceBundles){if(resourceBundles&&AS3.is(resourceBundles,Array))resourceBundles.forEach(function(bundle){com.coremedia.ui.i18n.ResourceBundle.overrideProperties(mx.resources.ResourceManager.getInstance().getResourceBundle(null,
"com.coremedia.cms.editor.notification.Notifications"),bundle)})}return{extend:"com.coremedia.cms.editor.configuration.StudioPlugin",metadata:{"":["PublicApi"]},constructor:RegisterNotificationDetailsPluginBase$,super$cO7R:function(){com.coremedia.cms.editor.configuration.StudioPlugin.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.configuration.StudioPlugin","com.coremedia.cms.editor.notification.Notifications_properties","com.coremedia.ui.i18n.ResourceBundle","mx.resources.ResourceManager"],
uses:["com.coremedia.cms.editor.notification.NotificationsManager"]}});Ext.define("com.coremedia.cms.editor.notification.Notifications_properties",{"NotificationsRegion_label":"Notifications","NotificationsButton_text":"Show Notifications","NotificationsButton_tooltip":"You have {0} unread notifications","NotificationsButton_noNotifications_tooltip":"You have no notifications","NotificationsMenu_markAllReadBtn_text":"Mark All Notifications as Read","Notification_readBtn_text":"Mark Notification as Read","Notification_readBtn_tooltip":"Mark notification as read"},function(){com.coremedia.cms.editor.notification.Notifications_properties.INSTANCE=
new com.coremedia.cms.editor.notification.Notifications_properties});
//# sourceMappingURL=com.coremedia.ui.sdk__notification-studio-client.js.map
