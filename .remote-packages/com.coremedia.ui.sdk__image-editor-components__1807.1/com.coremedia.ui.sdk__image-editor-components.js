Ext.define("com.coremedia.cms.studio.imageeditor.model.ImageTransformationModel",function(ImageTransformationModel){return{}});Ext.define("com.coremedia.cms.studio.imageeditor.model.Rectangle",function(Rectangle){function Rectangle$(x,y,width,height){this["x"]=x;this["y"]=y;this["width"]=width;this["height"]=height}function get$left(){return this.x}function get$right(){return this.x+this.width}function get$top(){return this.y}function get$bottom(){return this.y+this.height}function equals(o){var that=AS3.as(o,Rectangle);if(!that)return false;return this.x===that.x&&this.y===that.y&&this.width===that.width&&this.height===
that.height}function scale(widthFactor,heightFactor){var scaledWidth=preciseToOne$static(this.width*widthFactor);var scaledHeight=preciseToOne$static(this.height*heightFactor);var scaledX=preciseToOne$static(this.x*widthFactor);var scaledY=preciseToOne$static(this.y*heightFactor);return new Rectangle(scaledX,scaledY,scaledWidth,scaledHeight)}function round(){return new Rectangle(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}function constrain(preserveRatio){if(arguments.length<=
0)preserveRatio=NaN;var constrainedX;var constrainedY;var constrainedWidth;var constrainedHeight;if(preserveRatio===undefined)return new Rectangle(this.x,this.y,this.width,this.height);if(!isNaN(preserveRatio)){if(this.width>1||this.height>1){var normalizeScale=Math.max(this.width,this.height);constrainedWidth=this.width/normalizeScale;constrainedHeight=this.height/normalizeScale}else{constrainedWidth=this.width;constrainedHeight=this.height}if(this.x+this.width>=1-1E-8&&constrainedWidth/preserveRatio<=
1)constrainedHeight=constrainedWidth/preserveRatio;else constrainedWidth=constrainedHeight*preserveRatio;constrainedX=Math.max(Math.min(this.x,1-constrainedWidth),0);constrainedY=Math.max(Math.min(this.y,1-constrainedHeight),0)}else{constrainedX=constrainNumber$static(this.x);constrainedY=constrainNumber$static(this.y);constrainedWidth=constrainNumber$static(this.x+this.width)-constrainedX;constrainedHeight=constrainNumber$static(this.y+this.height)-constrainedY}return new Rectangle(constrainedX,
constrainedY,constrainedWidth,constrainedHeight)}function constrainNumber$static(number){number=preciseToOne$static(number);return number<0?0:number>1?1:number}function preciseToOne$static(number){if(Number(number.toPrecision(12))===1)return 1;return number}function isUnitSquare(){return this.x===0&&this.y===0&&this.width===1&&this.height===1}function getUnitSquare$static(){return new Rectangle(0,0,1,1)}function grow(by){return new Rectangle(this.x-by,this.y-by,this.width+2*by,this.height+2*by)}function containsPoint(testX,
testY){return testX>=this.x&&testX<this.x+this.width&&(testY>=this.y&&testY<this.y+this.height)}function fromBox$static(box){return new Rectangle(box.x,box.y,box.width,box.height)}function hasAllValues(){return!isNaN(this.x)&&!isNaN(this.y)&&!isNaN(this.width)&&!isNaN(this.height)}function move(dx,dy){return new Rectangle(this.x+dx,this.y+dy,this.width,this.height)}function adjust(oldBounds,newBounds,aspectRatio){var oldWidth=oldBounds.width;var oldHeight=oldBounds.height;var newWidth=newBounds.width;
var newHeight=newBounds.height;var oldRect=this.scale(oldWidth,oldHeight);var diffX=(newWidth-oldWidth)/2;var diffY=(newHeight-oldHeight)/2;var newRect=new Rectangle(oldRect.x+diffX,oldRect.y+diffY,oldRect.width,oldRect.height);var newCrop=newRect.scale(1/newWidth,1/newHeight);var cropRatio=aspectRatio?aspectRatio/(newWidth/newHeight):Number.NaN;newCrop=newCrop.constrain(cropRatio);return newCrop}return{mixins:["com.coremedia.ui.util.WithEquals"],constructor:Rectangle$,equals:equals,scale:scale,round:round,
constrain:constrain,isUnitSquare:isUnitSquare,grow:grow,containsPoint:containsPoint,hasAllValues:hasAllValues,move:move,adjust:adjust,statics:{getUnitSquare:getUnitSquare$static,fromBox:fromBox$static},__accessors__:{left:{get:get$left},right:{get:get$right},top:{get:get$top},bottom:{get:get$bottom}},requires:["com.coremedia.ui.util.WithEquals"]}});Ext.define("com.coremedia.cms.studio.imageeditor.model.Point",function(Point){function Point$(x,y){this["x"]=x;this["y"]=y}function equals(o){var that=AS3.as(o,Point);if(!that)return false;return this.x===that.x&&this.y===that.y}function move(dx,dy){return new Point(this.x+dx,this.y+dy)}function round(){return new Point(Math.round(this.x),Math.round(this.y))}return{mixins:["com.coremedia.ui.util.WithEquals"],constructor:Point$,equals:equals,move:move,round:round,requires:["com.coremedia.ui.util.WithEquals"]}});Ext.define("com.coremedia.cms.studio.imageeditor.model.ImageDimensions",function(ImageDimensions){return{}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageDimensionsDisplay",function(ImageDimensionsDisplay){function ImageDimensionsDisplay$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(Ext.container.Container,{});var defaults_$1=AS3.cast(ImageDimensionsDisplay,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ContainerSkin.GRID_200.getSkin());var ui_BindVisibilityPlugin_35_5_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,
{});ui_BindVisibilityPlugin_35_5_$1.bindTo=AS3.getBindable(config,"bindTo").extendBy("properties",AS3.getBindable(config,"propertyName"));AS3.setBindable(ui_BindVisibilityPlugin_35_5_$1,"transformer",function(data){return data&&data.getSize()!==undefined});config_$1.plugins=[ui_BindVisibilityPlugin_35_5_$1];var panel_39_5_$1=AS3.cast(Ext.panel.Panel,{});config_$1["defaultType"]=panel_39_5_$1["xtype"];delete panel_39_5_$1["xtype"];delete panel_39_5_$1["xclass"];config_$1.defaults=panel_39_5_$1;var displayField_42_5_$1=
AS3.cast(Ext.form.field.Display,{});displayField_42_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.DisplayFieldSkin.BOLD.getSkin());AS3.setBindable(displayField_42_5_$1,"value",this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_label_dimensions_original_size"));var displayField_45_5_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_45_5_$1,"fieldLabel",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor",
"IEC_label_dimensions_width")+":"));displayField_45_5_$1.itemId="width";var ui_BindPropertyPlugin_49_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_49_9_$1.componentProperty="value";ui_BindPropertyPlugin_49_9_$1.transformer=function(dimensions){return dimensions.width+" px"};var ui_ValueExpression_52_13_$1=AS3.cast(com.coremedia.ui.exml.ValueExpression,{});AS3.setBindable(ui_ValueExpression_52_13_$1,"expression",net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.IMAGE_ORIGINAL_DIMENSIONS));
AS3.setBindable(ui_ValueExpression_52_13_$1,"context",AS3.getBindable(config,"model"));ui_BindPropertyPlugin_49_9_$1.bindTo=new com.coremedia.ui.exml.ValueExpression(ui_ValueExpression_52_13_$1);displayField_45_5_$1.plugins=[ui_BindPropertyPlugin_49_9_$1];var displayField_58_5_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_58_5_$1,"fieldLabel",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_label_dimensions_height")+
":"));displayField_58_5_$1.itemId="height";var ui_BindPropertyPlugin_62_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_62_9_$1.componentProperty="value";ui_BindPropertyPlugin_62_9_$1.transformer=function(dimensions){return dimensions.height+" px"};var ui_ValueExpression_65_13_$1=AS3.cast(com.coremedia.ui.exml.ValueExpression,{});AS3.setBindable(ui_ValueExpression_65_13_$1,"expression",net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.IMAGE_ORIGINAL_DIMENSIONS));
AS3.setBindable(ui_ValueExpression_65_13_$1,"context",AS3.getBindable(config,"model"));ui_BindPropertyPlugin_62_9_$1.bindTo=new com.coremedia.ui.exml.ValueExpression(ui_ValueExpression_65_13_$1);displayField_58_5_$1.plugins=[ui_BindPropertyPlugin_62_9_$1];config_$1.items=[displayField_42_5_$1,displayField_45_5_$1,displayField_58_5_$1];var layout_VBox_73_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_73_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_VBox_73_5_$1);
net.jangaroo.ext.Exml.apply(config_$1,config);this.super$ntiT(config_$1)}return{extend:"Ext.container.Container",alias:"widget.com.coremedia.cms.studio.imageeditor.config.imageDimensionsDisplay",constructor:ImageDimensionsDisplay$,super$ntiT:function(){Ext.container.Container.prototype.constructor.apply(this,arguments)},config:{bindTo:null,propertyName:null,model:null},requires:["Ext.container.Container","Ext.form.field.Display","Ext.layout.container.VBox","Ext.panel.Panel","com.coremedia.cms.studio.imageeditor.ImageEditor_properties",
"com.coremedia.ui.exml.ValueExpression","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.plugins.BindVisibilityPlugin","com.coremedia.ui.skins.ContainerSkin","com.coremedia.ui.skins.DisplayFieldSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase",function(FlipImageActionBase){function BUNDLE_(){this.BUNDLE$4S8X=mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function FlipImageActionBase$(config){if(arguments.length<=0)config=null;this.super$4S8X(AS3.cast(com.coremedia.cms.studio.imageeditor.actions.FlipImageAction,Ext.apply(config,{handler:AS3.bind(this,"flipImage$4S8X")})));BUNDLE_.call(this);
this.flipDirection$4S8X=AS3.getBindable(config,"flipDirection");this.undoHistory$4S8X=AS3.getBindable(config,"undoHistory");AS3.setBindable(this,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"))}function flipImage(){if(this.flipDirection$4S8X===FlipImageActionBase.FLIP_HORIZONTALLY)this.undoHistory$4S8X.createImmediateCommand(this.BUNDLE$4S8X.IEC_history_reflect_h,AS3.bind(this,"flipImageHorizontally$4S8X"));else if(this.flipDirection$4S8X===FlipImageActionBase.FLIP_VERTICALLY)this.undoHistory$4S8X.createImmediateCommand(this.BUNDLE$4S8X.IEC_history_reflect_v,
AS3.bind(this,"flipImageVertically$4S8X"))}function flipImageHorizontally(){this.flip$4S8X(true)}function flipImageVertically(){this.flip$4S8X(false)}function flip(horizontally){var orientation=AS3.getBindable(this,"imageEditorViewModel").get("orientation");var rotated=Math.abs(orientation%180)===90;if(horizontally===rotated){var flipVertically=AS3.getBindable(this,"imageEditorViewModel").get("flipVertically");AS3.getBindable(this,"imageEditorViewModel").set("flipVertically",!flipVertically)}else{var flipHorizontally=
AS3.getBindable(this,"imageEditorViewModel").get("flipHorizontally");AS3.getBindable(this,"imageEditorViewModel").set("flipHorizontally",!flipHorizontally)}if(horizontally)this.adjustCrops(flipCropsHorizontally$static);else this.adjustCrops(flipCropsVertically$static)}function flipCropsVertically$static(crop){var y1=1-(crop.y+crop.height);return new com.coremedia.cms.studio.imageeditor.model.Rectangle(crop.x,y1,crop.width,crop.height)}function flipCropsHorizontally$static(crop){var x1=1-(crop.x+crop.width);
return new com.coremedia.cms.studio.imageeditor.model.Rectangle(x1,crop.y,crop.width,crop.height)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction",flipDirection$4S8X:null,undoHistory$4S8X:null,constructor:FlipImageActionBase$,super$4S8X:function(){com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction.prototype.constructor.apply(this,arguments)},flipImage$4S8X:flipImage,flipImageHorizontally$4S8X:flipImageHorizontally,flipImageVertically$4S8X:flipImageVertically,
flip$4S8X:flip,statics:{FLIP_HORIZONTALLY:"h",FLIP_VERTICALLY:"v"},requires:["Ext","com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction","mx.resources.ResourceManager"],uses:["com.coremedia.cms.studio.imageeditor.actions.FlipImageAction","com.coremedia.cms.studio.imageeditor.model.Rectangle"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.EnlargeAllActionBase",function(EnlargeAllActionBase){function BUNDLE_(){this.BUNDLE$AeYg=mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function EnlargeAllActionBase$(config){if(arguments.length<=0)config=null;this.undoHistory$AeYg=AS3.getBindable(config,"undoHistory");this.variantsValueExpression$AeYg=AS3.getBindable(config,"variantsValueExpression");this.imageEditorViewModel$AeYg=
AS3.getBindable(config,"imageEditorViewModel");this.imageDimensionsValueExpression$AeYg=AS3.getBindable(config,"imageDimensionsValueExpression");this.variantBoxedImageDimensionsValueExpressions$AeYg=AS3.getBindable(config,"variantBoxedImageDimensionsValueExpressions");this.super$AeYg(AS3.cast(com.coremedia.ui.actions.DependencyTrackedToggleAction,config));BUNDLE_.call(this)}function handleUnpress(){this.enlargeAllCrops(false);com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.handleUnpress.call(this)}
function handlePress(){this.enlargeAllCrops(true);com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.handlePress.call(this)}function enlargeAllCrops(enlarge){var undoText=enlarge?this.BUNDLE$AeYg.IEC_history_enlarge_all_crops:this.BUNDLE$AeYg.IEC_history_enlarge_all_crops_off;this.undoHistory$AeYg.pushUndoableCommand(undoText);var $2;for(var $1 in $2=this.variantsValueExpression$AeYg.getValue()){var variant=$2[$1];var boxValueExpression=this.variantBoxedImageDimensionsValueExpressions$AeYg.getValue()[variant.key];
com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase.adjustCrop(enlarge,variant,this.imageDimensionsValueExpression$AeYg.getValue(),boxValueExpression.getValue(),this.imageEditorViewModel$AeYg)}}return{extend:"com.coremedia.ui.actions.DependencyTrackedToggleAction",undoHistory$AeYg:null,imageEditorViewModel$AeYg:null,imageDimensionsValueExpression$AeYg:null,variantBoxedImageDimensionsValueExpressions$AeYg:null,variantsValueExpression$AeYg:null,constructor:EnlargeAllActionBase$,super$AeYg:function(){com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.constructor.apply(this,
arguments)},handleUnpress:handleUnpress,handlePress:handlePress,enlargeAllCrops:enlargeAllCrops,requires:["com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.ui.actions.DependencyTrackedToggleAction","mx.resources.ResourceManager"],uses:["com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.EnlargeAllAction",function(EnlargeAllAction){function EnlargeAllAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.EnlargeAllActionBase,{});var defaults_$1=AS3.cast(EnlargeAllAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$eD8v(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.EnlargeAllActionBase",
constructor:EnlargeAllAction$,super$eD8v:function(){com.coremedia.cms.studio.imageeditor.actions.EnlargeAllActionBase.prototype.constructor.apply(this,arguments)},config:{undoHistory:null,variantsValueExpression:null,imageDimensionsValueExpression:null,variantBoxedImageDimensionsValueExpressions:null,imageEditorViewModel:null},requires:["com.coremedia.cms.studio.imageeditor.actions.EnlargeAllActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction",function(AdjustCropsAction){function AdjustCropsAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.AdjustCropsActionBase,{});var defaults_$1=AS3.cast(AdjustCropsAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$JRnM(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.AdjustCropsActionBase",
constructor:AdjustCropsAction$,super$JRnM:function(){com.coremedia.cms.studio.imageeditor.actions.AdjustCropsActionBase.prototype.constructor.apply(this,arguments)},config:{imageEditorViewModel:null,variantsValueExpression:null},requires:["com.coremedia.cms.studio.imageeditor.actions.AdjustCropsActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.RotateImageActionBase",function(RotateImageActionBase){function BUNDLE_(){this.BUNDLE$J41p=mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function RotateImageActionBase$(config){if(arguments.length<=0)config=null;this.super$J41p(AS3.cast(com.coremedia.cms.studio.imageeditor.actions.RotateImageAction,Ext.apply(config,{handler:AS3.bind(this,"rotateImage$J41p")})));
BUNDLE_.call(this);this.angle$J41p=AS3.getBindable(config,"angle");AS3.setBindable(this,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));this.orientedImageDimensionsValueExpression$J41p=AS3.getBindable(config,"orientedImageDimensionsValueExpression");this.undoHistory$J41p=AS3.getBindable(config,"undoHistory")}function rotateImage(){var commandName;var originalOrientation=AS3.getBindable(this,"imageEditorViewModel").get("orientation");var rotationAngle;if(this.angle$J41p===0){rotationAngle=
360-originalOrientation;this.newOrientation$J41p=0;commandName=this.BUNDLE$J41p.IEC_history_rotated_reset}else{rotationAngle=this.angle$J41p;this.newOrientation$J41p=(originalOrientation+this.angle$J41p)%360;commandName=this.BUNDLE$J41p.IEC_history_rotated_crude}if(rotationAngle===180)this.undoHistory$J41p.createImmediateCommand(commandName,AS3.bind(this,"switchOverCenter$J41p"));else if(rotationAngle===90||rotationAngle===-270)this.undoHistory$J41p.createImmediateCommand(commandName,AS3.bind(this,
"rotateImageRight$J41p"));else if(rotationAngle===-90||rotationAngle===270)this.undoHistory$J41p.createImmediateCommand(commandName,AS3.bind(this,"rotateImageLeft$J41p"))}function switchOverCenter(){AS3.getBindable(this,"imageEditorViewModel").set("orientation",this.newOrientation$J41p);this.adjustCrops(rotate180$static)}function rotateImageRight(){AS3.getBindable(this,"imageEditorViewModel").set("orientation",this.newOrientation$J41p);this.adjustCrops(AS3.bind(this,"rotate90$J41p"))}function rotateImageLeft(){AS3.getBindable(this,
"imageEditorViewModel").set("orientation",this.newOrientation$J41p);this.adjustCrops(AS3.bind(this,"rotate270$J41p"))}function rotate270(crop){return rotate180$static(this.rotate90$J41p(crop))}function rotate180$static(crop){var x1=1-(crop.x+crop.width);var y1=1-(crop.y+crop.height);return new com.coremedia.cms.studio.imageeditor.model.Rectangle(x1,y1,crop.width,crop.height)}function rotate90(crop){var orientedImageDimensions=this.orientedImageDimensionsValueExpression$J41p.getValue();var cropWidth=
crop.width*orientedImageDimensions.height;var cropHeight=crop.height*orientedImageDimensions.width;var aspectRatio=cropWidth/cropHeight;var oldX=crop.x*orientedImageDimensions.height;var oldY=crop.y*orientedImageDimensions.width;var cropCenterX=orientedImageDimensions.width-(oldY+cropHeight/2);var cropCenterY=oldX+cropWidth/2;var newX=cropCenterX-cropWidth/2;var newY=cropCenterY-cropHeight/2;var imageWidth=orientedImageDimensions.width;var imageHeight=orientedImageDimensions.height;var correctHeight=
function(){cropHeight=cropWidth/aspectRatio;newY=cropCenterY-cropHeight/2};var correctWidth=function(){cropWidth=aspectRatio*cropHeight;newX=cropCenterX-cropWidth/2};if(newX<0){cropWidth=cropCenterX*2;newX=0;correctHeight()}else if(cropWidth+newX>imageWidth){cropWidth=(imageWidth-cropCenterX)*2;newX=imageWidth-cropWidth;correctHeight()}if(newY<0){cropHeight=cropCenterY*2;newY=0;correctWidth()}else if(cropHeight+newY>imageHeight){cropHeight=(imageHeight-cropCenterY)*2;newY=imageHeight-cropHeight;correctWidth()}return new com.coremedia.cms.studio.imageeditor.model.Rectangle(newX/
imageWidth,newY/imageHeight,cropWidth/imageWidth,cropHeight/imageHeight)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction",angle$J41p:0,orientedImageDimensionsValueExpression$J41p:null,undoHistory$J41p:null,newOrientation$J41p:0,constructor:RotateImageActionBase$,super$J41p:function(){com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction.prototype.constructor.apply(this,arguments)},rotateImage$J41p:rotateImage,switchOverCenter$J41p:switchOverCenter,rotateImageRight$J41p:rotateImageRight,
rotateImageLeft$J41p:rotateImageLeft,rotate270$J41p:rotate270,rotate90$J41p:rotate90,requires:["Ext","com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.cms.studio.imageeditor.actions.AdjustCropsAction","mx.resources.ResourceManager"],uses:["com.coremedia.cms.studio.imageeditor.actions.RotateImageAction","com.coremedia.cms.studio.imageeditor.model.Rectangle"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.RotateImageAction",function(RotateImageAction){function RotateImageAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.RotateImageActionBase,{});var defaults_$1=AS3.cast(RotateImageAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$tzQ2(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.RotateImageActionBase",
constructor:RotateImageAction$,super$tzQ2:function(){com.coremedia.cms.studio.imageeditor.actions.RotateImageActionBase.prototype.constructor.apply(this,arguments)},config:{orientedImageDimensionsValueExpression:null,undoHistory:null,angle:0},requires:["com.coremedia.cms.studio.imageeditor.actions.RotateImageActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.FlipImageAction",function(FlipImageAction){function FlipImageAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase,{});var defaults_$1=AS3.cast(FlipImageAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$5Lym(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase",
constructor:FlipImageAction$,super$5Lym:function(){com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase.prototype.constructor.apply(this,arguments)},config:{undoHistory:null,flipDirection:null},requires:["com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase",function(EnlargeActionBase){function BUNDLE_(){this.BUNDLE$9_Db=mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function EnlargeActionBase$(config){if(arguments.length<=0)config=null;this.variant$9_Db=AS3.getBindable(config,"variant");this.undoHistory$9_Db=AS3.getBindable(config,"undoHistory");this.imageEditorViewModel$9_Db=AS3.getBindable(config,
"imageEditorViewModel");this.imageDimensionsValueExpression$9_Db=AS3.getBindable(config,"imageDimensionsValueExpression");this.variantBoxedImageDimensionsValueExpression$9_Db=AS3.getBindable(config,"variantBoxedImageDimensionsValueExpression");this.super$9_Db(AS3.cast(com.coremedia.ui.actions.DependencyTrackedToggleAction,config));BUNDLE_.call(this)}function handleUnpress(){this.enlarge(false);com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.handleUnpress.call(this)}function handlePress(){this.enlarge(true);
com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.handlePress.call(this)}function enlarge(enlarge){var variantDisplayName=this.BUNDLE$9_Db["IEC_variants_"+this.variant$9_Db.key]||this.variant$9_Db.key;var undoText=Ext.String.format(enlarge?this.BUNDLE$9_Db.IEC_history_enlarge_crop:this.BUNDLE$9_Db.IEC_history_enlarge_crop_off,variantDisplayName);this.undoHistory$9_Db.pushUndoableCommand(undoText);EnlargeActionBase.adjustCrop(enlarge,this.variant$9_Db,this.imageDimensionsValueExpression$9_Db.getValue(),
this.variantBoxedImageDimensionsValueExpression$9_Db.getValue(),this.imageEditorViewModel$9_Db)}function adjustCrop$static(enlarge,variant,imageDimensions,oldBox,imageEditorViewModel){var newBox=enlarge?variant.calculateFittingImageDimensions(imageDimensions):imageDimensions;var oldCrop=imageEditorViewModel.get(variant.key);if(oldCrop){var newCrop=oldCrop.adjust(oldBox,newBox,variant.aspectRatio);imageEditorViewModel.set(variant.key,newCrop)}}return{extend:"com.coremedia.ui.actions.DependencyTrackedToggleAction",
variant$9_Db:null,undoHistory$9_Db:null,imageEditorViewModel$9_Db:null,imageDimensionsValueExpression$9_Db:null,variantBoxedImageDimensionsValueExpression$9_Db:null,constructor:EnlargeActionBase$,super$9_Db:function(){com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.constructor.apply(this,arguments)},handleUnpress:handleUnpress,handlePress:handlePress,enlarge:enlarge,statics:{adjustCrop:adjustCrop$static},requires:["Ext.String","com.coremedia.cms.studio.imageeditor.ImageEditor_properties",
"com.coremedia.ui.actions.DependencyTrackedToggleAction","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.EnlargeAction",function(EnlargeAction){function EnlargeAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase,{});var defaults_$1=AS3.cast(EnlargeAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$ri9q(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase",
constructor:EnlargeAction$,super$ri9q:function(){com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase.prototype.constructor.apply(this,arguments)},config:{undoHistory:null,imageDimensionsValueExpression:null,variantBoxedImageDimensionsValueExpression:null,imageEditorViewModel:null,variant:null},requires:["com.coremedia.cms.studio.imageeditor.actions.EnlargeActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.actions.AdjustCropsActionBase",function(AdjustCropsActionBase){function AdjustCropsActionBase$(config){if(arguments.length<=0)config=null;this.super$wnn7(config);this.imageEditorViewModel$wnn7=AS3.getBindable(config,"imageEditorViewModel");this.variantsValueExpression$wnn7=AS3.getBindable(config,"variantsValueExpression")}function adjustCrops(handler){var this$=this;com.coremedia.ui.util.AsyncObserver.complete(function(){var focusArea=this$.imageEditorViewModel$wnn7.get("focusArea");
focusArea=handler(focusArea);this$.imageEditorViewModel$wnn7.set("focusArea",focusArea);var focusPoint=this$.imageEditorViewModel$wnn7.get("focusPoint");focusPoint=handler(focusPoint);this$.imageEditorViewModel$wnn7.set("focusPoint",focusPoint);var variants=this$.variantsValueExpression$wnn7.getValue();for(var $1=0;$1<variants.length;++$1){var variant=variants[$1];var crop=this$.imageEditorViewModel$wnn7.get(variant.key);if(crop){var variantModel=handler(crop);this$.imageEditorViewModel$wnn7.set(variant.key,
variantModel)}}})}return{extend:"com.coremedia.ui.actions.DependencyTrackedAction",imageEditorViewModel$wnn7:null,variantsValueExpression$wnn7:null,constructor:AdjustCropsActionBase$,super$wnn7:function(){com.coremedia.ui.actions.DependencyTrackedAction.prototype.constructor.apply(this,arguments)},adjustCrops:adjustCrops,requires:["com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.util.AsyncObserver"]}});Ext.define("com.coremedia.cms.studio.imageeditor.FocusPointImageArea",function(FocusPointImageArea){function FocusPointImageArea$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.FocusPointImageAreaBase,{});var defaults_$1=AS3.cast(FocusPointImageArea,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.cls=net.jangaroo.ext.Exml.asString("crop-container "+FocusPointImageArea.CLS+" x-border-box");net.jangaroo.ext.Exml.apply(config_$1,
config);this.super$kK_j(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.FocusPointImageAreaBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.focusPointImageArea",constructor:FocusPointImageArea$,super$kK_j:function(){com.coremedia.cms.studio.imageeditor.FocusPointImageAreaBase.prototype.constructor.apply(this,arguments)},statics:{CLS:"cm-focus-point-image-area"},requires:["com.coremedia.cms.studio.imageeditor.FocusPointImageAreaBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.RotationMenuButton",function(RotationMenuButton){function __initialize__(config){this.BUNDLE$9cWI=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function RotationMenuButton$(config){if(arguments.length<=0)config=null;this.__initialize__$9cWI(config);var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.MenuButtonBase,{});var defaults_$1=AS3.cast(RotationMenuButton,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,
config);AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_action_rotate_iconCls));config_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_label_rotate);AS3.setBindable(config_$1,"tooltip",this.BUNDLE$9cWI.IEC_label_rotate);var menu_52_5_$1=AS3.cast(Ext.menu.Menu,{});menu_52_5_$1.plain=true;menu_52_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.MenuSkin.GRID_100.getSkin());var container_55_9_$1=AS3.cast(Ext.container.Container,{});
container_55_9_$1.itemId="crude-rotation";AS3.setBindable(container_55_9_$1,"width",260);var displayField_58_13_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_58_13_$1,"value",this.BUNDLE$9cWI.IEC_label_rotate);var container_59_13_$1=AS3.cast(Ext.container.Container,{});container_59_13_$1.flex=1;var button_61_17_$1=AS3.cast(Ext.button.Button,{});button_61_17_$1.itemId="btn_rotate_left";button_61_17_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.INLINE.getSkin());
var ie_RotateImageAction_64_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.RotateImageAction,{});AS3.setBindable(ie_RotateImageAction_64_21_$1,"iconCls",net.jangaroo.ext.Exml.asString(mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_action_rotateLeft_iconCls")));AS3.setBindable(ie_RotateImageAction_64_21_$1,"text",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_label_left));AS3.setBindable(ie_RotateImageAction_64_21_$1,"statusExpression",
AS3.getBindable(config,"statusValueExpression"));AS3.setBindable(ie_RotateImageAction_64_21_$1,"angle",270);AS3.setBindable(ie_RotateImageAction_64_21_$1,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));AS3.setBindable(ie_RotateImageAction_64_21_$1,"orientedImageDimensionsValueExpression",AS3.getBindable(config,"orientedImageDimensionsValueExpression"));AS3.setBindable(ie_RotateImageAction_64_21_$1,"variantsValueExpression",AS3.getBindable(config,"variantsValueExpression"));
AS3.setBindable(ie_RotateImageAction_64_21_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));button_61_17_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.RotateImageAction(ie_RotateImageAction_64_21_$1);var button_75_17_$1=AS3.cast(Ext.button.Button,{});button_75_17_$1.itemId="btn_rotate_right";button_75_17_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.INLINE.getSkin());var ie_RotateImageAction_78_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.RotateImageAction,
{});AS3.setBindable(ie_RotateImageAction_78_21_$1,"iconCls",net.jangaroo.ext.Exml.asString(mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_action_rotateRight_iconCls")));AS3.setBindable(ie_RotateImageAction_78_21_$1,"text",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_label_right));AS3.setBindable(ie_RotateImageAction_78_21_$1,"statusExpression",AS3.getBindable(config,"statusValueExpression"));AS3.setBindable(ie_RotateImageAction_78_21_$1,
"angle",90);AS3.setBindable(ie_RotateImageAction_78_21_$1,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));AS3.setBindable(ie_RotateImageAction_78_21_$1,"orientedImageDimensionsValueExpression",AS3.getBindable(config,"orientedImageDimensionsValueExpression"));AS3.setBindable(ie_RotateImageAction_78_21_$1,"variantsValueExpression",AS3.getBindable(config,"variantsValueExpression"));AS3.setBindable(ie_RotateImageAction_78_21_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));
button_75_17_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.RotateImageAction(ie_RotateImageAction_78_21_$1);var component_89_17_$1=AS3.cast(Ext.Component,{});component_89_17_$1.flex=1;var button_90_17_$1=AS3.cast(Ext.button.Button,{});button_90_17_$1.itemId="rotateReset";button_90_17_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE.getSkin());var ie_RotateImageAction_93_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.RotateImageAction,{});
AS3.setBindable(ie_RotateImageAction_93_21_$1,"text",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_label_reset));AS3.setBindable(ie_RotateImageAction_93_21_$1,"statusExpression",AS3.getBindable(config,"undoHistory").createResetStatusValueExpression(AS3.getBindable(config,"disabledValueExpression"),"orientation"));AS3.setBindable(ie_RotateImageAction_93_21_$1,"angle",0);AS3.setBindable(ie_RotateImageAction_93_21_$1,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));AS3.setBindable(ie_RotateImageAction_93_21_$1,
"orientedImageDimensionsValueExpression",AS3.getBindable(config,"orientedImageDimensionsValueExpression"));AS3.setBindable(ie_RotateImageAction_93_21_$1,"variantsValueExpression",AS3.getBindable(config,"variantsValueExpression"));AS3.setBindable(ie_RotateImageAction_93_21_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));button_90_17_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.RotateImageAction(ie_RotateImageAction_93_21_$1);container_59_13_$1.items=[button_61_17_$1,button_75_17_$1,
component_89_17_$1,button_90_17_$1];var ui_HorizontalSpacingPlugin_105_17_$1=AS3.cast(com.coremedia.ui.plugins.HorizontalSpacingPlugin,{});container_59_13_$1.plugins=[ui_HorizontalSpacingPlugin_105_17_$1];var layout_HBox_108_17_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_108_17_$1,"align","stretch");AS3.setBindable(container_59_13_$1,"layout",layout_HBox_108_17_$1);container_55_9_$1.items=[displayField_58_13_$1,container_59_13_$1];var layout_VBox_113_13_$1=AS3.cast(Ext.layout.container.VBox,
{});AS3.setBindable(layout_VBox_113_13_$1,"align","stretch");AS3.setBindable(container_55_9_$1,"layout",layout_VBox_113_13_$1);var container_116_9_$1=AS3.cast(Ext.container.Container,{});container_116_9_$1.itemId="fine-rotation";var displayField_118_13_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_118_13_$1,"value",this.BUNDLE$9cWI.IEC_label_align);var ie_ImageTransformationSlider_119_13_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageTransformationSlider,{});AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,
"disabledValueExpression",AS3.getBindable(config,"disabledValueExpression"));ie_ImageTransformationSlider_119_13_$1.itemId="slider_rotation";AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"propertyName","straighten");AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,
"commandDescription",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_history_rotated_fine));AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"resetCommandDescription",net.jangaroo.ext.Exml.asString(this.BUNDLE$9cWI.IEC_history_rotated_fine_reset));AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"minValue",-45);AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"maxValue",45);AS3.setBindable(ie_ImageTransformationSlider_119_13_$1,"defaultValue",0);container_116_9_$1.items=[displayField_118_13_$1,
ie_ImageTransformationSlider_119_13_$1];var layout_VBox_131_13_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_131_13_$1,"align","stretch");AS3.setBindable(container_116_9_$1,"layout",layout_VBox_131_13_$1);menu_52_5_$1.items=[container_55_9_$1,container_116_9_$1];var ui_VerticalSpacingPlugin_136_9_$1=AS3.cast(com.coremedia.ui.plugins.VerticalSpacingPlugin,{});AS3.setBindable(ui_VerticalSpacingPlugin_136_9_$1,"modifier",com.coremedia.ui.bem.SpacingBEMEntities.VERTICAL_SPACING_MODIFIER_200);
menu_52_5_$1.plugins=[ui_VerticalSpacingPlugin_136_9_$1];config_$1.menu=menu_52_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$9cWI(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.MenuButtonBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.rotationMenuButton",BUNDLE$9cWI:null,__initialize__$9cWI:__initialize__,constructor:RotationMenuButton$,super$9cWI:function(){com.coremedia.cms.studio.imageeditor.MenuButtonBase.prototype.constructor.apply(this,arguments)},
config:{imageEditorViewModel:null,undoHistory:null,orientedImageDimensionsValueExpression:null,variantsValueExpression:null,statusValueExpression:null},requires:["Ext.Component","Ext.button.Button","Ext.container.Container","Ext.form.field.Display","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.menu.Menu","com.coremedia.cms.studio.imageeditor.MenuButtonBase","com.coremedia.ui.bem.SpacingBEMEntities","com.coremedia.ui.plugins.HorizontalSpacingPlugin","com.coremedia.ui.plugins.VerticalSpacingPlugin",
"com.coremedia.ui.skins.ButtonSkin","com.coremedia.ui.skins.MenuSkin","mx.resources.ResourceManager","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.ImageTransformationSlider","com.coremedia.cms.studio.imageeditor.actions.RotateImageAction"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageVariant",function(ImageVariant){function get$aspectRatio(){return this.widthRatio/this.heightRatio}function ImageVariant$(key,widthRatio,heightRatio,minWidth,minHeight){this["key"]=key;this["widthRatio"]=widthRatio;this["heightRatio"]=heightRatio;this["minWidth"]=minWidth;this["minHeight"]=minHeight}function calculateDefaultCropDimensions(focusArea,imageDimensions){if(!focusArea||!imageDimensions)return undefined;var x=focusArea.x;var y=focusArea.y;
var width=focusArea.width;var height=focusArea.height;var variantAspectRatio=this.widthRatio/this.heightRatio;var imageAspectRatio=imageDimensions.width/imageDimensions.height;var focusAreaAspectRatio=imageAspectRatio*width/height;if(variantAspectRatio<focusAreaAspectRatio){width=height*variantAspectRatio/imageAspectRatio;x+=(focusArea.width-width)/2}else{height=width*imageAspectRatio/variantAspectRatio;y+=(focusArea.height-height)/2}return new com.coremedia.cms.studio.imageeditor.model.Rectangle(x,
y,width,height)}function calculateFittingImageDimensions(imageDimensions){if(!imageDimensions)return undefined;var width=imageDimensions.width;var height=imageDimensions.height;var variantAspectRatio=this.widthRatio/this.heightRatio;var imageAspectRatio=width/height;if(variantAspectRatio<imageAspectRatio)height=Math.round(width/variantAspectRatio+.5);else width=Math.round(height*variantAspectRatio+.5);return AS3.cast(com.coremedia.cms.studio.imageeditor.model.ImageDimensions,{width:width,height:height})}
return{constructor:ImageVariant$,calculateDefaultCropDimensions:calculateDefaultCropDimensions,calculateFittingImageDimensions:calculateFittingImageDimensions,__accessors__:{aspectRatio:{get:get$aspectRatio}},uses:["com.coremedia.cms.studio.imageeditor.model.ImageDimensions","com.coremedia.cms.studio.imageeditor.model.Rectangle"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageArea",function(ImageArea){function ImageArea$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageAreaBase,{});var defaults_$1=AS3.cast(ImageArea,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.constrain=true;config_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.computeAriaLabel(config));config_$1["focusable"]=true;config_$1.cls="crop-container x-resizable x-component-resizable x-component-default-resizable x-border-box x-resizable-pinned";
var editor_ShowIssuesPlugin_33_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin,{});editor_ShowIssuesPlugin_33_5_$1.bindTo=AS3.getBindable(config,"bindTo");AS3.setBindable(editor_ShowIssuesPlugin_33_5_$1,"ifUndefined","");AS3.setBindable(editor_ShowIssuesPlugin_33_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")+(AS3.getBindable(config,"variant")?"."+AS3.getBindable(config,"variant").key:"")));AS3.setBindable(editor_ShowIssuesPlugin_33_5_$1,
"hideIssues",AS3.getBindable(config,"hideIssues"));config_$1.plugins=[editor_ShowIssuesPlugin_33_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$o3ob(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.ImageAreaBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.imageArea",constructor:ImageArea$,super$o3ob:function(){com.coremedia.cms.studio.imageeditor.ImageAreaBase.prototype.constructor.apply(this,arguments)},config:{bindTo:null,propertyName:null,name:null,
hideIssues:false},requires:["com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin","com.coremedia.cms.studio.imageeditor.ImageAreaBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageEditorStageBase",function(ImageEditorStageBase){function IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER$static_(){ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER=com.coremedia.ui.util.BEMUtils.getModifierClassName(ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK,"show-single-crop")}function IMAGE_EDITOR_STAGE_BLOCK_SHOW_CROPS_MODIFIER$static_(){ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK_SHOW_CROPS_MODIFIER=com.coremedia.ui.util.BEMUtils.getModifierClassName(ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK,
"show-crops")}function ImageEditorStageBase$(config){var this$=this;if(arguments.length<=0)config=null;this.super$ncpg(config);this.imageEditorStageBoundsValueExpression$ncpg.addChangeListener(AS3.bind(this,"updateImageLocation$ncpg"));this.getInnerContainer$ncpg().addListener("afterrender",function(){var innerEl=this$.getInnerContainer$ncpg().getEl();this$.mon(innerEl,"mousemove",AS3.bind(this$,"handleImageAreaMouseMove"));this$.mon(innerEl,"click",AS3.bind(this$,"handlePossibleImageAreaActivation$ncpg"));
this$.mon(innerEl,"keydown",AS3.bind(this$,"handlePossibleImageAreaActivation$ncpg"));this$.mon(innerEl,"mouseleave",AS3.bind(this$,"handleInnerContainerMouseOut$ncpg"))},null,{single:true});this.addImageComponentListeners$ncpg()}function addImageComponentListeners(){var this$=this;var image=AS3.as(this.query(com.coremedia.ui.util.createComponentSelector().itemId("image").build())[0],com.coremedia.ui.components.Image);this.mon(image,"afterrender",function(){image.el.addListener("error",function(){this$.setDisplayAreas$ncpg(false)});
image.el.addListener("load",function(){this$.setDisplayAreas$ncpg(true)})})}function setDisplayAreas(displayed){var me=this;this.getImageAreas().forEach(function(area){if(area.rendered)area.el.setDisplayed(displayed);me.mon(area,"afterrender",function(){area.el.setDisplayed(displayed)},null,{single:true})})}function getImageSettings(){return this.getImageSettingsValueExpression$ncpg().getValue()}function getImageSettingsValueExpression(){if(!AS3.getBindable(this,"imageSettingsValueExpression"))AS3.setBindable(this,
"imageSettingsValueExpression",this.initialConfig.imageSettingsValueExpression);return AS3.getBindable(this,"imageSettingsValueExpression")}function onFocusEnter(e){Ext.container.Container.prototype.onFocusEnter.call(this,e);this.getImageAreas().forEach(function(imageArea){imageArea.setTabIndex(0)});var focusables=this.query(":focusable");if(focusables.length>0){focusables[0].focus();this.setTabIndex(null)}}function onFocusLeave(e){Ext.container.Container.prototype.onFocusLeave.call(this,e);this.getImageAreas().forEach(function(imageArea){imageArea.setTabIndex(-1)});
this.setTabIndex(0)}function getImageAreas(){return this.queryBy(function(cmp){return AS3.is(cmp,com.coremedia.cms.studio.imageeditor.ImageArea)})}function addCropVariants(){if(Ext.Object.isEmpty(AS3.getBindable(this,"variantBoxedImageDimensionsValueExpressions").getValue()))return;var innerContainer=this.getInnerContainer$ncpg();var crops=innerContainer.query("[xtype \x3d "+com.coremedia.cms.studio.imageeditor.CropImageArea.xtype+"]");crops.map(function(crop){innerContainer.remove(crop,true)});var variants=
AS3.getBindable(this,"variantsValueExpression").getValue();for(var $1=0;$1<variants.length;++$1){var variant=variants[$1];var area=this.createCropImageArea(variant);innerContainer.add(area)}innerContainer.updateLayout()}function createImageEditorStageBoundsValueExpression(){if(!this.imageEditorStageBoundsValueExpression$ncpg)this.imageEditorStageBoundsValueExpression$ncpg=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeImageEditorStageBounds$ncpg"));return this.imageEditorStageBoundsValueExpression$ncpg}
function createShowAllCropsValueExpression(showCropsValueExpression){var this$=this;return new com.coremedia.ui.data.FunctionValueExpression(function(){return AS3.getBindable(this$,"activeTabValueExpression").getValue()==ImageEditorStageBase.ITEM_ID_FOCUS_AREA&&showCropsValueExpression.getValue()})}function getImageEditorStageBoundsValueExpression(){if(!this.imageEditorStageBoundsValueExpression$ncpg||this.imageEditorStageBoundsValueExpression$ncpg.getValue()===undefined||!AS3.as(this.imageEditorStageBoundsValueExpression$ncpg.getValue(),
com.coremedia.cms.studio.imageeditor.model.Rectangle).hasAllValues())this.createImageEditorStageBoundsValueExpression();return this.imageEditorStageBoundsValueExpression$ncpg}function getInnerContainer(){return AS3.cast(Ext.container.Container,this.getComponent(ImageEditorStageBase.ITEM_ID_STAGE_INNER_CT))}function getFocusPointImageArea(){return AS3.as(this.queryById(ImageEditorStageBase.ITEM_ID_FOCUS_POINT),com.coremedia.cms.studio.imageeditor.FocusPointImageArea)}function getFocusArea(){return AS3.as(this.queryById(ImageEditorStageBase.ITEM_ID_FOCUS_AREA),
com.coremedia.cms.studio.imageeditor.FocusAreaImageArea)}function afterRender(){var this$=this;Ext.container.Container.prototype.afterRender.call(this);AS3.getBindable(this,"variantsValueExpression").addChangeListener(AS3.bind(this,"addCropVariants$ncpg"));AS3.getBindable(this,"variantBoxedImageDimensionsValueExpressions").addChangeListener(function(){this$.addCropVariants$ncpg()});this.addCropVariants$ncpg();this.activateTab$ncpg(ImageEditorStageBase.ITEM_ID_FOCUS_AREA);AS3.getBindable(this,"activeTabValueExpression").addChangeListener(AS3.bind(this,
"activeTabChanged$ncpg"));this.mon(this.getEl(),"keydown",AS3.bind(this,"keydown$ncpg"))}function keydown(e){var dx=0;var dy=0;var key=e.getKey();switch(key){case 37:dx=-1;break;case 38:dy=-1;break;case 39:dx=1;break;case 40:dy=1;break}if(!dx&&!dy)return;if(e.shiftKey){dx=dx*5;dy=dy*5}var variantsTabPanel=this.getVariantsTabPanel$ncpg();if(!variantsTabPanel)return;var activeTab=AS3.as(variantsTabPanel.getActiveTab(),com.coremedia.cms.studio.imageeditor.VariantTab);if(!activeTab)return;this.moveCropBy(activeTab.getItemId(),
dx,dy);e.stopEvent()}function getVariantsTabPanel(){var imageEditorPropertyField=AS3.as(this.up(com.coremedia.ui.util.createComponentSelector()._xtype(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField.xtype).build()),com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField);return imageEditorPropertyField.getVariantsTabPanel()}function createCropImageArea(variant){var cropImageAreaConfig=AS3.cast(com.coremedia.cms.studio.imageeditor.CropImageArea,{});cropImageAreaConfig.itemId=com.coremedia.cms.studio.imageeditor.VariantKeyUtil.variantKeyToItemId(variant.key);
AS3.setBindable(cropImageAreaConfig,"variant",variant);AS3.setBindable(cropImageAreaConfig,"variantsValueExpression",AS3.getBindable(this,"variantsValueExpression"));AS3.setBindable(cropImageAreaConfig,"imageEditorViewModel",AS3.getBindable(this,"imageEditorViewModel"));AS3.setBindable(cropImageAreaConfig,"readOnlyValueExpression",AS3.getBindable(this,"readOnlyValueExpression"));AS3.setBindable(cropImageAreaConfig,"undoHistory",AS3.getBindable(this,"undoHistory"));AS3.setBindable(cropImageAreaConfig,
"imageSettingsValueExpression",AS3.getBindable(this,"imageSettingsValueExpression"));AS3.setBindable(cropImageAreaConfig,"imageDimensionsValueExpression",AS3.getBindable(this,"imageDimensionsValueExpression"));AS3.setBindable(cropImageAreaConfig,"boxedImageDimensionsValueExpression",this.getBoxedImageDimensionsValueExpression(AS3.getBindable(this,"imageDimensionsValueExpression")));AS3.setBindable(cropImageAreaConfig,"commonTransformationsValueExpression",AS3.getBindable(this,"commonTransformationsValueExpression"));
AS3.setBindable(cropImageAreaConfig,"imageEditorStageBoundsValueExpression",this.getImageEditorStageBoundsValueExpression());AS3.setBindable(cropImageAreaConfig,"backgroundColorValueExpression",this.getBackgroundColorExpression(AS3.getBindable(this,"imageEditorViewModel")));AS3.setBindable(cropImageAreaConfig,"imageSettingsWritableValueExpression",AS3.getBindable(this,"imageSettingsWritableValueExpression"));var variantBoxedImageDimensionValueExpression=AS3.getBindable(this,"variantBoxedImageDimensionsValueExpressions").getValue()[variant.key];
AS3.setBindable(cropImageAreaConfig,"variantBoxedImageDimensionValueExpression",variantBoxedImageDimensionValueExpression);return cropImageAreaConfig}function getBoxedImageDimensionsValueExpression(imageDimensionsValueExpression){if(!this.boxedImageDimensionsValueExpression$ncpg)this.boxedImageDimensionsValueExpression$ncpg=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeBoxedImageDimensions$ncpg"),imageDimensionsValueExpression);return this.boxedImageDimensionsValueExpression$ncpg}
function computeBoxedImageDimensions(imageDimensionsValueExpression){var imageDimensions=imageDimensionsValueExpression.getValue();if(!imageDimensions)return undefined;var activeTabItemId=AS3.getBindable(this,"activeTabValueExpression").getValue();if(activeTabItemId===ImageEditorStageBase.ITEM_ID_FOCUS_AREA)return this.computeMaxBoxedImageDimensions$ncpg(imageDimensionsValueExpression);var key=com.coremedia.cms.studio.imageeditor.VariantKeyUtil.itemIdToVariantKey(activeTabItemId);if(!key)return imageDimensions;
var variantBoxedImageDimensionsValueExpression=AS3.getBindable(this,"variantBoxedImageDimensionsValueExpressions").getValue()[key];return variantBoxedImageDimensionsValueExpression.getValue()}function computeMaxBoxedImageDimensions(imageDimensionsValueExpression){var imageDimensions=imageDimensionsValueExpression.getValue();if(!imageDimensions)return undefined;var width=imageDimensions.width;var height=imageDimensions.height;var variantBoxedImageDimensionsValueExpressions=AS3.getBindable(this,"variantBoxedImageDimensionsValueExpressions").getValue();
for(var $1 in variantBoxedImageDimensionsValueExpressions){var variantBoxedImageDimensionsValueExpression=variantBoxedImageDimensionsValueExpressions[$1];var boxedDimensions=variantBoxedImageDimensionsValueExpression.getValue();if(!boxedDimensions)return undefined;width=Math.max(width,boxedDimensions.width);height=Math.max(height,boxedDimensions.height)}return AS3.cast(com.coremedia.cms.studio.imageeditor.model.ImageDimensions,{width:width,height:height})}function getBackgroundColorExpression(imageEditorViewModel){if(!this.backgroundColorValueExpression$ncpg)this.backgroundColorValueExpression$ncpg=
com.coremedia.ui.data.ValueExpressionFactory.create("background",imageEditorViewModel);return this.backgroundColorValueExpression$ncpg}function handleImageAreaMouseMove(event){var hoverItem=this.activeTabItemId$ncpg===ImageEditorStageBase.ITEM_ID_FOCUS_AREA?this.getImageAreaFromClickEvent$ncpg(event):null;if(hoverItem!==this.lastHoverItem$ncpg){if(this.lastHoverItem$ncpg){this.lastHoverItem$ncpg.removeHoverCls();this.highlightVariantTab$ncpg(AS3.getBindable(this.lastHoverItem$ncpg,"itemId","DUMMY"),
false)}this.lastHoverItem$ncpg=hoverItem;var innerEl=this.getInnerContainer$ncpg().getEl();if(this.lastHoverItem$ncpg){innerEl.setStyle("cursor","pointer");this.lastHoverItem$ncpg.addHoverCls();this.highlightVariantTab$ncpg(AS3.getBindable(this.lastHoverItem$ncpg,"itemId","DUMMY"),true)}else innerEl.setStyle("cursor","auto")}}function highlightVariantTab(itemId,highlighted){var variantsTabPanel=this.getVariantsTabPanel$ncpg();if(variantsTabPanel){var variantTab=AS3.as(variantsTabPanel.queryById(itemId),
com.coremedia.cms.studio.imageeditor.VariantTab);var extendedTab=variantTab&&AS3.as(variantTab.tab,com.coremedia.ui.components.ExtendedTab);if(extendedTab)AS3.setBindable(extendedTab,"highlighted",highlighted)}}function handleInnerContainerMouseOut(){if(this.lastHoverItem$ncpg){this.lastHoverItem$ncpg.removeHoverCls();this.highlightVariantTab$ncpg(AS3.getBindable(this.lastHoverItem$ncpg,"itemId","DUMMY"),false);this.getInnerContainer$ncpg().getEl().setStyle("cursor","auto");this.lastHoverItem$ncpg=
null}}function handlePossibleImageAreaActivation(event){var targetImageArea;if(event.getKey()&&(event.getKey()===Ext.event.Event.ENTER||event.getKey()===Ext.event.Event.SPACE)){var targetEl=Ext.get(event.target);targetImageArea=targetEl&&AS3.as(targetEl.component,com.coremedia.cms.studio.imageeditor.CropImageArea);targetImageArea&&event.stopEvent()}else if(Ext.fly(event.browserEvent.target).hasCls(com.coremedia.cms.studio.imageeditor.ImageAreaBase.INNER_DIV_CLS))targetImageArea=this.activeTabItemId$ncpg===
ImageEditorStageBase.ITEM_ID_FOCUS_AREA?AS3.as(this.getImageAreaFromClickEvent$ncpg(event),com.coremedia.cms.studio.imageeditor.CropImageArea):null;if(targetImageArea){AS3.getBindable(this,"activeTabValueExpression").setValue(targetImageArea.getItemId());return true}return false}function moveCropBy(tabItemId,dx,dy){if(!AS3.getBindable(this,"imageDimensionsValueExpression"))return;var imageDimensions=AS3.getBindable(this,"imageDimensionsValueExpression").getValue();if(!imageDimensions)return;var imageEditorStageBounds=
this.imageEditorStageBoundsValueExpression$ncpg.getValue();var factor=Math.max(1,Math.round(imageDimensions.width/imageEditorStageBounds.width),Math.round(imageDimensions.height/imageEditorStageBounds.height));var key;if(tabItemId===ImageEditorStageBase.ITEM_ID_FOCUS_AREA)key=com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA;else{key=com.coremedia.cms.studio.imageeditor.VariantKeyUtil.itemIdToVariantKey(tabItemId);if(!AS3.getBindable(this,"imageEditorViewModel").get(key)){var variant=
this.getVariant$ncpg(key);if(!variant)return;var defaultCropDimensions=variant.calculateDefaultCropDimensions(AS3.getBindable(this,"imageEditorViewModel").get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA),imageDimensions);if(dx===0&&defaultCropDimensions.y===0&&defaultCropDimensions.height===1||dy===0&&defaultCropDimensions.x===0&&defaultCropDimensions.width===1)return;AS3.getBindable(this,"imageEditorViewModel").set(key,defaultCropDimensions)}}var cropDimensions=
AS3.getBindable(this,"imageEditorViewModel").get(key);var absoluteCropDimensions=cropDimensions.scale(imageDimensions.width,imageDimensions.height);var newX=com.coremedia.cms.studio.imageeditor.util.NumberUtil.clamp(0,absoluteCropDimensions.x+dx*factor,imageDimensions.width-absoluteCropDimensions.width);var newY=com.coremedia.cms.studio.imageeditor.util.NumberUtil.clamp(0,absoluteCropDimensions.y+dy*factor,imageDimensions.height-absoluteCropDimensions.height);var newAbsoluteCropDimensions=new com.coremedia.cms.studio.imageeditor.model.Rectangle(newX,
newY,absoluteCropDimensions.width,absoluteCropDimensions.height);var newCropDimensions=newAbsoluteCropDimensions.scale(1/imageDimensions.width,1/imageDimensions.height);AS3.getBindable(this,"imageEditorViewModel").set(key,newCropDimensions)}function getVariant(key){var variants=AS3.as(AS3.getBindable(this,"variantsValueExpression").getValue(),Array)||[];for(var $1=0;$1<variants.length;++$1){var variant=variants[$1];if(variant.key===key)return variant}return null}function getImageAreaFromClickEvent(event){var eventXY=
event.getXY();var containerXY=this.getInnerContainer$ncpg().getEl().getXY();var x=eventXY[0]-containerXY[0];var y=eventXY[1]-containerXY[1];return AS3.cast(com.coremedia.cms.studio.imageeditor.ImageArea,this.getInnerContainer$ncpg().itemCollection.findBy(function(component){var imageArea=AS3.as(component,com.coremedia.cms.studio.imageeditor.CropImageArea);return!!imageArea&&imageArea.isInsideBorder(x,y)}))||null}function activeTabChanged(){var newActiveTabItemId=AS3.getBindable(this,"activeTabValueExpression").getValue();
if(newActiveTabItemId!==this.activeTabItemId$ncpg){this.getActiveImageArea$ncpg().deactivate();this.activateTab$ncpg(newActiveTabItemId)}}function activateTab(newActiveTabItemId){this.activeTabItemId$ncpg=newActiveTabItemId;if(this.activeTabItemId$ncpg===ImageEditorStageBase.ITEM_ID_FOCUS_AREA)this.getInnerContainer$ncpg().removeCls(ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER);else this.getInnerContainer$ncpg().addCls(ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER);
this.getActiveImageArea$ncpg().activate()}function getActiveImageArea(){var active=this.getInnerContainer$ncpg().getComponent([this.activeTabItemId$ncpg]);if(active===undefined)active=this.getInnerContainer$ncpg().getComponent([ImageEditorStageBase.ITEM_ID_FOCUS_AREA]);return AS3.cast(com.coremedia.cms.studio.imageeditor.ImageAreaBase,active)}function onDestroy(){AS3.getBindable(this,"variantsValueExpression")&&AS3.getBindable(this,"variantsValueExpression").removeChangeListener(AS3.bind(this,"addCropVariants$ncpg"));
AS3.getBindable(this,"activeTabValueExpression")&&AS3.getBindable(this,"activeTabValueExpression").removeChangeListener(AS3.bind(this,"activeTabChanged$ncpg"));this.imageEditorStageBoundsValueExpression$ncpg.removeChangeListener(AS3.bind(this,"updateImageLocation$ncpg"));Ext.container.Container.prototype.onDestroy.call(this)}function updateImageLocation(localImageBoundsValueExpression){var bounds=localImageBoundsValueExpression.getValue();if(bounds&&bounds.hasAllValues()){var centeredContainer=this.getInnerContainer$ncpg();
centeredContainer.setPosition(bounds.x,bounds.y);centeredContainer.setSize(bounds.width+"",bounds.height+"");var imageComponent=AS3.cast(Ext.Component,centeredContainer.getComponent("image"));AS3.as(imageComponent,Ext.Component).setSize(bounds.width+"",bounds.height+"")}}function computeAvailableDimensions(){if(!this.rendered){com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this,"render");return undefined}var width=this.getWidth();var height=this.getHeight();if(width===0||
height===0){width=this.latestWidth$ncpg;height=this.latestHeight$ncpg}else{this.latestWidth$ncpg=width;this.latestHeight$ncpg=height}com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this,"resize");return AS3.cast(com.coremedia.cms.studio.imageeditor.model.ImageDimensions,{width:width,height:height})}function computeImageEditorStageBounds(){var available=this.computeAvailableDimensions$ncpg();var imageSize=this.boxedImageDimensionsValueExpression$ncpg.getValue();if(!available||
!imageSize)return undefined;var localWidth=available.width;var localHeight=available.height;var imageAspectRatio=imageSize.width/imageSize.height;var x0=0;var y0=0;if(localWidth/localHeight>imageAspectRatio){localWidth=localHeight*imageAspectRatio;x0=(available.width-localWidth)/2}else{localHeight=localWidth/imageAspectRatio;y0=(available.height-localHeight)/2}return(new com.coremedia.cms.studio.imageeditor.model.Rectangle(x0,y0,localWidth,localHeight)).round()}function computeLocalImageUri(){var imageUri=
AS3.getBindable(this,"imageUriValueExpression").getValue();var imageEditorStageBounds=this.imageEditorStageBoundsValueExpression$ncpg.getValue();var imageDimensions=AS3.getBindable(this,"imageDimensionsValueExpression").getValue();var box=this.boxedImageDimensionsValueExpression$ncpg.getValue();if(imageUri===undefined||imageEditorStageBounds===undefined||!imageEditorStageBounds.hasAllValues()||!box||!AS3.getBindable(this,"imageEditorViewModel"))return undefined;if(!imageUri.match(/\/$/))imageUri+=
"/";var scaledWidth=Math.round(imageDimensions.width*imageEditorStageBounds.width/box.width);var scaledHeight=Math.round(imageDimensions.height*imageEditorStageBounds.height/box.height);imageUri+="s;w\x3d"+scaledWidth+";h\x3d"+scaledHeight;imageUri+="/box;w\x3d"+imageEditorStageBounds.width+";h\x3d"+imageEditorStageBounds.height+";bg\x3d"+this.getBackgroundColorExpression(AS3.getBindable(this,"imageEditorViewModel")).getValue();return imageUri}function destroy(){var params=Array.prototype.slice.call(arguments);
Ext.container.Container.prototype.destroy.apply(this,params);AS3.getBindable(this,"variantsValueExpression").removeChangeListener(AS3.bind(this,"addCropVariants$ncpg"))}return{extend:"Ext.container.Container",boxedImageDimensionsValueExpression$ncpg:null,backgroundColorValueExpression$ncpg:null,imageEditorStageBoundsValueExpression$ncpg:null,activeTabItemId$ncpg:null,latestWidth$ncpg:NaN,latestHeight$ncpg:NaN,constructor:ImageEditorStageBase$,super$ncpg:function(){Ext.container.Container.prototype.constructor.apply(this,
arguments)},addImageComponentListeners$ncpg:addImageComponentListeners,setDisplayAreas$ncpg:setDisplayAreas,getImageSettings:getImageSettings,getImageSettingsValueExpression$ncpg:getImageSettingsValueExpression,onFocusEnter:onFocusEnter,onFocusLeave:onFocusLeave,getImageAreas:getImageAreas,addCropVariants$ncpg:addCropVariants,createImageEditorStageBoundsValueExpression:createImageEditorStageBoundsValueExpression,createShowAllCropsValueExpression:createShowAllCropsValueExpression,getImageEditorStageBoundsValueExpression:getImageEditorStageBoundsValueExpression,
getInnerContainer$ncpg:getInnerContainer,getFocusPointImageArea:getFocusPointImageArea,getFocusArea:getFocusArea,afterRender:afterRender,keydown$ncpg:keydown,getVariantsTabPanel$ncpg:getVariantsTabPanel,createCropImageArea:createCropImageArea,getBoxedImageDimensionsValueExpression:getBoxedImageDimensionsValueExpression,computeBoxedImageDimensions$ncpg:computeBoxedImageDimensions,computeMaxBoxedImageDimensions$ncpg:computeMaxBoxedImageDimensions,getBackgroundColorExpression:getBackgroundColorExpression,
lastHoverItem$ncpg:null,handleImageAreaMouseMove:handleImageAreaMouseMove,highlightVariantTab$ncpg:highlightVariantTab,handleInnerContainerMouseOut$ncpg:handleInnerContainerMouseOut,handlePossibleImageAreaActivation$ncpg:handlePossibleImageAreaActivation,moveCropBy:moveCropBy,getVariant$ncpg:getVariant,getImageAreaFromClickEvent$ncpg:getImageAreaFromClickEvent,activeTabChanged$ncpg:activeTabChanged,activateTab$ncpg:activateTab,getActiveImageArea$ncpg:getActiveImageArea,onDestroy:onDestroy,updateImageLocation$ncpg:updateImageLocation,
computeAvailableDimensions$ncpg:computeAvailableDimensions,computeImageEditorStageBounds$ncpg:computeImageEditorStageBounds,computeLocalImageUri:computeLocalImageUri,destroy:destroy,config:{imageEditorViewModel:null,readOnlyValueExpression:null,undoHistory:null,imageSettingsValueExpression:null,imageSettingsWritableValueExpression:null,commonTransformationsValueExpression:null,variantsValueExpression:null,imageUriValueExpression:null,imageDimensionsValueExpression:null,variantBoxedImageDimensionsValueExpressions:null,
activeTabValueExpression:null},statics:{ITEM_ID_FOCUS_AREA:"overview",ITEM_ID_FOCUS_POINT:"focusPoint",ITEM_ID_STAGE_INNER_CT:"inner",IMAGE_EDITOR_STAGE_BLOCK:"image-editor-stage",IMAGE_EDITOR_STAGE_IMAGE:"image-editor-image",IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER:undefined,IMAGE_EDITOR_STAGE_BLOCK_SHOW_CROPS_MODIFIER:undefined,__initStatics__:function(){IMAGE_EDITOR_STAGE_BLOCK_SHOW_SINGLE_CROP_MODIFIER$static_();IMAGE_EDITOR_STAGE_BLOCK_SHOW_CROPS_MODIFIER$static_()}},requires:["Ext",
"Ext.Component","Ext.Object","Ext.container.Container","Ext.event.Event","com.coremedia.ui.components.ExtendedTab","com.coremedia.ui.components.Image","com.coremedia.ui.data.FunctionValueExpression","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.dependencies.DependencyTracker","com.coremedia.ui.util.BEMUtils","com.coremedia.ui.util.createComponentSelector"],uses:["com.coremedia.cms.studio.imageeditor.CropImageArea","com.coremedia.cms.studio.imageeditor.FocusAreaImageArea","com.coremedia.cms.studio.imageeditor.FocusPointImageArea",
"com.coremedia.cms.studio.imageeditor.ImageArea","com.coremedia.cms.studio.imageeditor.ImageAreaBase","com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField","com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase","com.coremedia.cms.studio.imageeditor.VariantKeyUtil","com.coremedia.cms.studio.imageeditor.VariantTab","com.coremedia.cms.studio.imageeditor.model.ImageDimensions","com.coremedia.cms.studio.imageeditor.model.Rectangle","com.coremedia.cms.studio.imageeditor.util.NumberUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.util.TransformationChain",function(TransformationChain){function deserialize$static(chain){var commands=[];chain&&Ext.each(chain.split("/"),function(transformation){var frags=transformation.split(";"),transformation_name=AS3.as(frags.shift(),String),keyval,cmd={};cmd[transformation_name]={};Ext.each(frags,function(keyval_pair){keyval=keyval_pair.split("\x3d");if(Ext.isNumber(keyval[1]))cmd[transformation_name][keyval[0]]=Number(keyval[1]);else if(Ext.isBoolean(keyval[1]))cmd[transformation_name][keyval[0]]=
Boolean(keyval[1]);else if(Ext.isString(keyval[1]))cmd[transformation_name][keyval[0]]=String(keyval[1])},null);commands.push(cmd)},null);return commands}function serialize$static(commands){var outter=[];Ext.each(commands,function(cmd){Ext.iterate(cmd,function(cmd_name,cmd_params){var inner=[];Ext.iterate(cmd_params,function(cmd_prop_name,cmd_value,prop){inner.push(cmd_prop_name+"\x3d"+prop[cmd_prop_name])},null);outter.push(cmd_name+";"+inner.join(";"))},null)},null);return outter.join("/")}function TransformationChain$(){}
return{constructor:TransformationChain$,statics:{deserialize:deserialize$static,serialize:serialize$static},requires:["Ext"]}});Ext.define("com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil",function(ImageEditorUtil){var DEFAULT_FOCUS_POINT$static;function DEFAULT_FOCUS_POINT$static_(){DEFAULT_FOCUS_POINT$static=ImageEditorUtil.getDefaultPoint()}function isDefaultPoint$static(point){return point.x===DEFAULT_FOCUS_POINT$static.x&&point.y===DEFAULT_FOCUS_POINT$static.y}function getDefaultPoint$static(){return new com.coremedia.cms.studio.imageeditor.model.Point(.5,.5)}function getWidth$static(rectangle,referenceRectangle){return parseInt((rectangle.width*
referenceRectangle.width).toFixed(0))}function getPercentageWidth$static(width,referenceRectangle){return width/referenceRectangle.width}function getHeight$static(rectangle,referenceRectangle){return parseInt((rectangle.height*referenceRectangle.height).toFixed(0))}function getPercentageHeight$static(height,referenceRectangle){return height/referenceRectangle.height}function getX$static(rectangle,referenceRectangle){return parseInt((referenceRectangle.x+rectangle.x*referenceRectangle.width).toFixed(0))}
function getPercentageX$static(x,referenceRectangle){return(x-referenceRectangle.x)/referenceRectangle.width}function getValueOfRightX$static(rectangle,reference){return parseInt((ImageEditorUtil.getX(rectangle,reference)+ImageEditorUtil.getWidth(rectangle,reference)).toFixed(0))}function getY$static(rectangle,referenceRectangle){return parseInt((referenceRectangle.y+rectangle.y*referenceRectangle.height).toFixed(0))}function getPercentageY$static(y,referenceRectangle){return(y-referenceRectangle.y)/
referenceRectangle.height}function getLowerY$static(rectangle,referenceRectangle){return parseInt((ImageEditorUtil.getY(rectangle,referenceRectangle)+ImageEditorUtil.getHeight(rectangle,referenceRectangle)).toFixed(0))}function getPercentageRectangle$static(rectangle,referenceRectangle){return new com.coremedia.cms.studio.imageeditor.model.Rectangle(getPercentageX$static(rectangle.x,referenceRectangle),getPercentageY$static(rectangle.y,referenceRectangle),getPercentageWidth$static(rectangle.width,
referenceRectangle),getPercentageHeight$static(rectangle.height,referenceRectangle))}function getPixelRectangle$static(percentageRectangle,referenceRectangle){return new com.coremedia.cms.studio.imageeditor.model.Rectangle(ImageEditorUtil.getX(percentageRectangle,referenceRectangle),ImageEditorUtil.getY(percentageRectangle,referenceRectangle),ImageEditorUtil.getWidth(percentageRectangle,referenceRectangle),ImageEditorUtil.getHeight(percentageRectangle,referenceRectangle))}function ImageEditorUtil$(){}
return{constructor:ImageEditorUtil$,statics:{DEFAULT_FOCUS_POINT:undefined,isDefaultPoint:isDefaultPoint$static,getDefaultPoint:getDefaultPoint$static,getWidth:getWidth$static,getHeight:getHeight$static,getX:getX$static,getValueOfRightX:getValueOfRightX$static,getY:getY$static,getLowerY:getLowerY$static,getPercentageRectangle:getPercentageRectangle$static,getPixelRectangle:getPixelRectangle$static,__initStatics__:function(){DEFAULT_FOCUS_POINT$static_()}},uses:["com.coremedia.cms.studio.imageeditor.model.Point",
"com.coremedia.cms.studio.imageeditor.model.Rectangle"]}});Ext.define("com.coremedia.cms.studio.imageeditor.util.ConversionUtil",function(ConversionUtil){function stringToBoolean$static(string){return string==="true"}function stringToNumber$static(string){return Number(string)}function anyToString$static(any){return String(any)}function positionToRectangle$static(position){return!position?null:ConversionUtil.x1y1x2y2ToRectangle(com.coremedia.cms.studio.imageeditor.util.TransformationChain.deserialize(position)[0].position)}function x1y1x2y2ToRectangle$static(x1y1x2y2){var x1=
Number(x1y1x2y2.x1);var y1=Number(x1y1x2y2.y1);return new com.coremedia.cms.studio.imageeditor.model.Rectangle(x1,y1,Number(x1y1x2y2.x2)-x1,Number(x1y1x2y2.y2)-y1)}function xyToPoint$static(xy,defaultPoint){if(!xy)return defaultPoint;var x=Number(xy.x);var y=Number(xy.y);return new com.coremedia.cms.studio.imageeditor.model.Point(x,y)}function getBoundingBoxForCenter$static(center,radius,referenceRectangle){var tmpRectangle=new com.coremedia.cms.studio.imageeditor.model.Rectangle(center.x,center.y,
radius*2/referenceRectangle.width,radius*2/referenceRectangle.height);var xInPixel=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(tmpRectangle,referenceRectangle);var yInPixel=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(tmpRectangle,referenceRectangle);return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getPercentageRectangle(new com.coremedia.cms.studio.imageeditor.model.Rectangle(xInPixel-radius,yInPixel-radius,radius*2,radius*2),referenceRectangle)}
function getCenterOfRectangle$static(boundingBoxAroundCenter,referenceRectangle){var pixelRectangle=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getPixelRectangle(boundingBoxAroundCenter,referenceRectangle);var movedRectangle=pixelRectangle.move(pixelRectangle.width/2,pixelRectangle.height/2);var adjustedRectangle=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getPercentageRectangle(movedRectangle,referenceRectangle);return new com.coremedia.cms.studio.imageeditor.model.Point(adjustedRectangle.x,
adjustedRectangle.y)}function rectangleToPosition$static(rectangle){return!rectangle?"":com.coremedia.cms.studio.imageeditor.util.TransformationChain.serialize([{position:ConversionUtil.rectangleToX1y1x2y2(rectangle)}])}function rectangleToX1y1x2y2$static(rectangle){return!rectangle?null:{x1:String(rectangle.x),y1:String(rectangle.y),x2:String(rectangle.x+rectangle.width),y2:String(rectangle.y+rectangle.height)}}function ConversionUtil$(){}return{constructor:ConversionUtil$,statics:{stringToBoolean:stringToBoolean$static,
stringToNumber:stringToNumber$static,anyToString:anyToString$static,positionToRectangle:positionToRectangle$static,x1y1x2y2ToRectangle:x1y1x2y2ToRectangle$static,xyToPoint:xyToPoint$static,getBoundingBoxForCenter:getBoundingBoxForCenter$static,getCenterOfRectangle:getCenterOfRectangle$static,rectangleToPosition:rectangleToPosition$static,rectangleToX1y1x2y2:rectangleToX1y1x2y2$static},uses:["com.coremedia.cms.studio.imageeditor.model.Point","com.coremedia.cms.studio.imageeditor.model.Rectangle","com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil",
"com.coremedia.cms.studio.imageeditor.util.TransformationChain"]}});Ext.define("com.coremedia.cms.studio.imageeditor.util.NumberUtil",function(NumberUtil){function clamp$static(min,val,max){return Math.min(Math.max(min,val),max)}function NumberUtil$(){}return{constructor:NumberUtil$,statics:{clamp:clamp$static}}});Ext.define("com.coremedia.cms.studio.imageeditor.ColorTransformationUtil",function(ColorTransformationUtil){function transformContrast$static(storedValue){return ColorTransformationUtil.calculateInitialContrastSliderValue(Number(storedValue))}function reverseTransformContrast$static(value){return String(ColorTransformationUtil.calculateContrast(value))}function calculateContrast$static(c){return c<ColorTransformationUtil.CONTRAST_DEFAULT?translateRangeValue$static(c,ColorTransformationUtil.CONTRAST_MIN,
ColorTransformationUtil.CONTRAST_DEFAULT,ColorTransformationUtil.CONTRAST_REST_MIN,ColorTransformationUtil.CONTRAST_REST_DEFAULT):translateRangeValue$static(c,ColorTransformationUtil.CONTRAST_DEFAULT,ColorTransformationUtil.CONTRAST_MAX,ColorTransformationUtil.CONTRAST_REST_DEFAULT,ColorTransformationUtil.CONTRAST_REST_MAX)}function calculateInitialContrastSliderValue$static(c){return c<ColorTransformationUtil.CONTRAST_REST_DEFAULT?translateRangeValue$static(c,ColorTransformationUtil.CONTRAST_REST_MIN,
ColorTransformationUtil.CONTRAST_REST_DEFAULT,ColorTransformationUtil.CONTRAST_MIN,ColorTransformationUtil.CONTRAST_DEFAULT):translateRangeValue$static(c,ColorTransformationUtil.CONTRAST_REST_DEFAULT,ColorTransformationUtil.CONTRAST_REST_MAX,ColorTransformationUtil.CONTRAST_DEFAULT,ColorTransformationUtil.CONTRAST_MAX)}function translateRangeValue$static(val,leftMin,leftMax,rightMin,rightMax){return Number((rightMin+(val-leftMin)/(leftMax-leftMin)*(rightMax-rightMin)).toFixed(ColorTransformationUtil.CONTRAST_DECIMAL_PRECISION))}
function ColorTransformationUtil$(){}return{constructor:ColorTransformationUtil$,statics:{BRIGHTNESS_DEFAULT:0,BRIGHTNESS_MIN:-100,BRIGHTNESS_MAX:100,CONTRAST_REST_DEFAULT:1,CONTRAST_REST_MIN:0,CONTRAST_REST_MAX:10,CONTRAST_DEFAULT:0,CONTRAST_MIN:-10,CONTRAST_MAX:10,CONTRAST_INCREMENT:.1,CONTRAST_DECIMAL_PRECISION:1,transformContrast:transformContrast$static,reverseTransformContrast:reverseTransformContrast$static,calculateContrast:calculateContrast$static,calculateInitialContrastSliderValue:calculateInitialContrastSliderValue$static}}});Ext.define("com.coremedia.cms.studio.imageeditor.history.UndoHistory",function(UndoHistory){function UndoHistory$(viewModel){this.imageEditorViewModel$vOoJ=viewModel;this.undoHistoryValueExpression$vOoJ=com.coremedia.ui.data.ValueExpressionFactory.createFromValue([]);this.redoHistoryValueExpression$vOoJ=com.coremedia.ui.data.ValueExpressionFactory.createFromValue([])}function createViewModelValueExpression(property){return com.coremedia.ui.data.ValueExpressionFactory.create(property,this.imageEditorViewModel$vOoJ)}
function createStateSavingViewModelValueExpression(property,commandDescription,defaultValue,resetCommandDescription){var this$=this;if(arguments.length<=3)resetCommandDescription=null;var viewModelPropertyValueExpression=this.createViewModelValueExpression(property);return com.coremedia.ui.data.ValueExpressionFactory.createTransformingValueExpression(viewModelPropertyValueExpression,null,function(value){var oldValue=viewModelPropertyValueExpression.getValue();if(oldValue!==undefined&&oldValue!==value&&
(typeof value!=="object"||!com.coremedia.ui.util.ObjectUtils.compareObjects(oldValue,value)))this$.pushUndoableCommand(value===defaultValue?resetCommandDescription:commandDescription);return value})}function createResetStatusValueExpression(readOnlyValueExpression,property,resetValue){var this$=this;if(arguments.length<=2)resetValue=0;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var readOnly=readOnlyValueExpression.getValue();if(readOnly!==false)return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED;
var value=this$.imageEditorViewModel$vOoJ.get(property);if(value===undefined)return undefined;return value===resetValue?com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED:com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED})}function getHistoryValueExpression(isRedo){return isRedo?this.redoHistoryValueExpression$vOoJ:this.undoHistoryValueExpression$vOoJ}function pushUndoableCommand(text){this.addHistoryMenuItem$vOoJ(this.undoHistoryValueExpression$vOoJ,this.redoHistoryValueExpression$vOoJ,
text,this.imageEditorViewModel$vOoJ.toObject());this.redoHistoryValueExpression$vOoJ.setValue([])}function createCommand(undoText,change){var this$=this;return function(){this$.pushUndoableCommand(undoText);change(this$.imageEditorViewModel$vOoJ)}}function createImmediateCommand(undoText,change){this.pushUndoableCommand(undoText);change(this.imageEditorViewModel$vOoJ)}function createPropertyResetCommand(undoText,property,resetValue){var this$=this;if(arguments.length<=2)resetValue=0;return function(){this$.pushUndoableCommand(undoText);
this$.imageEditorViewModel$vOoJ.set(property,resetValue)}}function getDisabledExpression(isRedo,disableValueExpression){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var disabled=disableValueExpression.getValue();if(disabled!==false)return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED;var history=this$.getHistoryValueExpression(isRedo).getValue();return!history||history.length===0?com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED:
com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED})}function reset(){this.undoHistoryValueExpression$vOoJ.setValue([]);this.redoHistoryValueExpression$vOoJ.setValue([])}function undo(){this.undoOrRedo$vOoJ(1,this.undoHistoryValueExpression$vOoJ,this.redoHistoryValueExpression$vOoJ)}function redo(){this.undoOrRedo$vOoJ(1,this.redoHistoryValueExpression$vOoJ,this.undoHistoryValueExpression$vOoJ)}function undoOrRedo(numberOfSteps,historyValueExpression,otherHistoryValueExpression){var history=
historyValueExpression.getValue().concat();var state=this.imageEditorViewModel$vOoJ.toObject();for(var i=0;i<numberOfSteps;i++){var firstMenuItem=history.shift();this.addHistoryMenuItem$vOoJ(otherHistoryValueExpression,historyValueExpression,firstMenuItem.text,state);historyValueExpression.setValue(history);state=firstMenuItem["viewModelState"]}this.imageEditorViewModel$vOoJ.updateProperties(state)}function addHistoryMenuItem(historyValueExpression,otherHistoryValueExpression,text,viewModelState){var this$=
this;var history=historyValueExpression.getValue();var newMenuItem=AS3.cast(Ext.menu.Item,{});var itemIndex=history.length;AS3.setBindable(newMenuItem,"text",text);newMenuItem["viewModelState"]=viewModelState;AS3.setBindable(newMenuItem,"handler",function(){var newHistory=historyValueExpression.getValue();this$.undoOrRedo$vOoJ(newHistory.length-itemIndex,historyValueExpression,otherHistoryValueExpression)});historyValueExpression.setValue([newMenuItem].concat(history))}return{imageEditorViewModel$vOoJ:null,
undoHistoryValueExpression$vOoJ:null,redoHistoryValueExpression$vOoJ:null,constructor:UndoHistory$,createViewModelValueExpression:createViewModelValueExpression,createStateSavingViewModelValueExpression:createStateSavingViewModelValueExpression,createResetStatusValueExpression:createResetStatusValueExpression,getHistoryValueExpression:getHistoryValueExpression,pushUndoableCommand:pushUndoableCommand,createCommand:createCommand,createImmediateCommand:createImmediateCommand,createPropertyResetCommand:createPropertyResetCommand,
getDisabledExpression:getDisabledExpression,reset:reset,undo:undo,redo:redo,undoOrRedo$vOoJ:undoOrRedo,addHistoryMenuItem$vOoJ:addHistoryMenuItem,requires:["Ext.menu.Item","com.coremedia.ui.actions.DependencyTrackedActionBase","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.ObjectUtils"]}});Ext.define("com.coremedia.cms.studio.imageeditor.history.UndoRedoButton",function(UndoRedoButton){function __initialize__(config){this.BUNDLE$NLfn=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function UndoRedoButton$(config){if(arguments.length<=0)config=null;this.__initialize__$NLfn(config);var config_$1=AS3.cast(Ext.button.Split,{});var defaults_$1=AS3.cast(UndoRedoButton,{});AS3.setBindable(defaults_$1,"isRedo",false);config=net.jangaroo.ext.Exml.apply(defaults_$1,
config);var ui_DependencyTrackedAction_38_5_$1=AS3.cast(com.coremedia.ui.actions.DependencyTrackedAction,{});AS3.setBindable(ui_DependencyTrackedAction_38_5_$1,"iconCls",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"isRedo")?this.BUNDLE$NLfn.IEC_action_redo_iconCls:this.BUNDLE$NLfn.IEC_action_undo_iconCls));ui_DependencyTrackedAction_38_5_$1["tooltip"]=AS3.getBindable(config,"isRedo")?this.BUNDLE$NLfn.IEC_action_redo_toolTip:this.BUNDLE$NLfn.IEC_action_undo_toolTip;AS3.setBindable(ui_DependencyTrackedAction_38_5_$1,
"statusExpression",AS3.getBindable(config,"undoHistory").getDisabledExpression(AS3.getBindable(config,"isRedo"),AS3.getBindable(config,"disableValueExpression")));AS3.setBindable(ui_DependencyTrackedAction_38_5_$1,"handler",function(){AS3.getBindable(config,"isRedo")?AS3.getBindable(config,"undoHistory").redo():AS3.getBindable(config,"undoHistory").undo()});config_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedAction(ui_DependencyTrackedAction_38_5_$1);var menu_48_5_$1=AS3.cast(Ext.menu.Menu,
{});menu_48_5_$1.plain=true;var ui_BindItemsPlugin_50_9_$1=AS3.cast(com.coremedia.ui.plugins.BindItemsPlugin,{});AS3.setBindable(ui_BindItemsPlugin_50_9_$1,"valueExpression",AS3.getBindable(config,"undoHistory").getHistoryValueExpression(AS3.getBindable(config,"isRedo")));AS3.setBindable(ui_BindItemsPlugin_50_9_$1,"reuseComponents",false);menu_48_5_$1.plugins=[ui_BindItemsPlugin_50_9_$1];config_$1.menu=menu_48_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$NLfn(config_$1)}return{extend:"Ext.button.Split",
alias:"widget.com.coremedia.cms.studio.imageeditor.config.undoRedoButton",BUNDLE$NLfn:null,__initialize__$NLfn:__initialize__,constructor:UndoRedoButton$,super$NLfn:function(){Ext.button.Split.prototype.constructor.apply(this,arguments)},config:{undoHistory:null,disableValueExpression:null,isRedo:false},statics:{BUTTON_MENU_NO_ICON_CSS:"button-menu-no-icons"},requires:["Ext.button.Split","Ext.menu.Menu","com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.plugins.BindItemsPlugin",
"net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.VariantTabBase",function(VariantTabBase){function VariantTabBase$(config){if(arguments.length<=0)config=null;this.super$7zN4(config);this.initValidationStateMixin();this.on("validationStateChanged",AS3.bind(this,"updateValidation$7zN4"));this.on("validationMessageChanged",AS3.bind(this,"updateValidation$7zN4"));this.updateValidation$7zN4()}function focus(selectText,delay,callback,scope){switch(Math.max(arguments.length,2)){case 2:callback=null;case 3:scope=
null}var tabPanel=AS3.as(this.up(),Ext.tab.Panel);tabPanel.setActiveTab(this);return Ext.panel.Panel.prototype.focus.call(this,selectText,delay)}function getUndoText(variantKey){var variantDisplayName=com.coremedia.cms.studio.imageeditor.VariantKeyUtil.getVariantDisplayName(variantKey);return Ext.String.format(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_history_crops_changed_variant"),variantDisplayName)}function createEnlargeStatusExpression(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var readOnly=
AS3.getBindable(config,"readOnlyValueExpression").getValue();if(readOnly!==false)return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED;return com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED})}function updateValidation(){var validationStateMixin=AS3.as(this.tab,com.coremedia.ui.mixins.ValidationStateMixin);if(validationStateMixin){AS3.setBindable(validationStateMixin,"validationState",AS3.getBindable(this,"validationState"));AS3.setBindable(validationStateMixin,"validationMessage",
AS3.getBindable(this,"validationMessage"))}}return{extend:"Ext.panel.Panel",mixins:["com.coremedia.ui.mixins.ValidationStateMixin"],metadata:{"":["Event",["name","focus"]]},constructor:VariantTabBase$,super$7zN4:function(){Ext.panel.Panel.prototype.constructor.apply(this,arguments)},focus:focus,getUndoText:getUndoText,createEnlargeStatusExpression:createEnlargeStatusExpression,updateValidation$7zN4:updateValidation,requires:["Ext.String","Ext.panel.Panel","Ext.tab.Panel","com.coremedia.cms.studio.imageeditor.ImageEditor_properties",
"com.coremedia.ui.actions.DependencyTrackedActionBase","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.mixins.ValidationStateMixin"],uses:["com.coremedia.cms.studio.imageeditor.VariantKeyUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ResetImageMenuButton",function(ResetImageMenuButton){function __initialize__(config){this.BUNDLE$Y6_W=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function ResetImageMenuButton$(config){if(arguments.length<=0)config=null;this.__initialize__$Y6_W(config);var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ResetImageMenuButtonBase,{});var defaults_$1=AS3.cast(ResetImageMenuButton,{});
config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_reset_to_initial_iconCls));config_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_resetmenu_tooltip);AS3.setBindable(config_$1,"tooltip",this.BUNDLE$Y6_W.IEC_action_resetmenu_tooltip);var menu_37_5_$1=AS3.cast(Ext.menu.Menu,{});var menuItem_39_9_$1=AS3.cast(Ext.menu.Item,{});menuItem_39_9_$1.itemId="resetAll";var ui_DependencyTrackedAction_41_13_$1=
AS3.cast(com.coremedia.ui.actions.DependencyTrackedAction,{});AS3.setBindable(ui_DependencyTrackedAction_41_13_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_reset_to_initial_iconCls));ui_DependencyTrackedAction_41_13_$1["tooltip"]=this.BUNDLE$Y6_W.IEC_action_resetimage_toolTip;AS3.setBindable(ui_DependencyTrackedAction_41_13_$1,"text",net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_resetimage_text));AS3.setBindable(ui_DependencyTrackedAction_41_13_$1,"statusExpression",
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeResetImageStatus"),AS3.getBindable(config,"disabledValueExpression"),AS3.getBindable(config,"imageEditorViewModel")));AS3.setBindable(ui_DependencyTrackedAction_41_13_$1,"handler",AS3.getBindable(config,"undoHistory").createCommand(this.BUNDLE$Y6_W.IEC_history_image_reseted,AS3.bind(this,"resetImage")));menuItem_39_9_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedAction(ui_DependencyTrackedAction_41_13_$1);
var menuItem_48_9_$1=AS3.cast(Ext.menu.Item,{});menuItem_48_9_$1.itemId="resetFocal";var ui_DependencyTrackedAction_50_13_$1=AS3.cast(com.coremedia.ui.actions.DependencyTrackedAction,{});AS3.setBindable(ui_DependencyTrackedAction_50_13_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_resetfocal_iconCls));ui_DependencyTrackedAction_50_13_$1["tooltip"]=this.BUNDLE$Y6_W.IEC_action_resetfocal_toolTip;AS3.setBindable(ui_DependencyTrackedAction_50_13_$1,"text",net.jangaroo.ext.Exml.asString(this.BUNDLE$Y6_W.IEC_action_resetfocal_text));
AS3.setBindable(ui_DependencyTrackedAction_50_13_$1,"statusExpression",com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeResetFocusStatus"),AS3.getBindable(config,"disabledValueExpression"),AS3.getBindable(config,"imageEditorViewModel")));AS3.setBindable(ui_DependencyTrackedAction_50_13_$1,"handler",AS3.getBindable(config,"undoHistory").createCommand(this.BUNDLE$Y6_W.IEC_history_resetfocal,AS3.bind(this,"resetFocusAreaAndCrops")));menuItem_48_9_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedAction(ui_DependencyTrackedAction_50_13_$1);
menu_37_5_$1.items=[menuItem_39_9_$1,menuItem_48_9_$1];config_$1.menu=menu_37_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$Y6_W(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.ResetImageMenuButtonBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.resetImageMenuButton",BUNDLE$Y6_W:null,__initialize__$Y6_W:__initialize__,constructor:ResetImageMenuButton$,super$Y6_W:function(){com.coremedia.cms.studio.imageeditor.ResetImageMenuButtonBase.prototype.constructor.apply(this,
arguments)},config:{undoHistory:null,variantsValueExpression:null},requires:["Ext.menu.Item","Ext.menu.Menu","com.coremedia.cms.studio.imageeditor.ResetImageMenuButtonBase","com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.data.ValueExpressionFactory","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageAreaBase",function(ImageAreaBase){function ORIENTATIONS_(){this.ORIENTATIONS$VjqM=["north","northeast","east","southeast","south","southwest","west","northwest"]}function ImageAreaBase$(config){if(arguments.length<=0)config=null;this.super$VjqM(config);ORIENTATIONS_.call(this);this.initValidationStateMixin()}function getImageEditorStage(){return AS3.as(this.findParentByType(com.coremedia.cms.studio.imageeditor.ImageEditorStage.xtype),com.coremedia.cms.studio.imageeditor.ImageEditorStage)}
function getBoundsValueExpression(config){if(arguments.length<=0)config=null;return this.getImageEditorStage().getFocusArea().getFocusAreaValueExpression(config)}function getPercentageRectangle(){return this.getBoundsValueExpression().getValue()}function afterRender(){Ext.Component.prototype.afterRender.call(this);this.outerImageArea=this.el.createChild({cls:ImageAreaBase.OUTER_DIV_CLS});this.outerImageArea.createChild({cls:ImageAreaBase.INNER_DIV_CLS});if(this.el.hasCls(ImageAreaBase.SINGLE_CROP_CLS))this.activate();
this.imageAreaBoundsValueExpression$VjqM=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeRectangle"),this.getBoundsValueExpression(),AS3.getBindable(this,"imageEditorStageBoundsValueExpression"));this.imageAreaBoundsValueExpression$VjqM.addChangeListener(AS3.bind(this,"updateImageAreaBounds"));this.mon(this.up(),"resize",AS3.bind(this,"updateImageAreaBounds"));AS3.getBindable(this,"variantsValueExpression").addChangeListener(AS3.bind(this,"updateImageAreaBounds"));
this.updateImageAreaBounds();this.addAriaLabel$VjqM();this.setupFocusManagement$VjqM()}function addAriaLabel(){var ariaLabelEl=com.coremedia.ui.util.AriaUtils.createReferenceableAriaEl(this,"label");com.coremedia.ui.util.AriaUtils.addLabelledBy(this.getEl(),ariaLabelEl.id);ariaLabelEl.dom.innerHTML=this.ariaLabel}function setTabIndex(newTabIndex){Ext.Component.prototype.setTabIndex.call(this,newTabIndex);this.getEl()&&this.getEl().dom&&this.getEl().dom.setAttribute("tabIndex",newTabIndex)}function setupFocusManagement(){var this$=
this;this.mon(this.getEl(),"mousedown",AS3.bind(this,"focus"));this.mon(this.getEl(),"focus",function(){this$.addHoverCls()});this.mon(this.getEl(),"blur",function(){this$.removeHoverCls()})}function removeHoverCls(){this.getEl()&&this.getEl().removeCls("hover")}function addHoverCls(){this.getEl()&&this.getEl().addCls("hover")}function resizableMouseDown(tracker,e){var startRegion=this.getEl().getRegion();this.start=new com.coremedia.cms.studio.imageeditor.model.Rectangle(startRegion.left,startRegion.top,
startRegion.right-startRegion.left,startRegion.bottom-startRegion.top);this.activeHandle=e.target.getAttribute("data-orientation")||ImageAreaBase.HANDLE_CENTER}function resizableDrag(tracker,e){this.updateDimensions()}function resizableDragEnd(tracker,e){this.updateDimensions();this.imageAreaChanged$VjqM()}function onDestroy(){AS3.getBindable(this,"variantsValueExpression").removeChangeListener(AS3.bind(this,"updateImageAreaBounds"));var parent=this.up();parent&&this.mun(parent,"resize",AS3.bind(this,
"updateImageAreaBounds"));if(this.imageAreaBoundsValueExpression$VjqM)this.imageAreaBoundsValueExpression$VjqM.removeChangeListener(AS3.bind(this,"updateImageAreaBounds"));Ext.Component.prototype.onDestroy.call(this)}function activate(){this.addCls(ImageAreaBase.SINGLE_CROP_CLS);if(this.rendered){AS3.getBindable(this,"readOnlyValueExpression").addChangeListener(AS3.bind(this,"readOnlyStateChanged$VjqM"));this.readOnlyStateChanged$VjqM()}}function deactivate(){AS3.getBindable(this,"readOnlyValueExpression").removeChangeListener(AS3.bind(this,
"readOnlyStateChanged$VjqM"));this.removeCls(ImageAreaBase.SINGLE_CROP_CLS);this.deactivateResizer()}function getVariantBoxedImageDimensionsValueExpression(){return AS3.getBindable(this,"imageDimensionsValueExpression")}function computeRectangle(imageAreaBoundsVE,imageEditorStageBoundsVE){var variantBoxedImageDimensionsValueExpression=this.getVariantBoxedImageDimensionsValueExpression();if(!variantBoxedImageDimensionsValueExpression)return undefined;var imageDimensions=variantBoxedImageDimensionsValueExpression.getValue();
var imageAreaBounds=imageAreaBoundsVE.getValue();var imageEditorStageBounds=imageEditorStageBoundsVE.getValue();var imageSection=AS3.getBindable(this,"boxedImageDimensionsValueExpression").getValue();if(!imageEditorStageBounds||!imageAreaBounds||!imageSection||!imageDimensions)return undefined;var adjustedCrop=imageAreaBounds.adjust(imageDimensions,imageSection,AS3.getBindable(this,"variant")?AS3.getBindable(this,"variant").aspectRatio:NaN);return adjustedCrop.scale(imageEditorStageBounds.width,imageEditorStageBounds.height).round()}
function updateImageAreaBounds(){var box=this.imageAreaBoundsValueExpression$VjqM.getValue();if(box&&this.el&&this.el.dom){this.el.setLocalXY(box.x,box.y);this.el.setSize(box.width,box.height);if(this.deactivateResizer())this.activateResizer$VjqM()}}function isInsideBorder(x,y){var bounds=this.imageAreaBoundsValueExpression$VjqM.getValue();return!!bounds&&bounds.containsPoint(x,y)&&!bounds.grow(-3).containsPoint(x,y)}function readOnlyStateChanged(){var readOnly=AS3.getBindable(this,"readOnlyValueExpression").getValue();
if(readOnly===false)this.activateResizer$VjqM();else this.deactivateResizer()}function activateResizer(){this.theResizable=new Ext.dd.DragTracker(AS3.cast(Ext.dd.DragTracker,{el:this.getEl()}));this.theResizable.on("mouseDown",AS3.bind(this,"resizableMouseDown$VjqM"));this.theResizable.on("drag",AS3.bind(this,"resizableDrag$VjqM"));this.theResizable.on("dragEnd",AS3.bind(this,"resizableDragEnd$VjqM"));if(this.showResizeHandles){this.handles$VjqM=[];for(var $1=0;$1<this.ORIENTATIONS$VjqM.length;++$1){var orientation=
this.ORIENTATIONS$VjqM[$1];this.handles$VjqM.push(this.el.createChild({cls:"x-resizable-handle "+"x-resizable-handle-"+orientation+" "+"x-component-handle "+"x-component-handle-"+orientation+" "+"x-component-handle-"+orientation+"-br "+"x-unselectable","data-orientation":orientation,unselectable:"on",role:"presentation"}))}}}function updateDimensions(){try{var offset=this.theResizable.getOffset(null);var diffX=offset[0];var diffY=offset[1];var ownerBox=this.ownerCt.getBox();var imageEditorStageBounds=
AS3.getBindable(this,"imageEditorStageBoundsValueExpression").getValue();var region=new com.coremedia.cms.studio.imageeditor.model.Rectangle(ownerBox.x,ownerBox.y,imageEditorStageBounds.width,imageEditorStageBounds.height);var adjustedRegion=ImageAreaBase.adjustRegion(region,AS3.getBindable(this,"boxedImageDimensionsValueExpression").getValue(),this.getVariantBoxedImageDimensionsValueExpression().getValue());var newBox;if(this.activeHandle===ImageAreaBase.HANDLE_CENTER){diffX=Math.max(Math.min(diffX,
adjustedRegion.right-this.start.right),adjustedRegion.left-this.start.left);diffY=Math.max(Math.min(diffY,adjustedRegion.bottom-this.start.bottom),adjustedRegion.top-this.start.top);this.setXY([this.start.x+diffX,this.start.y+diffY])}else{newBox=this.makeNewBox(this.start,this.activeHandle,diffX,diffY,adjustedRegion);this.setBox(newBox)}}catch(ex){}}function adjustRegion$static(region,screenBox,variantBox){var boxOffsetX=(screenBox.width-variantBox.width)/2;var boxOffsetY=(screenBox.height-variantBox.height)/
2;var dx=boxOffsetX/screenBox.width*region.width;var dy=boxOffsetY/screenBox.height*region.height;var adjustedRegion=(new com.coremedia.cms.studio.imageeditor.model.Rectangle(region.x+dx,region.y+dy,region.width/screenBox.width*variantBox.width,region.height/screenBox.height*variantBox.height)).round();return adjustedRegion}function makeNewBox(start,activeHandle,diffX,diffY,region){var l=start.left;var r=start.right;var t=start.top;var b=start.bottom;if(activeHandle.indexOf("east")!==-1)r=Math.min(Math.max(r+
diffX,l+1),region.right);if(activeHandle.indexOf("south")!==-1)b=Math.min(Math.max(b+diffY,t+1),region.bottom);if(activeHandle.indexOf("west")!==-1)l=Math.max(Math.min(l+diffX,r-1),region.left);if(activeHandle.indexOf("north")!==-1)t=Math.max(Math.min(t+diffY,b-1),region.top);var newBox={width:r-l,height:b-t,x:l,y:t};return newBox}function sqr$static(x){return x*x}function deactivateResizer(){if(this.theResizable){this.theResizable.destroy();this.theResizable=null;if(this.handles$VjqM){Ext.destroy(this.handles$VjqM);
this.handles$VjqM=null}return true}return false}function getCropRatio(){return NaN}function getUndoText(){return this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_history_crops_changed_overview")}function imageAreaChanged(){var box=this.getEl().getBox(false,true);if(box.width===0||box.height===0)return;var imageEditorStageBounds=AS3.getBindable(this,"imageEditorStageBoundsValueExpression").getValue();if(imageEditorStageBounds&&imageEditorStageBounds.hasAllValues()){var variantImageBounds=
ImageAreaBase.adjustRegion(imageEditorStageBounds,AS3.getBindable(this,"boxedImageDimensionsValueExpression").getValue(),this.getVariantBoxedImageDimensionsValueExpression().getValue());var movedAndResized=com.coremedia.cms.studio.imageeditor.model.Rectangle.fromBox(box).move(imageEditorStageBounds.x-variantImageBounds.x,imageEditorStageBounds.y-variantImageBounds.y);var transformed=movedAndResized.scale(1/variantImageBounds.width,1/variantImageBounds.height);var newImageAreaBounds=transformed.constrain(this.getCropRatio());
var boundsValueExpression=this.getBoundsValueExpression();var imageAreaBounds=boundsValueExpression.getValue();if(!!imageAreaBounds&&!imageAreaBounds.equals(newImageAreaBounds)){AS3.getBindable(this,"undoHistory").pushUndoableCommand(this.getUndoText());boundsValueExpression.setValue(newImageAreaBounds)}else com.coremedia.ui.util.EventUtil.invokeLater(AS3.bind(this,"updateImageAreaBounds"))}}function computeAriaLabel(config){var ariaLabelSuffix="";if(AS3.getBindable(config,"name"))ariaLabelSuffix=
AS3.getBindable(config,"name");else if(AS3.getBindable(config,"variant"))ariaLabelSuffix=AS3.getBindable(config,"variant").widthRatio+" "+AS3.getBindable(config,"variant").heightRatio;return this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_labels_imageArea_ariaLabel")+" "+ariaLabelSuffix}function getAdjustedImageBounds(){var imageEditorStageBounds=AS3.getBindable(this,"imageEditorStageBoundsValueExpression").getValue();var boxedImageBounds=AS3.getBindable(this,
"boxedImageDimensionsValueExpression").getValue();var variantImageBounds=this.getVariantBoxedImageDimensionsValueExpression().getValue();if(!boxedImageBounds||!variantImageBounds)return undefined;var boxOffsetX=(boxedImageBounds.width-variantImageBounds.width)/2;var boxOffsetY=(boxedImageBounds.height-variantImageBounds.height)/2;var dx=boxOffsetX/boxedImageBounds.width*imageEditorStageBounds.width;var dy=boxOffsetY/boxedImageBounds.height*imageEditorStageBounds.height;var result=(new com.coremedia.cms.studio.imageeditor.model.Rectangle(dx,
dy,imageEditorStageBounds.width/boxedImageBounds.width*variantImageBounds.width,imageEditorStageBounds.height/boxedImageBounds.height*variantImageBounds.height)).round();return result}return{extend:"Ext.Component",mixins:["com.coremedia.ui.mixins.ValidationStateMixin"],outerImageArea:null,imageAreaBoundsValueExpression$VjqM:null,theResizable:null,handles$VjqM:null,start:null,activeHandle:null,showResizeHandles:true,constructor:ImageAreaBase$,super$VjqM:function(){Ext.Component.prototype.constructor.apply(this,
arguments)},getImageEditorStage:getImageEditorStage,getBoundsValueExpression:getBoundsValueExpression,getPercentageRectangle:getPercentageRectangle,afterRender:afterRender,addAriaLabel$VjqM:addAriaLabel,setTabIndex:setTabIndex,setupFocusManagement$VjqM:setupFocusManagement,removeHoverCls:removeHoverCls,addHoverCls:addHoverCls,resizableMouseDown$VjqM:resizableMouseDown,resizableDrag$VjqM:resizableDrag,resizableDragEnd$VjqM:resizableDragEnd,onDestroy:onDestroy,activate:activate,deactivate:deactivate,
getVariantBoxedImageDimensionsValueExpression:getVariantBoxedImageDimensionsValueExpression,computeRectangle:computeRectangle,updateImageAreaBounds:updateImageAreaBounds,isInsideBorder:isInsideBorder,readOnlyStateChanged$VjqM:readOnlyStateChanged,activateResizer$VjqM:activateResizer,updateDimensions:updateDimensions,makeNewBox:makeNewBox,deactivateResizer:deactivateResizer,getCropRatio:getCropRatio,getUndoText:getUndoText,imageAreaChanged$VjqM:imageAreaChanged,computeAriaLabel:computeAriaLabel,getAdjustedImageBounds:getAdjustedImageBounds,
config:{variant:null,imageEditorViewModel:null,readOnlyValueExpression:null,undoHistory:null,imageSettingsValueExpression:null,imageDimensionsValueExpression:null,boxedImageDimensionsValueExpression:null,commonTransformationsValueExpression:null,imageEditorStageBoundsValueExpression:null,variantsValueExpression:null},statics:{OUTER_DIV_CLS:"image-area",INNER_DIV_CLS:"image-area-inner",SINGLE_CROP_CLS:"solo",HANDLE_CENTER:"center",adjustRegion:adjustRegion$static,sqr:sqr$static},requires:["Ext","Ext.Component",
"Ext.dd.DragTracker","com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.mixins.ValidationStateMixin","com.coremedia.ui.util.AriaUtils","com.coremedia.ui.util.EventUtil"],uses:["com.coremedia.cms.studio.imageeditor.ImageEditorStage","com.coremedia.cms.studio.imageeditor.model.Rectangle"]}});Ext.define("com.coremedia.cms.studio.imageeditor.MenuButtonBase",function(MenuButtonBase){function MenuButtonBase$(config){if(arguments.length<=0)config=null;this.super$e5Nb(config);AS3.setBindable(this,"disabledValueExpression",AS3.getBindable(config,"disabledValueExpression"));if(AS3.getBindable(this,"disabledValueExpression")){AS3.getBindable(this,"disabledValueExpression").addChangeListener(AS3.bind(this,"updateDisabledStatus$e5Nb"));this.updateDisabledStatus$e5Nb()}}function updateDisabledStatus(){var disabled=
AS3.getBindable(this,"disabledValueExpression").getValue();this.setDisabled(disabled!==false)}function onDestroy(){if(AS3.getBindable(this,"disabledValueExpression"))AS3.getBindable(this,"disabledValueExpression").removeChangeListener(AS3.bind(this,"updateDisabledStatus$e5Nb"));com.coremedia.ui.components.IconButton.prototype.onDestroy.call(this)}return{extend:"com.coremedia.ui.components.IconButton",constructor:MenuButtonBase$,super$e5Nb:function(){com.coremedia.ui.components.IconButton.prototype.constructor.apply(this,
arguments)},updateDisabledStatus$e5Nb:updateDisabledStatus,onDestroy:onDestroy,config:{disabledValueExpression:null},requires:["com.coremedia.ui.components.IconButton"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase",function(ImageEditorPropertyFieldBase){var DEG_TO_RAD$static;function DEG_TO_RAD$static_(){DEG_TO_RAD$static=Math.PI/180}var CONTENTTYPE_PROPERTIES$static;function CONTENTTYPE_PROPERTIES$static_(){CONTENTTYPE_PROPERTIES$static=mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.cms.editor.ContentTypes").content}function ImageEditorPropertyFieldBase$(config){if(arguments.length<=0)config=null;
this.super$fiEH(config);this.contentValueExpression$fiEH=AS3.getBindable(config,"bindTo");this.propertyName$fiEH=AS3.getBindable(config,"propertyName");this.content$fiEH=this.contentValueExpression$fiEH.getValue();this.content$fiEH.addPropertyChangeListener(com.coremedia.cap.content.ContentPropertyNames.CHECKED_IN,AS3.bind(this,"onCheckIn"));this.getDisableExpression(config);this.imageEditorViewModel.addPropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_DISABLE_CROPPING,AS3.bind(this,
"checkCropsEnabling$fiEH"));this.getBlobValueExpression(AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField,this.initialConfig)).addChangeListener(AS3.bind(this,"checkCropsEnabling$fiEH"));this.imageEditorViewModel.addPropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA,AS3.bind(this,"focusAreaViewModelChanged$fiEH"));this.imageEditorViewModel.addPropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_POINT,AS3.bind(this,"focusPointViewModelChanged$fiEH"));
this.getBlobValueExpression(config).addChangeListener(AS3.bind(this,"onBlobChange$fiEH"));this.getImageDimensionsValueExpression$fiEH(config).addChangeListener(AS3.bind(this,"setImageDimensions$fiEH"));this.contentValueExpression$fiEH.addChangeListener(AS3.bind(this,"contentChanged$fiEH"));this.contentPathValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.create(com.coremedia.cap.content.ContentPropertyNames.PATH,this.contentValueExpression$fiEH.getValue());this.contentPathValueExpression$fiEH.addChangeListener(AS3.bind(this,
"contentChanged$fiEH"));this.contentChanged$fiEH();this.tabItemValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"getTabItems$fiEH"),config);this.tabItemValueExpression$fiEH.addChangeListener(AS3.bind(this,"updateVariantTabs$fiEH"));this.updateVariantTabs$fiEH();var tabPanel=this.getVariantsTabPanel();tabPanel.addListener("tabchange",function(tabPanel,tab){tab.fireEvent("focus",tab)})}function contentChanged(){var this$=this;var content=this.contentValueExpression$fiEH.getValue();
if(content){if(!content.isLoaded()){content.load(AS3.bind(this,"contentChanged$fiEH"));return}var path="imageVariants/loadVariants";var imageVariantsMethod=new com.coremedia.ui.data.impl.RemoteServiceMethod(path,"GET");imageVariantsMethod.request({"content":content.getId()},function(response){if(content===this$.contentValueExpression$fiEH.getValue()){var responseJSON=response.getResponseJSON();var variants=toVariants$static(responseJSON["variants"]);this$.setVariants$fiEH(variants)}},function(response){if(content===
this$.contentValueExpression$fiEH.getValue()){var error=response.getError();com.coremedia.ui.logging.Logger.error("Error loading variants from server: "+error.errorName+" (Code: "+error.errorCode+").");this$.setVariants$fiEH([])}})}else this.setVariants$fiEH([])}function setVariants(variants){this.getVariantsValueExpression().setValue(variants);var typeName=this.content$fiEH.getType().getName();var cropsizeIssueText=this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor",
"IEC_cropsize_issue_text");for(var $1=0;$1<variants.length;++$1){var variant=variants[$1];var key=typeName+"_"+this.propertyName$fiEH+"."+variant.key+"_"+com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.LABEL;CONTENTTYPE_PROPERTIES$static[key]=Ext.String.format(cropsizeIssueText,variant.widthRatio,variant.heightRatio)}}function toVariants$static(configuredVariants){var variants=[];for(var $1=0;$1<configuredVariants.length;++$1){var configuredVariant=configuredVariants[$1];if(configuredVariant.widthRatio>
0&&configuredVariant.heightRatio>0){var variant=new com.coremedia.cms.studio.imageeditor.ImageVariant(configuredVariant.name,configuredVariant.widthRatio,configuredVariant.heightRatio,configuredVariant.minWidth,configuredVariant.minHeight);variants.push(variant)}}return variants}function getVariantsValueExpression(){if(!this.variantsValueExpression$fiEH)this.variantsValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromValue([]);return this.variantsValueExpression$fiEH}function getVariantsTabPanel(){return AS3.as(this.queryById("overviewVariants"),
Ext.tab.Panel)}function getImageEditorStage(){return this.rendered?AS3.as(this.queryById(com.coremedia.cms.studio.imageeditor.ImageEditorStage.ITEM_ID),com.coremedia.cms.studio.imageeditor.ImageEditorStage):undefined}function onCheckIn(pce){if(pce.newValue===true)this.undoHistory.reset()}function checkCropsEnabling(){var enableCrops=!this.imageEditorViewModel.get(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_DISABLE_CROPPING);var blob=this.getBlobValueExpression(AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField,
this.initialConfig)).getValue();if(blob){enableCrops=enableCrops&&blob.getSize()>=0;this.getShowCropsValueExpression().setValue(enableCrops)}else this.getShowCropsValueExpression().setValue(false)}function createTabItem(variant){var variantTabCfg=AS3.cast(com.coremedia.cms.studio.imageeditor.VariantTab,{});variantTabCfg.itemId=com.coremedia.cms.studio.imageeditor.VariantKeyUtil.variantKeyToItemId(variant.key);AS3.setBindable(variantTabCfg,"propertyName",this.propertyName$fiEH);variantTabCfg.variant=
variant;AS3.setBindable(variantTabCfg,"variantKey",variant?variant.key:undefined);variantTabCfg.disableValueExpression=this.disableExpression$fiEH;variantTabCfg.enlargeValueExpression=this.createEnlargeValueExpression$fiEH(variant.key);variantTabCfg.imageDimensionsValueExpression=this.commonTransformsImageDimensionsValueExpression$fiEH;variantTabCfg.boxedImageDimensionsValueExpression=this.getVariantBoxedImageDimensionsValueExpression$fiEH(AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField,
this.initialConfig),variant.key);return variantTabCfg}function getVariantBoxedImageDimensionsValueExpression(config,key){return this.getVariantBoxedImageDimensionsValueExpressions(config).getValue()[key]}function createReadOnlyValueExpression(config,undoHistory){this.readOnlyValueExpression$fiEH=com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.createReadOnlyValueExpression(AS3.getBindable(config,"bindTo"),AS3.getBindable(config,"forceReadOnlyValueExpression"));this.undoHistory=undoHistory;this.readOnlyValueExpression$fiEH.addChangeListener(AS3.bind(undoHistory,
"reset"));return this.readOnlyValueExpression$fiEH}function getDisableExpression(config){var this$=this;if(!this.disableExpression$fiEH)this.disableExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var readOnly=this$.readOnlyValueExpression$fiEH.getValue();if(readOnly!==false)return true;var blob=this$.getBlobValueExpression(config).getValue();return!blob||blob.getSize()===undefined});return this.disableExpression$fiEH}function getDisableStatusExpression(disableValueExpression){if(!this.disableStatusExpression$fiEH)this.disableStatusExpression$fiEH=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var disabledToolbar=disableValueExpression.getValue();if(disabledToolbar!==false)return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED;return com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED});return this.disableStatusExpression$fiEH}function onDestroy(){this.contentValueExpression$fiEH.removeChangeListener(AS3.bind(this,"contentChanged$fiEH"));this.blobValueExpression$fiEH.removeChangeListener(AS3.bind(this,
"onBlobChange$fiEH"));this.readOnlyValueExpression$fiEH.removeChangeListener(AS3.bind(this.undoHistory,"reset"));this.tabItemValueExpression$fiEH.removeChangeListener(AS3.bind(this,"updateVariantTabs$fiEH"));this.imageEditorViewModel.removePropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_DISABLE_CROPPING,AS3.bind(this,"checkCropsEnabling$fiEH"));this.getBlobValueExpression(AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField,this.initialConfig)).removeChangeListener(AS3.bind(this,
"checkCropsEnabling$fiEH"));this.imageEditorViewModel.removePropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA,AS3.bind(this,"focusAreaViewModelChanged$fiEH"));this.imageEditorViewModel.removePropertyChangeListener(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_POINT,AS3.bind(this,"focusPointViewModelChanged$fiEH"));this.content$fiEH.removePropertyChangeListener(com.coremedia.cap.content.ContentPropertyNames.CHECKED_IN,AS3.bind(this,"onCheckIn"));this.imageDimensionsValueExpression$fiEH.removeChangeListener(AS3.bind(this,
"setImageDimensions$fiEH"));this.contentPathValueExpression$fiEH.removeChangeListener(AS3.bind(this,"contentChanged$fiEH"));Ext.panel.Panel.prototype.onDestroy.call(this)}function getImageDimensionsValueExpression(config){if(!this.imageDimensionsValueExpression$fiEH)this.imageDimensionsValueExpression$fiEH=this.getBlobValueExpression(config).extendBy("metadata.imageDimensions");return this.imageDimensionsValueExpression$fiEH}function getCommonTransformsImageDimensionsValueExpression(config){if(!this.commonTransformsImageDimensionsValueExpression$fiEH)this.commonTransformsImageDimensionsValueExpression$fiEH=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeCommonTransformsImageDimensions$fiEH"),this.getImageDimensionsValueExpression$fiEH(config));return this.commonTransformsImageDimensionsValueExpression$fiEH}function getBlobValueExpression(config){if(!this.blobValueExpression$fiEH)this.blobValueExpression$fiEH=AS3.getBindable(config,"bindTo").extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,AS3.getBindable(config,"propertyName"));return this.blobValueExpression$fiEH}
function getShowCropsValueExpression(){if(!this.showCropsValueExpression$fiEH)this.showCropsValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromValue(true);return this.showCropsValueExpression$fiEH}function getImageSettingsWritableValueExpression(config){var this$=this;if(!this.imageSettingsWritableValueExpression$fiEH)this.imageSettingsWritableValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var content=AS3.getBindable(config,
"bindTo").getValue();if(AS3.cast(com.coremedia.ui.data.impl.RemoteBeanImpl,content).checkOutdated())return undefined;return content.isCheckedOutByCurrentSession()&&!this$.readOnlyValueExpression$fiEH.getValue()});return this.imageSettingsWritableValueExpression$fiEH}function getImageSettingsValueExpression(config){if(!this.imageSettingsValueExpression$fiEH)this.imageSettingsValueExpression$fiEH=AS3.getBindable(config,"bindTo").extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,AS3.getBindable(config,
"imageSettingsPropertyName"));return this.imageSettingsValueExpression$fiEH}function getImageSettings(){return this.imageSettingsValueExpression$fiEH.getValue()}function onBlobChange(blobExpression){this.undoHistory.reset();if(!blobExpression.getValue())ImageEditorPropertyFieldBase.resetImage(this.imageEditorViewModel,this.variantsValueExpression$fiEH.getValue())}function getTabItems(config){var blob=this.getBlobValueExpression(config).getValue();if(!blob)return[];var variants=this.getVariantsValueExpression().getValue();
return variants.map(AS3.bind(this,"createTabItem"),this)}function updateVariantTabs(){var this$=this;var tabPanel=this.getVariantsTabPanel();var tabPanelItems=tabPanel.itemCollection;while(tabPanelItems.getCount()>1){var tab=AS3.cast(Ext.panel.Panel,tabPanelItems.get(1));tab.destroy()}var items=this.tabItemValueExpression$fiEH.getValue();tabPanel.add(items);tabPanel.getTabBar().queryBy(function(cmp){var extTab=AS3.as(cmp,com.coremedia.ui.components.ExtendedTab);if(extTab&&extTab.initialConfig.card.itemId!==
"overview")if(extTab.rendered)this$.highlightImageArea$fiEH(extTab);else this$.mon(extTab,"afterrender",function(){this$.highlightImageArea$fiEH(extTab)})})}function highlightImageArea(extTab){var this$=this;this.mon(extTab.getEl(),"mouseenter",function(){this$.addHoverClsToImageArea$fiEH(extTab)});this.mon(extTab.getEl(),"focus",function(){this$.addHoverClsToImageArea$fiEH(extTab)});this.mon(extTab.getEl(),"mouseleave",function(){this$.removeHoverClsFromImageArea$fiEH(extTab)});this.mon(extTab.getEl(),
"blur",function(){this$.removeHoverClsFromImageArea$fiEH(extTab)})}function addHoverClsToImageArea(extTab){this.getImageEditorStage$fiEH().getImageAreas().forEach(function(imageArea){if(AS3.getBindable(imageArea,"itemId","DUMMY")===extTab.initialConfig.card.itemId)imageArea.addHoverCls()})}function removeHoverClsFromImageArea(extTab){this.getImageEditorStage$fiEH().getImageAreas().forEach(function(imageArea){if(AS3.getBindable(imageArea,"itemId","DUMMY")===extTab.initialConfig.card.itemId)imageArea.removeHoverCls()})}
function setImageDimensions(dimensions){this.imageEditorViewModel.set(ImageEditorPropertyFieldBase.IMAGE_ORIGINAL_DIMENSIONS,dimensions.getValue())}function computeCommonTransformsImageDimensions(originalImageDimensionsValueExpression){var commonTransformations=this.getCommonTransformationsValueExpression().getValue();if(!commonTransformations)return undefined;return AS3.cast(com.coremedia.cms.studio.imageeditor.model.ImageDimensions,{width:commonTransformations.getWidth(),height:commonTransformations.getHeight()})}
function getVariantBoxedImageDimensionsValueExpressions(config){if(!this.variantBoxedImageDimensionsValueExpressions$fiEH)this.variantBoxedImageDimensionsValueExpressions$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeVariantBoxedImageDimensionsValueExpressions$fiEH"),this.getCommonTransformsImageDimensionsValueExpression(config),this.getVariantsValueExpression());return this.variantBoxedImageDimensionsValueExpressions$fiEH}function computeVariantBoxedImageDimensionsValueExpressions(imageDimensionsValueExpression,
variantsValueExpression){var result={};var variants=variantsValueExpression.getValue();if(variants===undefined)return undefined;for(var $1 in variants){var variant=variants[$1];result[variant.key]=this.createBoxedImageDimensionsValueExpression$fiEH(imageDimensionsValueExpression,variant)}return result}function createBoxedImageDimensionsValueExpression(imageDimensionsValueExpression,variant){var variantKey=variant.key;var enlargeValueExpression=this.createEnlargeValueExpression$fiEH(variantKey);return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(computeVariantBoxedImageDimensions$static,
imageDimensionsValueExpression,variant,enlargeValueExpression)}function createEnlargeValueExpression(variantKey){return com.coremedia.ui.data.ValueExpressionFactory.create(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP+variantKey,this.imageEditorViewModel)}function computeVariantBoxedImageDimensions$static(imageDimensionsValueExpression,variant,enlargeValueExpression){var imageDimensions=imageDimensionsValueExpression.getValue();if(!imageDimensions)return undefined;var enlarge=
enlargeValueExpression.getValue();if(!enlarge)return imageDimensions;var boxedImageDimensions=variant.calculateFittingImageDimensions(imageDimensions);if(!boxedImageDimensions)return undefined;return boxedImageDimensions}function getCommonTransformationsValueExpression(){if(!this.commonTransformationsValueExpression$fiEH)this.commonTransformationsValueExpression$fiEH=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeTransformations"));return this.commonTransformationsValueExpression$fiEH}
function computeTransformations(){var model=AS3.cast(com.coremedia.cms.studio.imageeditor.model.ImageTransformationModel,this.imageEditorViewModel.toObject());if(model.orientation===undefined||model.flipHorizontally===undefined||model.flipVertically===undefined||model.brightness===undefined||model.contrast===undefined||model.straighten===undefined)return undefined;var transformations=[];if(!isNaN(model.brightness)||!isNaN(model.contrast))transformations.push({b:{a:model.brightness,c:com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.calculateContrast(model.contrast)}});
var box=this.imageDimensionsValueExpression$fiEH.getValue();if(box===undefined)return undefined;var transformedWidth=box.width;var transformedHeight=box.height;if(model.straighten){var alpha=DEG_TO_RAD$static*model.straighten;var cos=Math.cos(alpha);var sin=Math.abs(Math.sin(alpha));var width;var height;if(box.width>box.height){width=box.height/(box.height/box.width*cos+sin);height=box.height/box.width*width;transformedHeight=Math.floor(height);transformedWidth=Math.min(Math.floor(width),Math.round(box.width/
box.height*transformedHeight))}else{height=box.width/(box.width/box.height*cos+sin);width=box.width/box.height*height;transformedWidth=Math.floor(width);transformedHeight=Math.min(Math.floor(height),Math.round(box.height/box.width*transformedWidth))}if(transformedWidth<2||transformedHeight<2){transformedWidth=Math.min(2,box.width);transformedHeight=Math.min(2,box.height);transformations.push({c:{x:Math.round(box.width/2),y:Math.round(box.height/2),width:transformedWidth,height:transformedHeight}})}else{var rotatedWidth=
box.width*cos+box.height*sin;var rotatedHeight=box.width*sin+box.height*cos;var x=Math.round((rotatedWidth-width)/2);var y=Math.round((rotatedHeight-height)/2);transformations.push({rotate:{angle:(model.straighten+360)%360}});transformations.push({c:{x:x,y:y,width:transformedWidth,height:transformedHeight}})}}var rotation=model.orientation;var perpendicular=rotation===90||rotation===270;var flip="";if(model.flipHorizontally)if(model.flipVertically)rotation+=180;else flip="h";else if(model.flipVertically)flip=
"v";if(flip)transformations.push({flip:{d:flip}});if(rotation)transformations.push({rotate:{angle:(rotation+360)%360}});var commonTransforms;if(perpendicular)commonTransforms=new com.coremedia.cms.studio.imageeditor.CommonTransformations(transformations,transformedHeight,transformedWidth);else commonTransforms=new com.coremedia.cms.studio.imageeditor.CommonTransformations(transformations,transformedWidth,transformedHeight);return commonTransforms}function createEnlargeAllCropsPressedValueExpression(){return com.coremedia.ui.data.ValueExpressionFactory.createFromValueHolder(new com.coremedia.cms.studio.imageeditor.EnlargeAllCropsValueHolder(this.getVariantsValueExpression(),
this.imageEditorViewModel))}function createLocalImageUriValueExpression(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeLocalImageUri$fiEH"),AS3.getBindable(config,"bindTo").extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,AS3.getBindable(config,"propertyName"),"uri"))}function computeLocalImageUri(imageBlobUriValueExpression){var imageUri=imageBlobUriValueExpression.getValue();var transformations=this.getCommonTransformationsValueExpression().getValue();
if(!imageUri||!transformations)return undefined;return imageUri+"/rm/"+com.coremedia.cms.studio.imageeditor.util.TransformationChain.serialize(transformations.getTransformations())}function transformFocusArea$static(storedValue){var storedObject;var storedStruct=AS3.as(storedValue,com.coremedia.ui.data.Bean);if(storedStruct)storedObject=storedStruct.toObject();else storedObject=AS3.as(storedValue,Object);return!storedObject?com.coremedia.cms.studio.imageeditor.model.Rectangle.getUnitSquare():com.coremedia.cms.studio.imageeditor.util.ConversionUtil.x1y1x2y2ToRectangle(storedObject)}
function transformFocusPointStruct(structValue){var bean=AS3.as(structValue,com.coremedia.ui.data.Bean);var storedObject=bean?bean.toObject():AS3.as(structValue,Object);var imageEditorStage=this.getImageEditorStage$fiEH();var focusPointImageArea;var focusPointRadius;var adjustedImageBounds;if(imageEditorStage&&imageEditorStage.getFocusPointImageArea()){focusPointImageArea=imageEditorStage.getFocusPointImageArea();focusPointRadius=focusPointImageArea.getRadius();adjustedImageBounds=focusPointImageArea.getAdjustedImageBounds()}var focusPoint=
com.coremedia.cms.studio.imageeditor.util.ConversionUtil.xyToPoint(storedObject,com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getDefaultPoint());return!storedObject||!adjustedImageBounds||com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.isDefaultPoint(focusPoint)||!focusPointRadius?com.coremedia.cms.studio.imageeditor.model.Rectangle.getUnitSquare():com.coremedia.cms.studio.imageeditor.util.ConversionUtil.getBoundingBoxForCenter(focusPoint,focusPointRadius,adjustedImageBounds)}
function focusAreaViewModelChanged(event){var viewModelFocusArea=event.newValue;if(!(viewModelFocusArea&&viewModelFocusArea.width&&viewModelFocusArea.height))return;var focusAreaStructValueExpression=this.imageSettingsValueExpression$fiEH.extendBy("focusArea");var focusAreaStruct=AS3.as(focusAreaStructValueExpression.getValue(),com.coremedia.cap.struct.Struct);if(com.coremedia.ui.util.ObjectUtils.compareObjectsWithEqual(viewModelFocusArea,ImageEditorPropertyFieldBase.transformFocusArea(focusAreaStruct)))return;
focusAreaStructValueExpression.extendBy("x1").setValue(String(viewModelFocusArea.x));focusAreaStructValueExpression.extendBy("y1").setValue(String(viewModelFocusArea.y));focusAreaStructValueExpression.extendBy("x2").setValue(String(viewModelFocusArea.x+viewModelFocusArea.width));focusAreaStructValueExpression.extendBy("y2").setValue(String(viewModelFocusArea.y+viewModelFocusArea.height))}function focusPointViewModelChanged(event){var viewModelFocuspointRectangle=event.newValue;if(!(viewModelFocuspointRectangle&&
viewModelFocuspointRectangle.width&&viewModelFocuspointRectangle.height))return;var focusPointStructValueExpression=this.imageSettingsValueExpression$fiEH.extendBy(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_POINT);var focusPointStruct=AS3.as(focusPointStructValueExpression.getValue(),com.coremedia.cap.struct.Struct);if(com.coremedia.ui.util.ObjectUtils.compareObjectsWithEqual(viewModelFocuspointRectangle,this.transformFocusPointStruct(focusPointStruct)))return;if(viewModelFocuspointRectangle.isUnitSquare()){var defaultPoint=
com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getDefaultPoint();focusPointStructValueExpression.extendBy("x").setValue(String(defaultPoint.x));focusPointStructValueExpression.extendBy("y").setValue(String(defaultPoint.y))}else{var focusPointImageArea=this.getImageEditorStage$fiEH().getFocusPointImageArea();var focusPoint=com.coremedia.cms.studio.imageeditor.util.ConversionUtil.getCenterOfRectangle(viewModelFocuspointRectangle,focusPointImageArea.getAdjustedImageBounds());focusPointStructValueExpression.extendBy("x").setValue(String(focusPoint.x));
focusPointStructValueExpression.extendBy("y").setValue(String(focusPoint.y))}}function isBlobEmpty$static(blob){if(!blob||blob.getSize()===undefined)return"empty";return"iestage"}function resetImage$static(viewModel,variants){viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_DISABLE_CROPPING,false);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_HORIZONTALLY,false);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_VERTICALLY,false);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_ORIENTATION,
0);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_STRAIGHTEN,0);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_BRIGHTNESS,0);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_CONTRAST,0);ImageEditorPropertyFieldBase.resetFocusAndCrops(viewModel,variants)}function resetFocusAndCrops$static(viewModel,variants){viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA,com.coremedia.cms.studio.imageeditor.model.Rectangle.getUnitSquare());viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_POINT,
com.coremedia.cms.studio.imageeditor.model.Rectangle.getUnitSquare());for(var $1=0;$1<variants.length;++$1){var variant=variants[$1];viewModel.set(variant.key,null);viewModel.set(ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP+variant.key,false)}}return{extend:"Ext.panel.Panel",imageSettingsValueExpression$fiEH:null,imageDimensionsValueExpression$fiEH:null,commonTransformsImageDimensionsValueExpression$fiEH:null,commonTransformationsValueExpression$fiEH:null,imageEditorViewModel:null,
readOnlyValueExpression$fiEH:null,undoHistory:null,blobValueExpression$fiEH:null,showCropsValueExpression$fiEH:null,content$fiEH:null,disableExpression$fiEH:null,imageSettingsWritableValueExpression$fiEH:null,variantBoxedImageDimensionsValueExpressions$fiEH:null,propertyName$fiEH:null,variantsValueExpression$fiEH:null,tabItemValueExpression$fiEH:null,contentValueExpression$fiEH:null,contentPathValueExpression$fiEH:null,disableStatusExpression$fiEH:null,constructor:ImageEditorPropertyFieldBase$,super$fiEH:function(){Ext.panel.Panel.prototype.constructor.apply(this,
arguments)},contentChanged$fiEH:contentChanged,setVariants$fiEH:setVariants,getVariantsValueExpression:getVariantsValueExpression,getVariantsTabPanel:getVariantsTabPanel,getImageEditorStage$fiEH:getImageEditorStage,onCheckIn:onCheckIn,checkCropsEnabling$fiEH:checkCropsEnabling,createTabItem:createTabItem,getVariantBoxedImageDimensionsValueExpression$fiEH:getVariantBoxedImageDimensionsValueExpression,createReadOnlyValueExpression:createReadOnlyValueExpression,getDisableExpression:getDisableExpression,
getDisableStatusExpression:getDisableStatusExpression,onDestroy:onDestroy,getImageDimensionsValueExpression$fiEH:getImageDimensionsValueExpression,getCommonTransformsImageDimensionsValueExpression:getCommonTransformsImageDimensionsValueExpression,getBlobValueExpression:getBlobValueExpression,getShowCropsValueExpression:getShowCropsValueExpression,getImageSettingsWritableValueExpression:getImageSettingsWritableValueExpression,getImageSettingsValueExpression:getImageSettingsValueExpression,getImageSettings:getImageSettings,
onBlobChange$fiEH:onBlobChange,getTabItems$fiEH:getTabItems,updateVariantTabs$fiEH:updateVariantTabs,highlightImageArea$fiEH:highlightImageArea,addHoverClsToImageArea$fiEH:addHoverClsToImageArea,removeHoverClsFromImageArea$fiEH:removeHoverClsFromImageArea,setImageDimensions$fiEH:setImageDimensions,computeCommonTransformsImageDimensions$fiEH:computeCommonTransformsImageDimensions,getVariantBoxedImageDimensionsValueExpressions:getVariantBoxedImageDimensionsValueExpressions,computeVariantBoxedImageDimensionsValueExpressions$fiEH:computeVariantBoxedImageDimensionsValueExpressions,
createBoxedImageDimensionsValueExpression$fiEH:createBoxedImageDimensionsValueExpression,createEnlargeValueExpression$fiEH:createEnlargeValueExpression,getCommonTransformationsValueExpression:getCommonTransformationsValueExpression,computeTransformations:computeTransformations,createEnlargeAllCropsPressedValueExpression:createEnlargeAllCropsPressedValueExpression,createLocalImageUriValueExpression:createLocalImageUriValueExpression,computeLocalImageUri$fiEH:computeLocalImageUri,transformFocusPointStruct:transformFocusPointStruct,
focusAreaViewModelChanged$fiEH:focusAreaViewModelChanged,focusPointViewModelChanged$fiEH:focusPointViewModelChanged,statics:{DEG_TO_RAD:undefined,CONTENTTYPE_PROPERTIES:undefined,VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP:"enlarge-",VIEW_MODEL_PROPERTY_FOCUS_AREA:"focusArea",VIEW_MODEL_PROPERTY_FOCUS_POINT:"focusPoint",VIEW_MODEL_PROPERTY_DISABLE_CROPPING:"checkCropsEnabling",VIEW_MODEL_PROPERTY_FLIP_HORIZONTALLY:"flipHorizontally",VIEW_MODEL_PROPERTY_FLIP_VERTICALLY:"flipVertically",VIEW_MODEL_PROPERTY_ORIENTATION:"orientation",
VIEW_MODEL_PROPERTY_STRAIGHTEN:"straighten",VIEW_MODEL_PROPERTY_BRIGHTNESS:"brightness",VIEW_MODEL_PROPERTY_CONTRAST:"contrast",IMAGE_ORIGINAL_DIMENSIONS:"image_original_dimensions",transformFocusArea:transformFocusArea$static,isBlobEmpty:isBlobEmpty$static,resetImage:resetImage$static,resetFocusAndCrops:resetFocusAndCrops$static,__initStatics__:function(){DEG_TO_RAD$static_();CONTENTTYPE_PROPERTIES$static_()}},requires:["Ext.String","Ext.panel.Panel","Ext.tab.Panel","com.coremedia.cap.content.ContentPropertyNames",
"com.coremedia.cap.struct.Struct","com.coremedia.cms.editor.ContentTypes_properties","com.coremedia.cms.editor.sdk.util.PropertyEditorUtil","com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.ui.actions.DependencyTrackedActionBase","com.coremedia.ui.components.ExtendedTab","com.coremedia.ui.data.Bean","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.RemoteServiceMethod","com.coremedia.ui.logging.Logger",
"com.coremedia.ui.util.ObjectUtils","mx.resources.ResourceManager"],uses:["com.coremedia.cms.studio.imageeditor.ColorTransformationUtil","com.coremedia.cms.studio.imageeditor.CommonTransformations","com.coremedia.cms.studio.imageeditor.EnlargeAllCropsValueHolder","com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField","com.coremedia.cms.studio.imageeditor.ImageEditorStage","com.coremedia.cms.studio.imageeditor.ImageVariant","com.coremedia.cms.studio.imageeditor.VariantKeyUtil","com.coremedia.cms.studio.imageeditor.VariantTab",
"com.coremedia.cms.studio.imageeditor.model.ImageDimensions","com.coremedia.cms.studio.imageeditor.model.ImageTransformationModel","com.coremedia.cms.studio.imageeditor.model.Rectangle","com.coremedia.cms.studio.imageeditor.util.ConversionUtil","com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil","com.coremedia.cms.studio.imageeditor.util.TransformationChain"]}});Ext.define("com.coremedia.cms.studio.imageeditor.VariantKeyUtil",function(VariantKeyUtil){var RESOURCE_MANAGER$static;function RESOURCE_MANAGER$static_(){RESOURCE_MANAGER$static=mx.resources.ResourceManager.getInstance()}var VALID_ID_REGEXP$static=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i;var STARTS_WITH_LETTER_OR_UNDERSCORE_REGEXP$static=/^[a-zA-Z_]/;var INVALID_ID_CHAR_REGEXP$static=/[^A-Za-z0-9_]/g;var REPLACEMENT_CHAR$static="-";var keyToitemId$static;function keyToitemId$static_(){keyToitemId$static={}}
var itemIdToKey$static;function itemIdToKey$static_(){itemIdToKey$static={}}var nItemIds$static=0;function VariantKeyUtil$(){throw new AS3.Error("utility class");}function variantKeyToItemId$static(key){if(!key)return key;var itemId=keyToitemId$static[key];if(!itemId){itemId=encode$static(key);keyToitemId$static[key]=itemId;itemIdToKey$static[itemId]=key}return itemId}function encode$static(s){if(!STARTS_WITH_LETTER_OR_UNDERSCORE_REGEXP$static.test(s))s="_"+s;if(VALID_ID_REGEXP$static.test(s))return s;
return s.replace(INVALID_ID_CHAR_REGEXP$static,REPLACEMENT_CHAR$static)+"_"+nItemIds$static++}function itemIdToVariantKey$static(itemId){if(!itemId)return itemId;return itemIdToKey$static[itemId]}function getVariantDisplayName$static(variantKey){return RESOURCE_MANAGER$static.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_variants_"+variantKey)||variantKey}return{constructor:VariantKeyUtil$,statics:{RESOURCE_MANAGER:undefined,keyToitemId:undefined,itemIdToKey:undefined,variantKeyToItemId:variantKeyToItemId$static,
itemIdToVariantKey:itemIdToVariantKey$static,getVariantDisplayName:getVariantDisplayName$static,__initStatics__:function(){RESOURCE_MANAGER$static_();keyToitemId$static_();itemIdToKey$static_()}},requires:["AS3.Error","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ColorTransformationMenuButton",function(ColorTransformationMenuButton){function __initialize__(config){this.BUNDLE$p3jw=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function ColorTransformationMenuButton$(config){if(arguments.length<=0)config=null;this.__initialize__$p3jw(config);var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.MenuButtonBase,{});var defaults_$1=AS3.cast(ColorTransformationMenuButton,
{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_action_color_iconCls));config_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_label_color);AS3.setBindable(config_$1,"tooltip",this.BUNDLE$p3jw.IEC_label_color);var menu_34_5_$1=AS3.cast(Ext.menu.Menu,{});menu_34_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.MenuSkin.GRID_100.getSkin());menu_34_5_$1.plain=true;var container_37_9_$1=
AS3.cast(Ext.container.Container,{});container_37_9_$1.itemId="color-manipulation";AS3.setBindable(container_37_9_$1,"width",320);var container_40_13_$1=AS3.cast(Ext.container.Container,{});var displayField_42_17_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_42_17_$1,"value",this.BUNDLE$p3jw.IEC_label_brightness);var ie_ImageTransformationSlider_43_17_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageTransformationSlider,{});AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,
"disabledValueExpression",AS3.getBindable(config,"disabledValueExpression"));ie_ImageTransformationSlider_43_17_$1.itemId="brightness";AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"propertyName","brightness");AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"commandDescription",net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_history_color_brightness));AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,
"resetCommandDescription",net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_history_color_reset_brightness));AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"minValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.BRIGHTNESS_MIN);AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"maxValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.BRIGHTNESS_MAX);AS3.setBindable(ie_ImageTransformationSlider_43_17_$1,"defaultValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.BRIGHTNESS_DEFAULT);
container_40_13_$1.items=[displayField_42_17_$1,ie_ImageTransformationSlider_43_17_$1];var container_55_13_$1=AS3.cast(Ext.container.Container,{});var displayField_57_17_$1=AS3.cast(Ext.form.field.Display,{});AS3.setBindable(displayField_57_17_$1,"value",this.BUNDLE$p3jw.IEC_label_contrast);var ie_ImageTransformationSlider_58_17_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageTransformationSlider,{});AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"disabledValueExpression",AS3.getBindable(config,
"disabledValueExpression"));ie_ImageTransformationSlider_58_17_$1.itemId="contrast";AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"propertyName","contrast");AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"commandDescription",net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_history_color_contrast));AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"resetCommandDescription",
net.jangaroo.ext.Exml.asString(this.BUNDLE$p3jw.IEC_history_color_reset_contrast));AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"minValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.CONTRAST_MIN);AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"maxValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.CONTRAST_MAX);AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"defaultValue",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.CONTRAST_DEFAULT);
AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"decimalPrecision",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.CONTRAST_DECIMAL_PRECISION);AS3.setBindable(ie_ImageTransformationSlider_58_17_$1,"increment",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.CONTRAST_INCREMENT);container_55_13_$1.items=[displayField_57_17_$1,ie_ImageTransformationSlider_58_17_$1];container_37_9_$1.items=[container_40_13_$1,container_55_13_$1];var layout_VBox_74_13_$1=AS3.cast(Ext.layout.container.VBox,
{});AS3.setBindable(layout_VBox_74_13_$1,"align","stretch");AS3.setBindable(container_37_9_$1,"layout",layout_VBox_74_13_$1);var ui_VerticalSpacingPlugin_77_13_$1=AS3.cast(com.coremedia.ui.plugins.VerticalSpacingPlugin,{});AS3.setBindable(ui_VerticalSpacingPlugin_77_13_$1,"modifier",com.coremedia.ui.bem.SpacingBEMEntities.VERTICAL_SPACING_MODIFIER_200);container_37_9_$1.plugins=[ui_VerticalSpacingPlugin_77_13_$1];menu_34_5_$1.items=[container_37_9_$1];var layout_VBox_82_9_$1=AS3.cast(Ext.layout.container.VBox,
{});AS3.setBindable(layout_VBox_82_9_$1,"align","stretch");AS3.setBindable(menu_34_5_$1,"layout",layout_VBox_82_9_$1);config_$1.menu=menu_34_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$p3jw(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.MenuButtonBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.colorTransformationMenuButton",BUNDLE$p3jw:null,__initialize__$p3jw:__initialize__,constructor:ColorTransformationMenuButton$,super$p3jw:function(){com.coremedia.cms.studio.imageeditor.MenuButtonBase.prototype.constructor.apply(this,
arguments)},config:{undoHistory:null},requires:["Ext.container.Container","Ext.form.field.Display","Ext.layout.container.VBox","Ext.menu.Menu","com.coremedia.cms.studio.imageeditor.MenuButtonBase","com.coremedia.ui.bem.SpacingBEMEntities","com.coremedia.ui.plugins.VerticalSpacingPlugin","com.coremedia.ui.skins.MenuSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.ColorTransformationUtil","com.coremedia.cms.studio.imageeditor.ImageTransformationSlider"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase",function(ImageTransformationSliderBase){function ImageTransformationSliderBase$(config){if(arguments.length<=0)config=null;this.super$huDJ(config)}function getSliderValueExpression$static(config){var delegate=AS3.getBindable(config,"undoHistory").createStateSavingViewModelValueExpression(AS3.getBindable(config,"propertyName"),AS3.getBindable(config,"commandDescription"));if(AS3.getBindable(config,"propertyName")!=="straighten")return delegate;
var transform=function(value){var imageEditorViewModel=AS3.getBindable(config,"imageEditorViewModel");var flipHorizontally=!!imageEditorViewModel.get("flipHorizontally");var flipVertically=!!imageEditorViewModel.get("flipVertically");if(flipHorizontally!==flipVertically)value=-value;return value};return com.coremedia.ui.data.ValueExpressionFactory.createTransformingValueExpression(delegate,transform,transform)}return{extend:"Ext.container.Container",constructor:ImageTransformationSliderBase$,super$huDJ:function(){Ext.container.Container.prototype.constructor.apply(this,
arguments)},statics:{getSliderValueExpression:getSliderValueExpression$static},requires:["Ext.container.Container","com.coremedia.ui.data.ValueExpressionFactory"]}});Ext.define("com.coremedia.cms.studio.imageeditor.FocusAreaImageAreaBase",function(FocusAreaImageAreaBase){function FocusAreaImageAreaBase$(config){if(arguments.length<=0)config=null;this.super$KqJt(config)}function addChangeListener(listener){this.getFocusAreaValueExpression().addChangeListener(listener)}function getBoundsValueExpression(config){if(arguments.length<=0)config=null;return this.getFocusAreaValueExpression(config)}function getFocusAreaValueExpression(config){if(arguments.length<=0)config=
null;if(!this.focusAreaValueExpression$KqJt)this.focusAreaValueExpression$KqJt=com.coremedia.ui.data.ValueExpressionFactory.create("focusArea",(config||this).imageEditorViewModel);return this.focusAreaValueExpression$KqJt}function getLeftX(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(this.getPercentageRectangle(),this.getAdjustedImageBounds())}function getCenterX(){return this.getLeftX()+this.getMyWidth()/2}function getCenterY(){return this.getUpperY()+this.getMyHeight()/
2}function getMyWidth(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getWidth(this.getPercentageRectangle(),this.getAdjustedImageBounds())}function getRightX(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getValueOfRightX(this.getPercentageRectangle(),this.getAdjustedImageBounds())}function getUpperY(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(this.getPercentageRectangle(),this.getAdjustedImageBounds())}function getMyHeight(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getHeight(this.getPercentageRectangle(),
this.getAdjustedImageBounds())}function getLowerY(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getLowerY(this.getPercentageRectangle(),this.getAdjustedImageBounds())}return{extend:"com.coremedia.cms.studio.imageeditor.ImageArea",focusAreaValueExpression$KqJt:null,constructor:FocusAreaImageAreaBase$,super$KqJt:function(){com.coremedia.cms.studio.imageeditor.ImageArea.prototype.constructor.apply(this,arguments)},addChangeListener:addChangeListener,getBoundsValueExpression:getBoundsValueExpression,
getFocusAreaValueExpression:getFocusAreaValueExpression,getLeftX:getLeftX,getCenterX:getCenterX,getCenterY:getCenterY,getMyWidth:getMyWidth,getRightX:getRightX,getUpperY:getUpperY,getMyHeight:getMyHeight,getLowerY:getLowerY,requires:["com.coremedia.cms.studio.imageeditor.ImageArea","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ResetImageMenuButtonBase",function(ResetImageMenuButtonBase){function ResetImageMenuButtonBase$(config){if(arguments.length<=0)config=null;this.super$fngH(config);this.variantsValueExpression$fngH=AS3.getBindable(config,"variantsValueExpression")}function computeResetFocusStatus(readOnlyValueExpression,imageEditorViewModel){var readOnly=readOnlyValueExpression.getValue();if(readOnly!==false)return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED;
if(!imageEditorViewModel)return undefined;var focusAreaRectangle=imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_AREA);var focusPointRectangle=imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FOCUS_POINT);if(!focusAreaRectangle||!focusPointRectangle)return undefined;if(!focusAreaRectangle.isUnitSquare()||!focusPointRectangle.isUnitSquare())return com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED;
var variants=this.variantsValueExpression$fngH.getValue();if(variants===undefined)return undefined;for(var $1=0;$1<variants.length;++$1){var v=variants[$1];var changed=imageEditorViewModel.get(v.key);if(changed)return com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED}return com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED}function computeResetImageStatus(readOnlyValueExpression,imageEditorViewModel){var resetFocusStatus=this.computeResetFocusStatus(readOnlyValueExpression,
imageEditorViewModel);if(resetFocusStatus&&resetFocusStatus===com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED)return resetFocusStatus;if(imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_HORIZONTALLY)===undefined||imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_VERTICALLY)===undefined||imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_ORIENTATION)===
undefined||imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_STRAIGHTEN)===undefined||imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_BRIGHTNESS)===undefined||imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_CONTRAST)===undefined)return undefined;var disabled=imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_HORIZONTALLY)===
false;disabled=disabled&&imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_FLIP_VERTICALLY)===false;disabled=disabled&&imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_ORIENTATION)===0;disabled=disabled&&imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_STRAIGHTEN)===0;disabled=disabled&&imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_BRIGHTNESS)===
0;disabled=disabled&&imageEditorViewModel.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_CONTRAST)===0;return disabled?com.coremedia.ui.actions.DependencyTrackedActionBase.DISABLED:com.coremedia.ui.actions.DependencyTrackedActionBase.ENABLED}function resetImage(imageEditorViewModel){com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.resetImage(imageEditorViewModel,this.variantsValueExpression$fngH.getValue())}function resetFocusAreaAndCrops(imageEditorViewModel){com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.resetFocusAndCrops(imageEditorViewModel,
this.variantsValueExpression$fngH.getValue())}return{extend:"com.coremedia.cms.studio.imageeditor.MenuButtonBase",variantsValueExpression$fngH:null,constructor:ResetImageMenuButtonBase$,super$fngH:function(){com.coremedia.cms.studio.imageeditor.MenuButtonBase.prototype.constructor.apply(this,arguments)},computeResetFocusStatus:computeResetFocusStatus,computeResetImageStatus:computeResetImageStatus,resetImage:resetImage,resetFocusAreaAndCrops:resetFocusAreaAndCrops,config:{imageEditorViewModel:null},
requires:["com.coremedia.cms.studio.imageeditor.MenuButtonBase","com.coremedia.ui.actions.DependencyTrackedActionBase"],uses:["com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageEditorStage",function(ImageEditorStage){function ImageEditorStage$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase,{});var defaults_$1=AS3.cast(ImageEditorStage,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1["focusable"]=true;config_$1.tabIndex=0;var layout_AutoContainer_34_5_$1=AS3.cast(Ext.layout.container.Auto,{});AS3.setBindable(config_$1,"layout",
layout_AutoContainer_34_5_$1);var ui_Binding_37_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_37_5_$1,"destination",this.getBackgroundColorExpression(AS3.getBindable(config,"imageEditorViewModel")));AS3.setBindable(ui_Binding_37_5_$1,"ifUndefined","FFFFFFFF");AS3.setBindable(ui_Binding_37_5_$1,"source","imageSettings.coloring.background");AS3.setBindable(ui_Binding_37_5_$1,"twoWay",true);config_$1.plugins=[ui_Binding_37_5_$1];var container_43_5_$1=AS3.cast(Ext.container.Container,
{});container_43_5_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.ITEM_ID_STAGE_INNER_CT);container_43_5_$1.cls=net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK);var ui_BindStyleClassPlugin_46_9_$1=AS3.cast(com.coremedia.ui.plugins.BindStyleClassPlugin,{});AS3.setBindable(ui_BindStyleClassPlugin_46_9_$1,"cls",net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.IMAGE_EDITOR_STAGE_BLOCK_SHOW_CROPS_MODIFIER));
ui_BindStyleClassPlugin_46_9_$1.bindTo=this.createShowAllCropsValueExpression(AS3.getBindable(config,"showCropsValueExpression"));container_43_5_$1.plugins=[ui_BindStyleClassPlugin_46_9_$1];var ie_ImageArea_50_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageArea,{});AS3.setBindable(ie_ImageArea_50_9_$1,"imageEditorViewModel",AS3.getBindable(config,"imageEditorViewModel"));AS3.setBindable(ie_ImageArea_50_9_$1,"readOnlyValueExpression",AS3.getBindable(config,"readOnlyValueExpression"));AS3.setBindable(ie_ImageArea_50_9_$1,
"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_ImageArea_50_9_$1,"imageSettingsValueExpression",AS3.getBindable(config,"imageSettingsValueExpression"));AS3.setBindable(ie_ImageArea_50_9_$1,"imageDimensionsValueExpression",AS3.getBindable(config,"imageDimensionsValueExpression"));AS3.setBindable(ie_ImageArea_50_9_$1,"boxedImageDimensionsValueExpression",this.getBoxedImageDimensionsValueExpression(AS3.getBindable(config,"imageDimensionsValueExpression")));AS3.setBindable(ie_ImageArea_50_9_$1,
"commonTransformationsValueExpression",AS3.getBindable(config,"commonTransformationsValueExpression"));AS3.setBindable(ie_ImageArea_50_9_$1,"variantsValueExpression",AS3.getBindable(config,"variantsValueExpression"));AS3.setBindable(ie_ImageArea_50_9_$1,"imageEditorStageBoundsValueExpression",this.createImageEditorStageBoundsValueExpression());AS3.setBindable(ie_ImageArea_50_9_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(ie_ImageArea_50_9_$1,
"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(ie_ImageArea_50_9_$1,"hideIssues",AS3.getBindable(config,"hideIssues"));container_43_5_$1["defaultType"]=ie_ImageArea_50_9_$1["xtype"];delete ie_ImageArea_50_9_$1["xtype"];delete ie_ImageArea_50_9_$1["xclass"];container_43_5_$1.defaults=ie_ImageArea_50_9_$1;var ui_Image_64_9_$1=AS3.cast(com.coremedia.ui.components.Image,{});ui_Image_64_9_$1.itemId="image";ui_Image_64_9_$1.cls=net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.IMAGE_EDITOR_STAGE_IMAGE);
var ui_BindPropertyPlugin_67_13_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_67_13_$1.componentProperty="src";ui_BindPropertyPlugin_67_13_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeLocalImageUri"));ui_Image_64_9_$1.plugins=[ui_BindPropertyPlugin_67_13_$1];var ie_FocusAreaImageArea_71_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.FocusAreaImageArea,{});ie_FocusAreaImageArea_71_9_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.ITEM_ID_FOCUS_AREA);
AS3.setBindable(ie_FocusAreaImageArea_71_9_$1,"name",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_focusArea_imageArea_name")));var ie_FocusPointImageArea_73_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.FocusPointImageArea,{});ie_FocusPointImageArea_73_9_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.ITEM_ID_FOCUS_POINT);container_43_5_$1.items=[ui_Image_64_9_$1,ie_FocusAreaImageArea_71_9_$1,
ie_FocusPointImageArea_73_9_$1];config_$1.items=[container_43_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$MDPv(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.ImageEditorStageBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.imageEditorStage",constructor:ImageEditorStage$,super$MDPv:function(){com.coremedia.cms.studio.imageeditor.ImageEditorStageBase.prototype.constructor.apply(this,arguments)},config:{showCropsValueExpression:null,bindTo:null,propertyName:null,
hideIssues:false},statics:{ITEM_ID:"iestage"},requires:["Ext.container.Container","Ext.layout.container.Auto","com.coremedia.cms.studio.imageeditor.ImageEditorStageBase","com.coremedia.ui.components.Image","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.plugins.BindStyleClassPlugin","com.coremedia.ui.plugins.Binding","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.FocusAreaImageArea","com.coremedia.cms.studio.imageeditor.FocusPointImageArea",
"com.coremedia.cms.studio.imageeditor.ImageArea"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageTransformationSlider",function(ImageTransformationSlider){function ImageTransformationSlider$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase,{});var defaults_$1=AS3.cast(ImageTransformationSlider,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var sliderField_48_5_$1=AS3.cast(Ext.slider.Single,{});sliderField_48_5_$1.itemId="slider";AS3.setBindable(sliderField_48_5_$1,
"width",201);AS3.setBindable(sliderField_48_5_$1,"minValue",AS3.getBindable(config,"minValue"));AS3.setBindable(sliderField_48_5_$1,"maxValue",AS3.getBindable(config,"maxValue"));sliderField_48_5_$1.decimalPrecision=AS3.getBindable(config,"decimalPrecision")||0;sliderField_48_5_$1.increment=AS3.getBindable(config,"increment")||1;var ui_BindPropertyPlugin_55_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_55_9_$1.bindTo=com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase.getSliderValueExpression(config);
ui_BindPropertyPlugin_55_9_$1.componentEvent="changecomplete";ui_BindPropertyPlugin_55_9_$1.bidirectional=true;ui_BindPropertyPlugin_55_9_$1.ifUndefined=0;var ui_BindPropertyPlugin_60_9_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_60_9_$1.bindTo=AS3.getBindable(config,"disabledValueExpression");ui_BindPropertyPlugin_60_9_$1.componentProperty="disabled";var sliderTip_62_9_$1=AS3.cast(Ext.slider.Tip,{});sliderField_48_5_$1.plugins=[ui_BindPropertyPlugin_55_9_$1,
ui_BindPropertyPlugin_60_9_$1,sliderTip_62_9_$1];var component_65_5_$1=AS3.cast(Ext.Component,{});component_65_5_$1.flex=1;var button_66_5_$1=AS3.cast(Ext.button.Button,{});button_66_5_$1.itemId="reset";button_66_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE.getSkin());var ui_DependencyTrackedAction_69_9_$1=AS3.cast(com.coremedia.ui.actions.DependencyTrackedAction,{});AS3.setBindable(ui_DependencyTrackedAction_69_9_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor",
"IEC_label_reset")));AS3.setBindable(ui_DependencyTrackedAction_69_9_$1,"statusExpression",AS3.getBindable(config,"undoHistory").createResetStatusValueExpression(AS3.getBindable(config,"disabledValueExpression"),AS3.getBindable(config,"propertyName"),AS3.getBindable(config,"defaultValue")));AS3.setBindable(ui_DependencyTrackedAction_69_9_$1,"handler",AS3.getBindable(config,"undoHistory").createPropertyResetCommand(AS3.getBindable(config,"resetCommandDescription"),AS3.getBindable(config,"propertyName"),
AS3.getBindable(config,"defaultValue")));button_66_5_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedAction(ui_DependencyTrackedAction_69_9_$1);config_$1.items=[sliderField_48_5_$1,component_65_5_$1,button_66_5_$1];var layout_HBox_81_5_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_81_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_HBox_81_5_$1);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$5ubY(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase",
alias:"widget.com.coremedia.cms.studio.imageeditor.config.imageTransformationSlider",constructor:ImageTransformationSlider$,super$5ubY:function(){com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase.prototype.constructor.apply(this,arguments)},config:{disabledValueExpression:null,undoHistory:null,imageEditorViewModel:null,minValue:NaN,maxValue:NaN,defaultValue:NaN,decimalPrecision:0,increment:NaN,propertyName:null,commandDescription:null,resetCommandDescription:null},requires:["Ext.Component",
"Ext.button.Button","Ext.layout.container.HBox","Ext.slider.Single","Ext.slider.Tip","com.coremedia.cms.studio.imageeditor.ImageTransformationSliderBase","com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.VariantTab",function(VariantTab){function __initialize__(config){this.BUNDLE$BBnJ=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content}function VariantTab$(config){if(arguments.length<=0)config=null;this.__initialize__$BBnJ(config);var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.VariantTabBase,{});var defaults_$1=AS3.cast(VariantTab,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);
AS3.setBindable(config_$1,"title",this.BUNDLE$BBnJ["IEC_variants_"+com.coremedia.cms.studio.imageeditor.VariantKeyUtil.itemIdToVariantKey(AS3.getBindable(config,"itemId","DUMMY"))]||com.coremedia.cms.studio.imageeditor.VariantKeyUtil.itemIdToVariantKey(AS3.getBindable(config,"itemId","DUMMY")));var ui_ExtendedTab_59_5_$1=AS3.cast(com.coremedia.ui.components.ExtendedTab,{});var editor_ShowIssuesPlugin_61_9_$1=AS3.cast(com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin,{});editor_ShowIssuesPlugin_61_9_$1.bindTo=
AS3.getBindable(config,"bindTo");AS3.setBindable(editor_ShowIssuesPlugin_61_9_$1,"ifUndefined","");AS3.setBindable(editor_ShowIssuesPlugin_61_9_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")+(config.variant?"."+config.variant.key:"")));AS3.setBindable(editor_ShowIssuesPlugin_61_9_$1,"hideIssues",AS3.getBindable(config,"hideIssues"));ui_ExtendedTab_59_5_$1.plugins=[editor_ShowIssuesPlugin_61_9_$1];config_$1.tabConfig=ui_ExtendedTab_59_5_$1;var editor_PropertyFieldPlugin_70_5_$1=
AS3.cast(com.coremedia.cms.editor.sdk.premular.PropertyFieldPlugin,{});AS3.setBindable(editor_PropertyFieldPlugin_70_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")+(config.variant?"."+config.variant.key:"")));config_$1.plugins=[editor_PropertyFieldPlugin_70_5_$1];var toolbar_74_5_$1=AS3.cast(Ext.toolbar.Toolbar,{});toolbar_74_5_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ToolbarSkin.LIGHT.getSkin());var ie_UndoRedoButton_76_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.history.UndoRedoButton,
{});ie_UndoRedoButton_76_9_$1.itemId="undo";ie_UndoRedoButton_76_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.TOOLBAR.getSkin());AS3.setBindable(ie_UndoRedoButton_76_9_$1,"tooltip",this.BUNDLE$BBnJ.IEC_action_undo_toolTip);ie_UndoRedoButton_76_9_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_undo_toolTip);AS3.setBindable(ie_UndoRedoButton_76_9_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_UndoRedoButton_76_9_$1,"isRedo",
false);AS3.setBindable(ie_UndoRedoButton_76_9_$1,"disableValueExpression",config.disableValueExpression);var ie_UndoRedoButton_83_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.history.UndoRedoButton,{});ie_UndoRedoButton_83_9_$1.itemId="redo";ie_UndoRedoButton_83_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.TOOLBAR.getSkin());AS3.setBindable(ie_UndoRedoButton_83_9_$1,"tooltip",this.BUNDLE$BBnJ.IEC_action_redo_toolTip);ie_UndoRedoButton_83_9_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_redo_toolTip);
AS3.setBindable(ie_UndoRedoButton_83_9_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));AS3.setBindable(ie_UndoRedoButton_83_9_$1,"isRedo",true);AS3.setBindable(ie_UndoRedoButton_83_9_$1,"disableValueExpression",config.disableValueExpression);var ui_IconButton_91_9_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_91_9_$1.itemId="resetCrop";ui_IconButton_91_9_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_resetvariant_toolTip);var ui_DependencyTrackedAction_93_13_$1=
AS3.cast(com.coremedia.ui.actions.DependencyTrackedAction,{});AS3.setBindable(ui_DependencyTrackedAction_93_13_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_resetvariant_iconCls));ui_DependencyTrackedAction_93_13_$1["tooltip"]=this.BUNDLE$BBnJ.IEC_action_resetvariant_toolTip;AS3.setBindable(ui_DependencyTrackedAction_93_13_$1,"statusExpression",AS3.getBindable(config,"undoHistory").createResetStatusValueExpression(AS3.getBindable(config,"readOnlyValueExpression"),AS3.getBindable(config,
"variantKey"),null));AS3.setBindable(ui_DependencyTrackedAction_93_13_$1,"handler",AS3.getBindable(config,"undoHistory").createPropertyResetCommand(this.getUndoText(AS3.getBindable(config,"variantKey")),AS3.getBindable(config,"variantKey"),null));ui_IconButton_91_9_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedAction(ui_DependencyTrackedAction_93_13_$1);var ui_IconButton_101_9_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_101_9_$1.itemId="enlarge";ui_IconButton_101_9_$1.ariaLabel=
net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_enlarge_crop_off_toolTip);AS3.setBindable(ui_IconButton_101_9_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_enlarge_crop_iconCls));ui_IconButton_101_9_$1.enableToggle=true;var ie_EnlargeAction_106_13_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.EnlargeAction,{});ie_EnlargeAction_106_13_$1["tooltip"]=this.BUNDLE$BBnJ.IEC_action_enlarge_crop_off_toolTip;AS3.setBindable(ie_EnlargeAction_106_13_$1,"tooltipPressed",
net.jangaroo.ext.Exml.asString(this.BUNDLE$BBnJ.IEC_action_enlarge_crop_on_toolTip));AS3.setBindable(ie_EnlargeAction_106_13_$1,"pressedValueExpression",config.enlargeValueExpression);AS3.setBindable(ie_EnlargeAction_106_13_$1,"variant",config.variant);AS3.setBindable(ie_EnlargeAction_106_13_$1,"statusExpression",this.createEnlargeStatusExpression(config));AS3.setBindable(ie_EnlargeAction_106_13_$1,"imageDimensionsValueExpression",config.imageDimensionsValueExpression);AS3.setBindable(ie_EnlargeAction_106_13_$1,
"variantBoxedImageDimensionsValueExpression",config.boxedImageDimensionsValueExpression);AS3.setBindable(ie_EnlargeAction_106_13_$1,"imageEditorViewModel",config.imageEditorViewModel);AS3.setBindable(ie_EnlargeAction_106_13_$1,"undoHistory",AS3.getBindable(config,"undoHistory"));ui_IconButton_101_9_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.EnlargeAction(ie_EnlargeAction_106_13_$1);toolbar_74_5_$1.items=[ie_UndoRedoButton_76_9_$1,ie_UndoRedoButton_83_9_$1,ui_IconButton_91_9_$1,
ui_IconButton_101_9_$1];config_$1.tbar=toolbar_74_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$BBnJ(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.VariantTabBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.variantTab",BUNDLE$BBnJ:null,__initialize__$BBnJ:__initialize__,constructor:VariantTab$,super$BBnJ:function(){com.coremedia.cms.studio.imageeditor.VariantTabBase.prototype.constructor.apply(this,arguments)},disableValueExpression:null,enlargeValueExpression:null,
imageDimensionsValueExpression:null,boxedImageDimensionsValueExpression:null,imageEditorViewModel:null,variant:null,config:{readOnlyValueExpression:null,undoHistory:null,bindTo:null,propertyName:null,variantKey:null,hideIssues:false},requires:["Ext.toolbar.Toolbar","com.coremedia.cms.editor.sdk.premular.PropertyFieldPlugin","com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin","com.coremedia.cms.studio.imageeditor.VariantTabBase","com.coremedia.ui.actions.DependencyTrackedAction","com.coremedia.ui.components.ExtendedTab",
"com.coremedia.ui.components.IconButton","com.coremedia.ui.skins.ButtonSkin","com.coremedia.ui.skins.ToolbarSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.VariantKeyUtil","com.coremedia.cms.studio.imageeditor.actions.EnlargeAction","com.coremedia.cms.studio.imageeditor.history.UndoRedoButton"]}});Ext.define("com.coremedia.cms.studio.imageeditor.EnlargeAllCropsValueHolder",function(EnlargeAllCropsValueHolder){function EnlargeAllCropsValueHolder$(variantsValueExpression,imageEditorViewModel){this.variantsValueExpression$pe9C=variantsValueExpression;this.imageEditorViewModel$pe9C=imageEditorViewModel}function getValue(){var $2;for(var $1 in $2=this.variantsValueExpression$pe9C.getValue()){var variant=$2[$1];if(!this.imageEditorViewModel$pe9C.get(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP+
variant.key))return false}return true}function setValue(value){var $2;for(var $1 in $2=this.variantsValueExpression$pe9C.getValue()){var variant=$2[$1];this.imageEditorViewModel$pe9C.set(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP+variant.key,value)}}return{mixins:["com.coremedia.ui.data.ValueHolder"],variantsValueExpression$pe9C:null,imageEditorViewModel$pe9C:null,constructor:EnlargeAllCropsValueHolder$,getValue:getValue,setValue:setValue,
requires:["com.coremedia.ui.data.ValueHolder"],uses:["com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase"]}});Ext.define("com.coremedia.cms.studio.imageeditor.CropImageArea",function(CropImageArea){function CropImageArea$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.CropImageAreaBase,{});var defaults_$1=AS3.cast(CropImageArea,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.cls="crop-container x-resizable x-component-resizable x-component-default-resizable x-resizable-pinned";var ui_Binding_32_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,
{});AS3.setBindable(ui_Binding_32_5_$1,"destination",this.getCropBoundsValueExpression(config));AS3.setBindable(ui_Binding_32_5_$1,"ifUndefined",null);AS3.setBindable(ui_Binding_32_5_$1,"source",com.coremedia.cms.studio.imageeditor.CropImageAreaBase.createStoredCropBoundsValueExpression(config));AS3.setBindable(ui_Binding_32_5_$1,"twoWay",true);var ui_Binding_36_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_36_5_$1,"destination",this.getTransformValueExpression(config));
AS3.setBindable(ui_Binding_36_5_$1,"source",this.getCropTransformationValueExpression(config));var ui_Binding_38_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_38_5_$1,"destination","imageEditorViewModel."+com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.VIEW_MODEL_PROPERTY_PREFIX_ENLARGE_CROP+AS3.getBindable(config,"variant").key);AS3.setBindable(ui_Binding_38_5_$1,"source",AS3.getBindable(config,"imageSettingsValueExpression").extendBy("enlarge",AS3.getBindable(config,
"variant").key));AS3.setBindable(ui_Binding_38_5_$1,"ifUndefined",false);AS3.setBindable(ui_Binding_38_5_$1,"twoWay",true);config_$1.plugins=[ui_Binding_32_5_$1,ui_Binding_36_5_$1,ui_Binding_38_5_$1];config_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$Yorr(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.CropImageAreaBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.cropImageArea",constructor:CropImageArea$,super$Yorr:function(){com.coremedia.cms.studio.imageeditor.CropImageAreaBase.prototype.constructor.apply(this,
arguments)},config:{imageSettingsWritableValueExpression:null,variantBoxedImageDimensionValueExpression:null},requires:["com.coremedia.cms.studio.imageeditor.CropImageAreaBase","com.coremedia.ui.plugins.Binding","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase"]}});Ext.define("com.coremedia.cms.studio.imageeditor.CommonTransformations",function(CommonTransformations){function CommonTransformations$(transformations,width,height){this.transformations$4fcy=transformations;this.width$4fcy=width;this.height$4fcy=height}function getTransformations(){return this.transformations$4fcy}function getWidth(){return this.width$4fcy}function getHeight(){return this.height$4fcy}return{transformations$4fcy:null,width$4fcy:NaN,height$4fcy:NaN,constructor:CommonTransformations$,
getTransformations:getTransformations,getWidth:getWidth,getHeight:getHeight}});Ext.define("com.coremedia.cms.studio.imageeditor.FocusAreaImageArea",function(FocusAreaImageArea){function FocusAreaImageArea$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.FocusAreaImageAreaBase,{});var defaults_$1=AS3.cast(FocusAreaImageArea,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.cls=net.jangaroo.ext.Exml.asString("crop-container "+FocusAreaImageArea.CLS+" x-resizable x-component-resizable x-component-default-resizable x-border-box x-resizable-pinned");
net.jangaroo.ext.Exml.apply(config_$1,config);this.super$1Rq6(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.FocusAreaImageAreaBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.focusAreaImageArea",constructor:FocusAreaImageArea$,super$1Rq6:function(){com.coremedia.cms.studio.imageeditor.FocusAreaImageAreaBase.prototype.constructor.apply(this,arguments)},statics:{CLS:"focus-area"},requires:["com.coremedia.cms.studio.imageeditor.FocusAreaImageAreaBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageEditorPropertyField",function(ImageEditorPropertyField){function __initialize__(config){this.BUNDLE$n9YW=this.resourceManager.getResourceBundle(null,"com.coremedia.cms.studio.imageeditor.ImageEditor").content;this.imageEditorViewModel=this.imageEditorViewModel=com.coremedia.ui.data.beanFactory.createLocalBean();this.activeTabValueExpression$n9YW=com.coremedia.ui.data.ValueExpressionFactory.createFromValue("overview");this.undoHistory=new com.coremedia.cms.studio.imageeditor.history.UndoHistory(this.imageEditorViewModel);
this.readOnlyValueExpression$n9YW=this.createReadOnlyValueExpression(config,this.undoHistory)}function ImageEditorPropertyField$(config){if(arguments.length<=0)config=null;this.__initialize__$n9YW(config);var config_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase,{});var defaults_$1=AS3.cast(ImageEditorPropertyField,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.cls=net.jangaroo.ext.Exml.asString(ImageEditorPropertyField.IMAGE_EDITOR_PROPERTY_FIELD);
config_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.PanelSkin.CARD.getSkin());var layout_VBox_94_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_94_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_VBox_94_5_$1);var ui_Binding_98_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_98_5_$1,"destination","imageEditorViewModel.disableCropping");AS3.setBindable(ui_Binding_98_5_$1,"ifUndefined",false);AS3.setBindable(ui_Binding_98_5_$1,
"source","imageSettings.disableCropping");var ui_Binding_101_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_101_5_$1,"destination","imageEditorViewModel.orientation");AS3.setBindable(ui_Binding_101_5_$1,"ifUndefined",0);AS3.setBindable(ui_Binding_101_5_$1,"source","imageSettings.rotation.crude");AS3.setBindable(ui_Binding_101_5_$1,"twoWay",true);AS3.setBindable(ui_Binding_101_5_$1,"transformer",parseInt);AS3.setBindable(ui_Binding_101_5_$1,"reverseTransformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString);
var ui_Binding_107_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_107_5_$1,"destination","imageEditorViewModel.straighten");AS3.setBindable(ui_Binding_107_5_$1,"ifUndefined",0);AS3.setBindable(ui_Binding_107_5_$1,"source","imageSettings.rotation.fine");AS3.setBindable(ui_Binding_107_5_$1,"twoWay",true);AS3.setBindable(ui_Binding_107_5_$1,"transformer",parseInt);AS3.setBindable(ui_Binding_107_5_$1,"reverseTransformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString);
var ui_Binding_113_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_113_5_$1,"destination","imageEditorViewModel.flipHorizontally");AS3.setBindable(ui_Binding_113_5_$1,"ifUndefined",false);AS3.setBindable(ui_Binding_113_5_$1,"source","imageSettings.reflection.h");AS3.setBindable(ui_Binding_113_5_$1,"twoWay",true);AS3.setBindable(ui_Binding_113_5_$1,"transformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.stringToBoolean);AS3.setBindable(ui_Binding_113_5_$1,
"reverseTransformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString);var ui_Binding_119_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_119_5_$1,"destination","imageEditorViewModel.flipVertically");AS3.setBindable(ui_Binding_119_5_$1,"ifUndefined",false);AS3.setBindable(ui_Binding_119_5_$1,"source","imageSettings.reflection.v");AS3.setBindable(ui_Binding_119_5_$1,"twoWay",true);AS3.setBindable(ui_Binding_119_5_$1,"transformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.stringToBoolean);
AS3.setBindable(ui_Binding_119_5_$1,"reverseTransformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString);var ui_Binding_125_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_125_5_$1,"destination","imageEditorViewModel.brightness");AS3.setBindable(ui_Binding_125_5_$1,"ifUndefined",0);AS3.setBindable(ui_Binding_125_5_$1,"source","imageSettings.coloring.brightness");AS3.setBindable(ui_Binding_125_5_$1,"twoWay",true);AS3.setBindable(ui_Binding_125_5_$1,
"transformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.stringToNumber);AS3.setBindable(ui_Binding_125_5_$1,"reverseTransformer",com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString);var ui_Binding_131_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_131_5_$1,"destination","imageEditorViewModel.contrast");AS3.setBindable(ui_Binding_131_5_$1,"ifUndefined",0);AS3.setBindable(ui_Binding_131_5_$1,"source","imageSettings.coloring.contrast");AS3.setBindable(ui_Binding_131_5_$1,
"twoWay",true);AS3.setBindable(ui_Binding_131_5_$1,"transformer",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.transformContrast);AS3.setBindable(ui_Binding_131_5_$1,"reverseTransformer",com.coremedia.cms.studio.imageeditor.ColorTransformationUtil.reverseTransformContrast);var ui_Binding_139_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_139_5_$1,"destination","imageEditorViewModel.focusArea");AS3.setBindable(ui_Binding_139_5_$1,"source","imageSettings.focusArea");
AS3.setBindable(ui_Binding_139_5_$1,"ifUndefined",com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.transformFocusArea(undefined));AS3.setBindable(ui_Binding_139_5_$1,"transformer",com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.transformFocusArea);var ui_Binding_143_5_$1=AS3.cast(com.coremedia.ui.plugins.Binding,{});AS3.setBindable(ui_Binding_143_5_$1,"destination","imageEditorViewModel.focusPoint");AS3.setBindable(ui_Binding_143_5_$1,"source","imageSettings.focusPoint");
AS3.setBindable(ui_Binding_143_5_$1,"ifUndefined",this.transformFocusPointStruct(undefined));AS3.setBindable(ui_Binding_143_5_$1,"transformer",AS3.bind(this,"transformFocusPointStruct"));config_$1.plugins=[ui_Binding_98_5_$1,ui_Binding_101_5_$1,ui_Binding_107_5_$1,ui_Binding_113_5_$1,ui_Binding_119_5_$1,ui_Binding_125_5_$1,ui_Binding_131_5_$1,ui_Binding_139_5_$1,ui_Binding_143_5_$1];var panel_150_5_$1=AS3.cast(Ext.panel.Panel,{});AS3.setBindable(panel_150_5_$1,"height",400);var layout_Border_152_9_$1=
AS3.cast(Ext.layout.container.Border,{});AS3.setBindable(panel_150_5_$1,"layout",layout_Border_152_9_$1);var editor_SetPropertyLabelPlugin_155_9_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.plugins.SetPropertyLabelPlugin,{});editor_SetPropertyLabelPlugin_155_9_$1.bindTo=AS3.getBindable(config,"bindTo");AS3.setBindable(editor_SetPropertyLabelPlugin_155_9_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));var ui_ResizablePlugin_157_9_$1=AS3.cast(com.coremedia.ui.plugins.ResizablePlugin,
{});var ui_StatefulResizer_159_13_$1=AS3.cast(com.coremedia.ui.components.StatefulResizer,{});ui_StatefulResizer_159_13_$1.minHeight=30;ui_StatefulResizer_159_13_$1.handles="s";ui_StatefulResizer_159_13_$1.pinned=true;ui_StatefulResizer_159_13_$1.dynamic=false;ui_ResizablePlugin_157_9_$1.resizableConfig=ui_StatefulResizer_159_13_$1;panel_150_5_$1.plugins=[editor_SetPropertyLabelPlugin_155_9_$1,ui_ResizablePlugin_157_9_$1];var tabPanel_167_9_$1=AS3.cast(Ext.tab.Panel,{});tabPanel_167_9_$1.itemId="overviewVariants";
AS3.setBindable(tabPanel_167_9_$1,"region","north");tabPanel_167_9_$1.deferredRender=false;AS3.setBindable(tabPanel_167_9_$1,"activeItem","overview");var tabBar_172_13_$1=AS3.cast(Ext.tab.Bar,{});tabBar_172_13_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.TabBarSkin.WORKAREA_LIGHT.getSkin());AS3.setBindable(tabPanel_167_9_$1,"tabBar",tabBar_172_13_$1);var ui_BindActiveTabPlugin_175_13_$1=AS3.cast(com.coremedia.ui.plugins.BindActiveTabPlugin,{});ui_BindActiveTabPlugin_175_13_$1.bindTo=
this.activeTabValueExpression$n9YW;tabPanel_167_9_$1.plugins=[ui_BindActiveTabPlugin_175_13_$1];var ie_VariantTab_178_13_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.VariantTab,{});AS3.setBindable(ie_VariantTab_178_13_$1,"readOnlyValueExpression",this.readOnlyValueExpression$n9YW);AS3.setBindable(ie_VariantTab_178_13_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_VariantTab_178_13_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(ie_VariantTab_178_13_$1,"hideIssues",AS3.getBindable(config,
"hideIssues"));ie_VariantTab_178_13_$1.imageEditorViewModel=this.imageEditorViewModel;tabPanel_167_9_$1["defaultType"]=ie_VariantTab_178_13_$1["xtype"];delete ie_VariantTab_178_13_$1["xtype"];delete ie_VariantTab_178_13_$1["xclass"];tabPanel_167_9_$1.defaults=ie_VariantTab_178_13_$1;var ie_VariantTab_185_13_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.VariantTab,{});ie_VariantTab_185_13_$1.itemId="overview";AS3.setBindable(ie_VariantTab_185_13_$1,"title",this.BUNDLE$n9YW.IEC_overview_title);AS3.setBindable(ie_VariantTab_185_13_$1,
"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));var toolbar_189_17_$1=AS3.cast(Ext.toolbar.Toolbar,{});toolbar_189_17_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ToolbarSkin.LIGHT.getSkin());var ie_UndoRedoButton_191_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.history.UndoRedoButton,{});ie_UndoRedoButton_191_21_$1.itemId="undo";ie_UndoRedoButton_191_21_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.TOOLBAR.getSkin());
AS3.setBindable(ie_UndoRedoButton_191_21_$1,"tooltip",this.BUNDLE$n9YW.IEC_action_undo_toolTip);ie_UndoRedoButton_191_21_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_undo_toolTip);AS3.setBindable(ie_UndoRedoButton_191_21_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_UndoRedoButton_191_21_$1,"isRedo",false);AS3.setBindable(ie_UndoRedoButton_191_21_$1,"disableValueExpression",this.getDisableExpression(config));var ie_UndoRedoButton_198_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.history.UndoRedoButton,
{});ie_UndoRedoButton_198_21_$1.itemId="redo";ie_UndoRedoButton_198_21_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.TOOLBAR.getSkin());AS3.setBindable(ie_UndoRedoButton_198_21_$1,"tooltip",this.BUNDLE$n9YW.IEC_action_redo_toolTip);ie_UndoRedoButton_198_21_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_redo_toolTip);AS3.setBindable(ie_UndoRedoButton_198_21_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_UndoRedoButton_198_21_$1,"isRedo",true);
AS3.setBindable(ie_UndoRedoButton_198_21_$1,"disableValueExpression",this.getDisableExpression(config));var ui_IconButton_205_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_205_21_$1.itemId="deleteBlob";var editor_DeleteBlobAction_207_25_$1=AS3.cast(com.coremedia.cms.editor.sdk.actions.DeleteBlobAction,{});AS3.setBindable(editor_DeleteBlobAction_207_25_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_deleteblob_iconCls));editor_DeleteBlobAction_207_25_$1["tooltip"]=
this.BUNDLE$n9YW.IEC_action_deleteblob_toolTip;AS3.setBindable(editor_DeleteBlobAction_207_25_$1,"blobValueExpression",this.getBlobValueExpression(config));AS3.setBindable(editor_DeleteBlobAction_207_25_$1,"contentValueExpression",AS3.getBindable(config,"bindTo"));AS3.setBindable(editor_DeleteBlobAction_207_25_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));ui_IconButton_205_21_$1.baseAction=new com.coremedia.cms.editor.sdk.actions.DeleteBlobAction(editor_DeleteBlobAction_207_25_$1);
var tbSeparator_214_21_$1=AS3.cast(Ext.toolbar.Separator,{});var ui_IconButton_215_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_215_21_$1.itemId="openBlob";var editor_OpenBlobAction_217_25_$1=AS3.cast(com.coremedia.cms.editor.sdk.actions.OpenBlobAction,{});AS3.setBindable(editor_OpenBlobAction_217_25_$1,"blobValueExpression",this.getBlobValueExpression(config));ui_IconButton_215_21_$1.baseAction=new com.coremedia.cms.editor.sdk.actions.OpenBlobAction(editor_OpenBlobAction_217_25_$1);
var tbSeparator_220_21_$1=AS3.cast(Ext.toolbar.Separator,{});var ie_RotationMenuButton_221_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.RotationMenuButton,{});ie_RotationMenuButton_221_21_$1.itemId="rotationMenu";AS3.setBindable(ie_RotationMenuButton_221_21_$1,"imageEditorViewModel",this.imageEditorViewModel);AS3.setBindable(ie_RotationMenuButton_221_21_$1,"disabledValueExpression",this.getDisableExpression(config));AS3.setBindable(ie_RotationMenuButton_221_21_$1,"undoHistory",this.undoHistory);
AS3.setBindable(ie_RotationMenuButton_221_21_$1,"orientedImageDimensionsValueExpression",this.getCommonTransformsImageDimensionsValueExpression(config));AS3.setBindable(ie_RotationMenuButton_221_21_$1,"statusValueExpression",this.getDisableStatusExpression(this.getDisableExpression(config)));AS3.setBindable(ie_RotationMenuButton_221_21_$1,"variantsValueExpression",this.getVariantsValueExpression());var ui_IconButton_228_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_228_21_$1.itemId=
"fliph";ui_IconButton_228_21_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_fliph_toolTip);var ie_FlipImageAction_230_25_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.FlipImageAction,{});AS3.setBindable(ie_FlipImageAction_230_25_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_fliph_iconCls));ie_FlipImageAction_230_25_$1["tooltip"]=this.BUNDLE$n9YW.IEC_action_fliph_toolTip;AS3.setBindable(ie_FlipImageAction_230_25_$1,"statusExpression",this.getDisableStatusExpression(this.getDisableExpression(config)));
AS3.setBindable(ie_FlipImageAction_230_25_$1,"variantsValueExpression",this.getVariantsValueExpression());AS3.setBindable(ie_FlipImageAction_230_25_$1,"flipDirection",net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase.FLIP_HORIZONTALLY));AS3.setBindable(ie_FlipImageAction_230_25_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_FlipImageAction_230_25_$1,"imageEditorViewModel",this.imageEditorViewModel);ui_IconButton_228_21_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.FlipImageAction(ie_FlipImageAction_230_25_$1);
var ui_IconButton_239_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_239_21_$1.itemId="flipv";ui_IconButton_239_21_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_flipv_toolTip);var ie_FlipImageAction_241_25_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.FlipImageAction,{});AS3.setBindable(ie_FlipImageAction_241_25_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_flipv_iconCls));ie_FlipImageAction_241_25_$1["tooltip"]=
this.BUNDLE$n9YW.IEC_action_flipv_toolTip;AS3.setBindable(ie_FlipImageAction_241_25_$1,"statusExpression",this.getDisableStatusExpression(this.getDisableExpression(config)));AS3.setBindable(ie_FlipImageAction_241_25_$1,"variantsValueExpression",this.getVariantsValueExpression());AS3.setBindable(ie_FlipImageAction_241_25_$1,"flipDirection",net.jangaroo.ext.Exml.asString(com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase.FLIP_VERTICALLY));AS3.setBindable(ie_FlipImageAction_241_25_$1,"undoHistory",
this.undoHistory);AS3.setBindable(ie_FlipImageAction_241_25_$1,"imageEditorViewModel",this.imageEditorViewModel);ui_IconButton_239_21_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.FlipImageAction(ie_FlipImageAction_241_25_$1);var tbSeparator_250_21_$1=AS3.cast(Ext.toolbar.Separator,{});var ie_ColorTransformationMenuButton_251_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ColorTransformationMenuButton,{});ie_ColorTransformationMenuButton_251_21_$1.itemId="colorMenu";AS3.setBindable(ie_ColorTransformationMenuButton_251_21_$1,
"disabledValueExpression",this.getDisableExpression(config));AS3.setBindable(ie_ColorTransformationMenuButton_251_21_$1,"undoHistory",this.undoHistory);var tbSeparator_254_21_$1=AS3.cast(Ext.toolbar.Separator,{});var ui_IconButton_255_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_255_21_$1.itemId="viewcrops";ui_IconButton_255_21_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_viewcrops_off_toolTip);ui_IconButton_255_21_$1.enableToggle=true;var ui_DependencyTrackedToggleAction_257_25_$1=
AS3.cast(com.coremedia.ui.actions.DependencyTrackedToggleAction,{});AS3.setBindable(ui_DependencyTrackedToggleAction_257_25_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_viewcrops_off_iconCls));ui_DependencyTrackedToggleAction_257_25_$1["tooltip"]=this.BUNDLE$n9YW.IEC_action_viewcrops_off_toolTip;AS3.setBindable(ui_DependencyTrackedToggleAction_257_25_$1,"statusExpression",this.getDisableStatusExpression(this.getDisableExpression(config)));AS3.setBindable(ui_DependencyTrackedToggleAction_257_25_$1,
"tooltipPressed",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_viewcrops_on_toolTip));AS3.setBindable(ui_DependencyTrackedToggleAction_257_25_$1,"pressedValueExpression",this.getShowCropsValueExpression());ui_IconButton_255_21_$1.baseAction=new com.coremedia.ui.actions.DependencyTrackedToggleAction(ui_DependencyTrackedToggleAction_257_25_$1);var ui_IconButton_264_21_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_264_21_$1.itemId="enlargeAll";ui_IconButton_264_21_$1.ariaLabel=
net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_enlarge_all_crops_off_toolTip);AS3.setBindable(ui_IconButton_264_21_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_enlarge_all_crops_iconCls));ui_IconButton_264_21_$1.enableToggle=true;var ie_EnlargeAllAction_269_25_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.actions.EnlargeAllAction,{});ie_EnlargeAllAction_269_25_$1["tooltip"]=this.BUNDLE$n9YW.IEC_action_enlarge_all_crops_off_toolTip;AS3.setBindable(ie_EnlargeAllAction_269_25_$1,
"tooltipPressed",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_action_enlarge_all_crops_on_toolTip));AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"pressedValueExpression",this.createEnlargeAllCropsPressedValueExpression());AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"statusExpression",this.getDisableStatusExpression(this.getDisableExpression(config)));AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"imageDimensionsValueExpression",this.getCommonTransformsImageDimensionsValueExpression(config));
AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"variantBoxedImageDimensionsValueExpressions",this.getVariantBoxedImageDimensionsValueExpressions(config));AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"imageEditorViewModel",this.imageEditorViewModel);AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"variantsValueExpression",this.getVariantsValueExpression());AS3.setBindable(ie_EnlargeAllAction_269_25_$1,"undoHistory",this.undoHistory);ui_IconButton_264_21_$1.baseAction=new com.coremedia.cms.studio.imageeditor.actions.EnlargeAllAction(ie_EnlargeAllAction_269_25_$1);
var ie_ResetImageMenuButton_281_21_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ResetImageMenuButton,{});ie_ResetImageMenuButton_281_21_$1.itemId="resetImageMenu";AS3.setBindable(ie_ResetImageMenuButton_281_21_$1,"imageEditorViewModel",this.imageEditorViewModel);AS3.setBindable(ie_ResetImageMenuButton_281_21_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_ResetImageMenuButton_281_21_$1,"disabledValueExpression",this.getDisableExpression(config));AS3.setBindable(ie_ResetImageMenuButton_281_21_$1,
"variantsValueExpression",this.getVariantsValueExpression());toolbar_189_17_$1.items=[ie_UndoRedoButton_191_21_$1,ie_UndoRedoButton_198_21_$1,ui_IconButton_205_21_$1,tbSeparator_214_21_$1,ui_IconButton_215_21_$1,tbSeparator_220_21_$1,ie_RotationMenuButton_221_21_$1,ui_IconButton_228_21_$1,ui_IconButton_239_21_$1,tbSeparator_250_21_$1,ie_ColorTransformationMenuButton_251_21_$1,tbSeparator_254_21_$1,ui_IconButton_255_21_$1,ui_IconButton_264_21_$1,ie_ResetImageMenuButton_281_21_$1];ie_VariantTab_185_13_$1.tbar=
toolbar_189_17_$1;tabPanel_167_9_$1.items=[ie_VariantTab_185_13_$1];var ui_StatefulPanel_292_9_$1=AS3.cast(com.coremedia.ui.components.StatefulPanel,{});ui_StatefulPanel_292_9_$1.itemId="stage";AS3.setBindable(ui_StatefulPanel_292_9_$1,"region","center");ui_StatefulPanel_292_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.PanelSkin.GRID_200.getSkin());AS3.setBindable(ui_StatefulPanel_292_9_$1,"layout","fit");var ui_SwitchingContainer_297_13_$1=AS3.cast(com.coremedia.ui.components.SwitchingContainer,
{});AS3.setBindable(ui_SwitchingContainer_297_13_$1,"activeItemValueExpression",this.getBlobValueExpression(config));AS3.setBindable(ui_SwitchingContainer_297_13_$1,"transformer",com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.isBlobEmpty);var ie_ImageEditorStage_300_17_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageEditorStage,{});ie_ImageEditorStage_300_17_$1.itemId="iestage";AS3.setBindable(ie_ImageEditorStage_300_17_$1,"imageUriValueExpression",this.createLocalImageUriValueExpression(config));
AS3.setBindable(ie_ImageEditorStage_300_17_$1,"imageDimensionsValueExpression",this.getCommonTransformsImageDimensionsValueExpression(config));AS3.setBindable(ie_ImageEditorStage_300_17_$1,"variantBoxedImageDimensionsValueExpressions",this.getVariantBoxedImageDimensionsValueExpressions(config));AS3.setBindable(ie_ImageEditorStage_300_17_$1,"variantsValueExpression",this.getVariantsValueExpression());AS3.setBindable(ie_ImageEditorStage_300_17_$1,"activeTabValueExpression",this.activeTabValueExpression$n9YW);
AS3.setBindable(ie_ImageEditorStage_300_17_$1,"imageSettingsValueExpression",this.getImageSettingsValueExpression(config));AS3.setBindable(ie_ImageEditorStage_300_17_$1,"imageEditorViewModel",this.imageEditorViewModel);AS3.setBindable(ie_ImageEditorStage_300_17_$1,"readOnlyValueExpression",this.readOnlyValueExpression$n9YW);AS3.setBindable(ie_ImageEditorStage_300_17_$1,"undoHistory",this.undoHistory);AS3.setBindable(ie_ImageEditorStage_300_17_$1,"commonTransformationsValueExpression",this.getCommonTransformationsValueExpression());
AS3.setBindable(ie_ImageEditorStage_300_17_$1,"showCropsValueExpression",this.getShowCropsValueExpression());AS3.setBindable(ie_ImageEditorStage_300_17_$1,"imageSettingsWritableValueExpression",this.getImageSettingsWritableValueExpression(config));AS3.setBindable(ie_ImageEditorStage_300_17_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(ie_ImageEditorStage_300_17_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(ie_ImageEditorStage_300_17_$1,
"hideIssues",AS3.getBindable(config,"hideIssues"));var editor_Html5Upload_317_17_$1=AS3.cast(com.coremedia.cms.editor.sdk.components.html5.Html5Upload,{});editor_Html5Upload_317_17_$1.itemId="empty";editor_Html5Upload_317_17_$1.cls="upload-image-container";AS3.setBindable(editor_Html5Upload_317_17_$1,"bindTo",AS3.getBindable(config,"bindTo").extendBy("properties"));AS3.setBindable(editor_Html5Upload_317_17_$1,"targetProperty",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));
AS3.setBindable(editor_Html5Upload_317_17_$1,"buttonText",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_upload_button_text));AS3.setBindable(editor_Html5Upload_317_17_$1,"helpText",net.jangaroo.ext.Exml.asString(this.BUNDLE$n9YW.IEC_upload_help_text));var editor_BindDisablePlugin_324_21_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.plugins.BindDisablePlugin,{});AS3.setBindable(editor_BindDisablePlugin_324_21_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));
editor_BindDisablePlugin_324_21_$1.bindTo=AS3.getBindable(config,"bindTo");editor_Html5Upload_317_17_$1.plugins=[editor_BindDisablePlugin_324_21_$1];ui_SwitchingContainer_297_13_$1.items=[ie_ImageEditorStage_300_17_$1,editor_Html5Upload_317_17_$1];ui_StatefulPanel_292_9_$1.items=[ui_SwitchingContainer_297_13_$1];var editor_ShowIssuesPlugin_332_13_$1=AS3.cast(com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin,{});editor_ShowIssuesPlugin_332_13_$1.bindTo=AS3.getBindable(config,"bindTo");AS3.setBindable(editor_ShowIssuesPlugin_332_13_$1,
"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));ui_StatefulPanel_292_9_$1.plugins=[editor_ShowIssuesPlugin_332_13_$1];panel_150_5_$1.items=[tabPanel_167_9_$1,ui_StatefulPanel_292_9_$1];var container_338_5_$1=AS3.cast(Ext.container.Container,{});AS3.setBindable(container_338_5_$1,"region","south");var ie_ImageDimensionsDisplay_340_9_$1=AS3.cast(com.coremedia.cms.studio.imageeditor.ImageDimensionsDisplay,{});ie_ImageDimensionsDisplay_340_9_$1.flex=1;AS3.setBindable(ie_ImageDimensionsDisplay_340_9_$1,
"model",this.imageEditorViewModel);AS3.setBindable(ie_ImageDimensionsDisplay_340_9_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(ie_ImageDimensionsDisplay_340_9_$1,"propertyName","data");var container_345_9_$1=AS3.cast(Ext.container.Container,{});container_345_9_$1.flex=1;container_345_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ContainerSkin.GRID_200.getSkin());var editor_BooleanPropertyField_348_13_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.BooleanPropertyField,
{});editor_BooleanPropertyField_348_13_$1.itemId="disableCroppingCheckbox";AS3.setBindable(editor_BooleanPropertyField_348_13_$1,"bindTo",AS3.getBindable(config,"bindTo"));editor_BooleanPropertyField_348_13_$1.labelAlign="top";editor_BooleanPropertyField_348_13_$1.labelSeparator="";AS3.setBindable(editor_BooleanPropertyField_348_13_$1,"propertyName","localSettings.disableCropping");AS3.setBindable(editor_BooleanPropertyField_348_13_$1,"dontTransformToInteger",true);AS3.setBindable(editor_BooleanPropertyField_348_13_$1,
"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));container_345_9_$1.items=[editor_BooleanPropertyField_348_13_$1];container_338_5_$1.items=[ie_ImageDimensionsDisplay_340_9_$1,container_345_9_$1];var layout_HBox_360_9_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_360_9_$1,"align","stretch");AS3.setBindable(container_338_5_$1,"layout",layout_HBox_360_9_$1);config_$1.items=[panel_150_5_$1,container_338_5_$1];net.jangaroo.ext.Exml.apply(config_$1,
config);this.super$n9YW(config_$1)}return{extend:"com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase",alias:"widget.com.coremedia.cms.studio.imageeditor.config.imageEditorPropertyField",BUNDLE$n9YW:null,activeTabValueExpression$n9YW:null,readOnlyValueExpression$n9YW:null,__initialize__$n9YW:__initialize__,constructor:ImageEditorPropertyField$,super$n9YW:function(){com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase.prototype.constructor.apply(this,arguments)},config:{bindTo:null,
forceReadOnlyValueExpression:null,propertyName:null,imageSettingsPropertyName:null,hideIssues:false},statics:{IMAGE_EDITOR_PROPERTY_FIELD:"cm-image-editor-property-field",IMAGE_EDITOR_STAGE_INNER_PANEL:"image-editor-stage-inner-panel",IMAGE_EDITOR_RESIZABLE:"image-editor-resizable"},requires:["Ext.container.Container","Ext.layout.container.Border","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.panel.Panel","Ext.tab.Bar","Ext.tab.Panel","Ext.toolbar.Separator","Ext.toolbar.Toolbar","com.coremedia.cms.editor.sdk.actions.DeleteBlobAction",
"com.coremedia.cms.editor.sdk.actions.OpenBlobAction","com.coremedia.cms.editor.sdk.components.html5.Html5Upload","com.coremedia.cms.editor.sdk.premular.fields.BooleanPropertyField","com.coremedia.cms.editor.sdk.premular.fields.plugins.BindDisablePlugin","com.coremedia.cms.editor.sdk.premular.fields.plugins.SetPropertyLabelPlugin","com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin","com.coremedia.cms.studio.imageeditor.ImageEditorPropertyFieldBase","com.coremedia.ui.actions.DependencyTrackedToggleAction",
"com.coremedia.ui.components.IconButton","com.coremedia.ui.components.StatefulPanel","com.coremedia.ui.components.StatefulResizer","com.coremedia.ui.components.SwitchingContainer","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.beanFactory","com.coremedia.ui.plugins.BindActiveTabPlugin","com.coremedia.ui.plugins.Binding","com.coremedia.ui.plugins.ResizablePlugin","com.coremedia.ui.skins.ButtonSkin","com.coremedia.ui.skins.ContainerSkin","com.coremedia.ui.skins.PanelSkin","com.coremedia.ui.skins.TabBarSkin",
"com.coremedia.ui.skins.ToolbarSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.studio.imageeditor.ColorTransformationMenuButton","com.coremedia.cms.studio.imageeditor.ColorTransformationUtil","com.coremedia.cms.studio.imageeditor.ImageDimensionsDisplay","com.coremedia.cms.studio.imageeditor.ImageEditorStage","com.coremedia.cms.studio.imageeditor.ResetImageMenuButton","com.coremedia.cms.studio.imageeditor.RotationMenuButton","com.coremedia.cms.studio.imageeditor.VariantTab","com.coremedia.cms.studio.imageeditor.actions.EnlargeAllAction",
"com.coremedia.cms.studio.imageeditor.actions.FlipImageAction","com.coremedia.cms.studio.imageeditor.actions.FlipImageActionBase","com.coremedia.cms.studio.imageeditor.history.UndoHistory","com.coremedia.cms.studio.imageeditor.history.UndoRedoButton","com.coremedia.cms.studio.imageeditor.util.ConversionUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.FocusPointImageAreaBase",function(FocusPointImageAreaBase){function FocusPointImageAreaBase$(config){if(arguments.length<=0)config=null;this.super$7omU(config);this.showResizeHandles=false}function afterRender(){com.coremedia.cms.studio.imageeditor.ImageArea.prototype.afterRender.call(this);this.getImageEditorStage().getFocusArea().addChangeListener(AS3.bind(this,"updateFocusPoint$7omU"));this.activate()}function getFocusPointValueExpression(config){if(arguments.length<=
0)config=null;if(!this.focusPointValueExpression$7omU)this.focusPointValueExpression$7omU=com.coremedia.ui.data.ValueExpressionFactory.create("focusPoint",(config||this).imageEditorViewModel);return this.focusPointValueExpression$7omU}function getRadius(){if(!this.radius$7omU)this.radius$7omU=this.rendered?this.outerImageArea.getWidth()/2:undefined;return this.radius$7omU}function getMinimumX(){return this.getImageEditorStage().getFocusArea().getLeftX()-this.getRadius()}function getMinimumY(){return this.getImageEditorStage().getFocusArea().getUpperY()-
this.getRadius()}function getMaximumRightX(){return this.getImageEditorStage().getFocusArea().getRightX()-this.getRadius()}function getMaximumLowerY(){return this.getImageEditorStage().getFocusArea().getLowerY()-this.getRadius()}function updateFocusPoint(){var imageEditorStageBounds=AS3.getBindable(this,"imageEditorStageBoundsValueExpression").getValue();var focusAreaRectangle=this.getImageEditorStage().getFocusArea().getPercentageRectangle();var focusPointRectangle=this.getPercentageRectangle();
if(!imageEditorStageBounds||!focusAreaRectangle||!focusPointRectangle||focusPointRectangle.isUnitSquare())return;var newFocusPointX=Math.max(this.getCenterX()-this.getRadius(),this.getMinimumX$7omU());var newFocusPointY=Math.max(this.getCenterY()-this.getRadius(),this.getMinimumY$7omU());newFocusPointX=Math.min(newFocusPointX,this.getMaximumRightX$7omU());newFocusPointY=Math.min(newFocusPointY,this.getMaximumLowerY$7omU());var diameter=this.getRadius()*2;var focusPoint=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getPercentageRectangle(new com.coremedia.cms.studio.imageeditor.model.Rectangle(newFocusPointX,
newFocusPointY,diameter,diameter),this.getAdjustedImageBounds());this.getFocusPointValueExpression().setValue(focusPoint)}function computeRectangle(imageAreaBoundsVE,imageEditorStageBoundsVE){var imageEditorStageBounds=imageEditorStageBoundsVE.getValue();if(!imageEditorStageBounds)return undefined;var focusPointCenterX=this.getCenterX();var focusPointCenterY=this.getCenterY();if(this.getPercentageRectangle().isUnitSquare()){var focusArea=this.getImageEditorStage().getFocusArea();focusPointCenterX=
focusArea.getCenterX();focusPointCenterY=focusArea.getCenterY()}var diameter=this.getRadius()*2;return new com.coremedia.cms.studio.imageeditor.model.Rectangle(focusPointCenterX-this.getRadius(),focusPointCenterY-this.getRadius(),diameter,diameter)}function getCropRatio(){return undefined}function updateDimensions(){if(this.activeHandle===com.coremedia.cms.studio.imageeditor.ImageAreaBase.HANDLE_CENTER)try{var offset=this.theResizable.getOffset(null);var diffX=offset[0];var diffY=offset[1];var ownerBox=
this.ownerCt.getBox();var focusArea=this.getImageEditorStage().getFocusArea();var diameter=this.getRadius()*2;var extendedFocusArea=new com.coremedia.cms.studio.imageeditor.model.Rectangle(this.getMinimumX$7omU(),this.getMinimumY$7omU(),focusArea.getMyWidth()+diameter,focusArea.getMyHeight()+diameter);var adjustedFocusArea=extendedFocusArea.move(ownerBox.x,ownerBox.y);diffX=Math.max(Math.min(diffX,adjustedFocusArea.right-this.start.right),adjustedFocusArea.left-this.start.left);diffY=Math.max(Math.min(diffY,
adjustedFocusArea.bottom-this.start.bottom),adjustedFocusArea.top-this.start.top);this.setXY([this.start.x+diffX,this.start.y+diffY])}catch(ex){}}function deactivate(){}function getBoundsValueExpression(config){if(arguments.length<=0)config=null;return this.getFocusPointValueExpression()}function getUndoText(){return this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_history_crops_changed_focus_point")}function getMyWidth(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getWidth(this.getPercentageRectangle(),
this.getAdjustedImageBounds())}function getCenterX(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(this.getPercentageRectangle(),this.getAdjustedImageBounds())+this.getMyWidth()/2}function getMyHeight(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getHeight(this.getPercentageRectangle(),this.getAdjustedImageBounds())}function getCenterY(){return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(this.getPercentageRectangle(),this.getAdjustedImageBounds())+
this.getMyHeight()/2}return{extend:"com.coremedia.cms.studio.imageeditor.ImageArea",radius$7omU:0,focusPointValueExpression$7omU:null,constructor:FocusPointImageAreaBase$,super$7omU:function(){com.coremedia.cms.studio.imageeditor.ImageArea.prototype.constructor.apply(this,arguments)},afterRender:afterRender,getFocusPointValueExpression:getFocusPointValueExpression,getRadius:getRadius,getMinimumX$7omU:getMinimumX,getMinimumY$7omU:getMinimumY,getMaximumRightX$7omU:getMaximumRightX,getMaximumLowerY$7omU:getMaximumLowerY,
updateFocusPoint$7omU:updateFocusPoint,computeRectangle:computeRectangle,getCropRatio:getCropRatio,updateDimensions:updateDimensions,deactivate:deactivate,getBoundsValueExpression:getBoundsValueExpression,getUndoText:getUndoText,getMyWidth:getMyWidth,getCenterX:getCenterX,getMyHeight:getMyHeight,getCenterY:getCenterY,requires:["com.coremedia.cms.studio.imageeditor.ImageArea","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.cms.studio.imageeditor.ImageAreaBase","com.coremedia.cms.studio.imageeditor.model.Rectangle",
"com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.StoredCropBoundsValueHolder",function(StoredCropBoundsValueHolder){function StoredCropBoundsValueHolder$(imageSettingsValueExpression,variantKey){this.isDefaultValueExpression$xkxI=com.coremedia.ui.data.ValueExpressionFactory.createTransformingValueExpression(imageSettingsValueExpression.extendBy("isDefault",variantKey),com.coremedia.cms.studio.imageeditor.util.ConversionUtil.stringToBoolean,com.coremedia.cms.studio.imageeditor.util.ConversionUtil.anyToString,
true);this.relativeValueExpression$xkxI=com.coremedia.ui.data.ValueExpressionFactory.createTransformingValueExpression(imageSettingsValueExpression.extendBy("relative",variantKey),com.coremedia.cms.studio.imageeditor.util.ConversionUtil.positionToRectangle,com.coremedia.cms.studio.imageeditor.util.ConversionUtil.rectangleToPosition,null)}function getValue(){switch(this.isDefaultValueExpression$xkxI.getValue()){case undefined:return undefined;case false:return this.relativeValueExpression$xkxI.getValue();
case true:return null}}function setValue(value){if(!value)return this.isDefaultValueExpression$xkxI.setValue(true);var isDefaultChanged=this.isDefaultValueExpression$xkxI.setValue(false);var relativeChanged=this.relativeValueExpression$xkxI.setValue(value);return relativeChanged||isDefaultChanged}return{mixins:["com.coremedia.ui.data.ValueHolder"],isDefaultValueExpression$xkxI:null,relativeValueExpression$xkxI:null,constructor:StoredCropBoundsValueHolder$,getValue:getValue,setValue:setValue,requires:["com.coremedia.ui.data.ValueExpressionFactory",
"com.coremedia.ui.data.ValueHolder"],uses:["com.coremedia.cms.studio.imageeditor.util.ConversionUtil"]}});Ext.define("com.coremedia.cms.studio.imageeditor.CropImageAreaBase",function(CropImageAreaBase){function CropImageAreaBase$(config){if(arguments.length<=0)config=null;this.variantKey$lENc=AS3.getBindable(config,"variant").key;this.variantBoxedImageDimensionsValueExpression$lENc=AS3.getBindable(config,"variantBoxedImageDimensionValueExpression");this.super$lENc(config)}function createStoredCropBoundsValueExpression$static(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromValueHolder(new com.coremedia.cms.studio.imageeditor.StoredCropBoundsValueHolder(AS3.getBindable(config,
"imageSettingsValueExpression"),AS3.getBindable(config,"variant").key))}function getCropBoundsValueExpression(config){if(arguments.length<=0)config=null;if(!this.cropBoundsValueExpression$lENc)this.cropBoundsValueExpression$lENc=com.coremedia.ui.data.ValueExpressionFactory.create(AS3.getBindable(config,"variant").key,AS3.getBindable(config,"imageEditorViewModel"));return this.cropBoundsValueExpression$lENc}function getBoundsValueExpression(config){if(arguments.length<=0)config=null;if(!this.actualCropBoundsValueExpression$lENc)this.actualCropBoundsValueExpression$lENc=
com.coremedia.ui.data.ValueExpressionFactory.createTransformingValueExpression(this.getCropBoundsValueExpression(config),AS3.bind(this,"computeRelativeCropFromFocusArea$lENc"));return this.actualCropBoundsValueExpression$lENc}function getVariantBoxedImageDimensionsValueExpression(){return this.variantBoxedImageDimensionsValueExpression$lENc}function computeRelativeCropFromFocusArea(bounds){if(bounds)return bounds;if(!AS3.getBindable(this,"imageDimensionsValueExpression")||!this.variantBoxedImageDimensionsValueExpression$lENc)return undefined;
var imageDimensions=AS3.getBindable(this,"imageDimensionsValueExpression").getValue();var variantDimensions=this.variantBoxedImageDimensionsValueExpression$lENc.getValue();if(!imageDimensions||!variantDimensions)return undefined;if(imageDimensions.width!==variantDimensions.width||imageDimensions.height!==variantDimensions.height)return com.coremedia.cms.studio.imageeditor.model.Rectangle.getUnitSquare();var focusArea=this.getImageEditorStage().getFocusArea().getPercentageRectangle();var crop=AS3.getBindable(this,
"variant").calculateDefaultCropDimensions(focusArea,imageDimensions);crop=this.centerCropAroundFocusPoint$lENc(crop);return crop.adjust(imageDimensions,variantDimensions,AS3.getBindable(this,"variant").aspectRatio)}function centerCropAroundFocusPoint(crop){var focusArea=this.getImageEditorStage().getFocusArea().getPercentageRectangle();var focusPointImageArea=this.getImageEditorStage().getFocusPointImageArea();var focusPointRectangle=focusPointImageArea.getPercentageRectangle();var imageEditorStageBounds=
AS3.getBindable(this,"imageEditorStageBoundsValueExpression").getValue();if(!focusArea||!focusPointRectangle||!imageEditorStageBounds)return crop;var focusAreaX=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(focusArea,imageEditorStageBounds);var focusAreaRightX=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getValueOfRightX(focusArea,imageEditorStageBounds);var focusAreaY=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(focusArea,imageEditorStageBounds);var focusAreaLowerY=
com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getLowerY(focusArea,imageEditorStageBounds);var cropX=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(crop,imageEditorStageBounds);var cropY=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(crop,imageEditorStageBounds);var cropWidth=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getWidth(crop,imageEditorStageBounds);var cropHeight=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getHeight(crop,
imageEditorStageBounds);if(!focusPointRectangle.isUnitSquare()){var focusPointXCenter=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getX(focusPointRectangle,imageEditorStageBounds)+focusPointImageArea.getRadius();var focusPointYCenter=com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getY(focusPointRectangle,imageEditorStageBounds)+focusPointImageArea.getRadius();cropX=focusPointXCenter-cropWidth/2;cropY=focusPointYCenter-cropHeight/2}cropX=Math.max(focusAreaX,cropX);if(cropX+
cropWidth>focusAreaRightX)cropX=focusAreaRightX-cropWidth;cropY=Math.max(focusAreaY,cropY);if(cropY+cropHeight>focusAreaLowerY)cropY=focusAreaLowerY-cropHeight;return com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil.getPercentageRectangle(new com.coremedia.cms.studio.imageeditor.model.Rectangle(cropX,cropY,cropWidth,cropHeight),imageEditorStageBounds)}function getCropTransformationValueExpression(config){if(!this.cropTransformationValueExpression$lENc)this.cropTransformationValueExpression$lENc=
this.createCropTransformationValueExpression(config);return this.cropTransformationValueExpression$lENc}function createCropTransformationValueExpression(config){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){if(!AS3.getBindable(config,"imageSettingsWritableValueExpression").getValue())return undefined;var commonTransformations=AS3.getBindable(config,"commonTransformationsValueExpression").getValue();var relativeCrop=this$.getBoundsValueExpression().getValue();
if(!commonTransformations||!relativeCrop)return undefined;var imageDimensions=AS3.getBindable(config,"imageDimensionsValueExpression").getValue();var box=AS3.getBindable(config,"variantBoxedImageDimensionValueExpression").getValue();if(!imageDimensions||!box)return undefined;var cropTransformations=[];var boxed=imageDimensions.width!==box.width||imageDimensions.height!==box.height;if(boxed||!relativeCrop.isUnitSquare()){var scaledCrop=relativeCrop.scale(box.width,box.height).move(-(box.width-imageDimensions.width)/
2,-(box.height-imageDimensions.height)/2).round();if(scaledCrop.height<2)scaledCrop=new com.coremedia.cms.studio.imageeditor.model.Rectangle(scaledCrop.x,Math.max(0,scaledCrop.y-2+scaledCrop.height),scaledCrop.width,2);if(scaledCrop.width<2)scaledCrop=new com.coremedia.cms.studio.imageeditor.model.Rectangle(Math.max(0,scaledCrop.x-2+scaledCrop.width),scaledCrop.y,2,scaledCrop.height);if(box.width!==imageDimensions.width||box.height!==imageDimensions.height)scaledCrop["bg"]=AS3.getBindable(this$,"backgroundColorValueExpression").getValue();
cropTransformations.push({crop:scaledCrop})}return com.coremedia.cms.studio.imageeditor.util.TransformationChain.serialize(commonTransformations.getTransformations().concat(cropTransformations))})}function getCropRatio(){var imageDimensions=this.variantBoxedImageDimensionsValueExpression$lENc.getValue();return AS3.getBindable(this,"variant").widthRatio/AS3.getBindable(this,"variant").heightRatio/(imageDimensions.width/imageDimensions.height)}function makeNewBox(start,position,diffX,diffY,region){var cr=
AS3.getBindable(this,"variant").widthRatio/AS3.getBindable(this,"variant").heightRatio;var fr,fb;var fx,fy;switch(position){case "east":fr=0;fb=.5;fx=1;fy=0;break;case "southeast":fr=0;fb=0;fx=cr/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));fy=1/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));break;case "south":fr=.5;fb=0;fx=0;fy=1;break;case "southwest":fr=1;fb=0;fx=-cr/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));fy=1/
Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));break;case "west":fr=1;fb=.5;fx=-1;fy=0;break;case "northwest":fr=1;fb=1;fx=-cr/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));fy=-1/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));break;case "north":fr=.5;fb=1;fx=0;fy=-1;break;case "northeast":fr=0;fb=1;fx=cr/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));fy=-1/Math.sqrt(1+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(cr));
break}var fl=1-fr;var ft=1-fb;var rx=fl*start.left+fr*start.right;var ry=ft*start.top+fb*start.bottom;var dx=fr*start.left+fl*start.right-rx+diffX;var dy=fb*start.top+ft*start.bottom-ry+diffY;var d=dx*fx+dy*fy;d=Math.max(d,0);if(fx!==0)d=Math.min(d,Math.abs((fr*region.left+fl*region.right-rx)/fx));if(fy!==0)d=Math.min(d,Math.abs((ft*region.bottom+fb*region.top-ry)/fy));var w=Math.round(d/Math.sqrt(com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr(fl-fr)+com.coremedia.cms.studio.imageeditor.ImageAreaBase.sqr((ft-
fb)/cr)));if(w>region.right-region.left)w=region.right-region.left;if(w<1)w=1;var h=Math.round(w/cr);if(h>region.bottom-region.top){h=region.bottom-region.top;if(h<1)h=1;w=Math.round(h*cr);if(w>region.right-region.left)w=region.right-region.left}var nl=Math.round(rx-w*fr);if(nl<region.left)nl=region.left;if(nl>region.right-w)nl=region.right-w;var nt=Math.round(ry-h*fb);if(nt<region.top)nt=region.top;if(nt>region.bottom-h)nt=region.bottom-h;var newBox={width:w,height:h,x:nl,y:nt};return newBox}function getUndoText(){var variantDisplayName=
com.coremedia.cms.studio.imageeditor.VariantKeyUtil.getVariantDisplayName(this.variantKey$lENc);return Ext.String.format(this.resourceManager.getString("com.coremedia.cms.studio.imageeditor.ImageEditor","IEC_history_crops_changed_variant"),variantDisplayName)}function getTransformValueExpression(config){if(!this.transformBindingValueExpression$lENc)this.transformBindingValueExpression$lENc=AS3.getBindable(config,"imageSettingsValueExpression").extendBy("transforms",AS3.getBindable(config,"variant").key);
return this.transformBindingValueExpression$lENc}return{extend:"com.coremedia.cms.studio.imageeditor.ImageArea",variantBoxedImageDimensionsValueExpression$lENc:null,cropBoundsValueExpression$lENc:null,actualCropBoundsValueExpression$lENc:null,cropTransformationValueExpression$lENc:null,transformBindingValueExpression$lENc:null,variantKey$lENc:null,constructor:CropImageAreaBase$,super$lENc:function(){com.coremedia.cms.studio.imageeditor.ImageArea.prototype.constructor.apply(this,arguments)},getCropBoundsValueExpression:getCropBoundsValueExpression,
getBoundsValueExpression:getBoundsValueExpression,getVariantBoxedImageDimensionsValueExpression:getVariantBoxedImageDimensionsValueExpression,computeRelativeCropFromFocusArea$lENc:computeRelativeCropFromFocusArea,centerCropAroundFocusPoint$lENc:centerCropAroundFocusPoint,getCropTransformationValueExpression:getCropTransformationValueExpression,createCropTransformationValueExpression:createCropTransformationValueExpression,getCropRatio:getCropRatio,makeNewBox:makeNewBox,getUndoText:getUndoText,getTransformValueExpression:getTransformValueExpression,
config:{backgroundColorValueExpression:null},statics:{createStoredCropBoundsValueExpression:createStoredCropBoundsValueExpression$static},requires:["Ext.String","com.coremedia.cms.studio.imageeditor.ImageArea","com.coremedia.cms.studio.imageeditor.ImageEditor_properties","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.cms.studio.imageeditor.ImageAreaBase","com.coremedia.cms.studio.imageeditor.StoredCropBoundsValueHolder","com.coremedia.cms.studio.imageeditor.VariantKeyUtil","com.coremedia.cms.studio.imageeditor.model.Rectangle",
"com.coremedia.cms.studio.imageeditor.util.ImageEditorUtil","com.coremedia.cms.studio.imageeditor.util.TransformationChain"]}});Ext.define("com.coremedia.cms.studio.imageeditor.ImageEditor_properties",{requires:["com.coremedia.icons.CoreIcons_properties"],"IEC_overview_title":"Overview","IEC_variants_big":"Big","IEC_variants_normal":"Normal","IEC_variants_thumbnail":"Thumbnail","IEC_labels_imageArea_ariaLabel":"Image variant","IEC_label_non_valid_variants":"The resolution for some of the crops is too low.","IEC_label_article_image":"Article Image","IEC_label_teaser_images":"Teaser Images","IEC_label_caption":"Caption","IEC_label_dimensions_original_size":"Original Size",
"IEC_label_dimensions_width":"Width","IEC_label_dimensions_height":"Height","IEC_label_reset":"Reset","IEC_action_undo_toolTip":"Undo","IEC_action_redo_toolTip":"Redo","IEC_action_deleteblob_toolTip":"Delete image from repository","IEC_action_viewcrops_on_toolTip":"Show crops","IEC_action_viewcrops_off_toolTip":"Show crops","IEC_action_resetmenu_tooltip":"Reset to Initial State","IEC_action_resetfocal_toolTip":"Maximize the size of the crops and reset all focal points","IEC_action_resetfocal_text":"Reset All Focal Points and Crops",
"IEC_action_resetimage_toolTip":"Reset to Initial State","IEC_action_resetimage_text":"Reset to Initial State","IEC_action_fliph_toolTip":"Flip horizontally","IEC_action_flipv_toolTip":"Flip vertically","IEC_label_rotate":"Rotate","IEC_label_left":"Left","IEC_label_right":"Right","IEC_label_align":"Straighten","IEC_label_color":"Change Exposure","IEC_label_brightness":"Brightness","IEC_label_contrast":"Contrast","IEC_action_resetvariant_toolTip":"Maximize the size of the crop and reset focal point",
"IEC_history_color_brightness":"Brightness changed","IEC_history_color_contrast":"Contrast changed","IEC_history_color_reset_brightness":"Brightness reset","IEC_history_color_reset_contrast":"Contrast reset","IEC_history_reflect_h":"Flipped horizontally","IEC_history_reflect_v":"Flipped vertically","IEC_history_rotated_crude":"Rotated by 90°","IEC_history_rotated_fine":"Fine rotation applied","IEC_history_rotated_reset":"Rotation reset","IEC_history_rotated_fine_reset":"Fine rotation reset","IEC_history_crops_changed_overview":"Focus area changed",
"IEC_history_crops_changed_variant":"Crop for {0} changed","IEC_history_crops_changed_focus_point":"Focus point changed","IEC_history_image_reseted":"Reset to Initial State","IEC_history_resetfocal":"All focal points and crops reset","IEC_action_enlarge_crop_on_toolTip":"Fit image to crop","IEC_action_enlarge_crop_off_toolTip":"Fit image to crop","IEC_action_enlarge_all_crops_on_toolTip":"Fit image to crop","IEC_action_enlarge_all_crops_off_toolTip":"Fit image to crop","IEC_history_enlarge_crop":"Fit variant {0} to crop",
"IEC_history_enlarge_crop_off":"Don't fit variant {0} to crop","IEC_history_enlarge_all_crops":"Fit all image variants to crop","IEC_history_enlarge_all_crops_off":"Don't fit any image variant to crop","IEC_history_reset":"Revert all changes","IEC_history_confirm_title":"Revert Changes","IEC_history_confirm_msg":"Do you really want to revert all changes which were applied to this picture since upload?","IEC_history_confirm_buttonText":"Revert","IEC_readonly_status_tooltip_text":"This content is readonly.",
"IEC_overview_crop_too_small_tooltip":"The resolution for some of the crops is too low.","IEC_crop_too_small_tooltip":"The resolution for the crop is too low.","IEC_cropsize_issue_text":"Image crop {0}:{1}","IEC_upload_button_text":"Upload Image...","IEC_upload_help_text":"i.e. with suffix png, jpeg or gif","IEC_focusArea_imageArea_name":"Focus Area"},function(){this.prototype["IEC_action_undo_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.undo;this.prototype["IEC_action_redo_iconCls"]=
com.coremedia.icons.CoreIcons_properties.INSTANCE.redo;this.prototype["IEC_action_deleteblob_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.trash_bin;this.prototype["IEC_action_viewcrops_on_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.view_crops;this.prototype["IEC_action_viewcrops_off_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.view_crops;this.prototype["IEC_action_resetfocal_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.reset_focal_points;
this.prototype["IEC_action_reset_to_initial_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.reset;this.prototype["IEC_action_fliph_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.reflect_vertical;this.prototype["IEC_action_flipv_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.reflect_horizontal;this.prototype["IEC_action_rotate_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.rotate;this.prototype["IEC_action_rotateLeft_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.rotate_left;
this.prototype["IEC_action_rotateRight_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.rotate_right;this.prototype["IEC_action_color_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.exposition;this.prototype["IEC_action_resetvariant_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.reset_focal_point;this.prototype["IEC_action_enlarge_crop_iconCls"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.enlarge_image;this.prototype["IEC_action_enlarge_all_crops_iconCls"]=
com.coremedia.icons.CoreIcons_properties.INSTANCE.enlarge_image;com.coremedia.cms.studio.imageeditor.ImageEditor_properties.INSTANCE=new com.coremedia.cms.studio.imageeditor.ImageEditor_properties});
//# sourceMappingURL=com.coremedia.ui.sdk__image-editor-components.js.map
