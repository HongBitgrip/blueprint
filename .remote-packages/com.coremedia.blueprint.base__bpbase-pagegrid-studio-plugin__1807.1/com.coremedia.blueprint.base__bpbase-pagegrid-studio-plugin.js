Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementInheritStateButton",function(PlacementInheritStateButton){function PlacementInheritStateButton$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(Ext.container.Container,{});var defaults_$1=AS3.cast(PlacementInheritStateButton,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var layout_HBox_26_5_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_26_5_$1,"pack","start");AS3.setBindable(config_$1,
"layout",layout_HBox_26_5_$1);var ui_IconDisplayField_29_5_$1=AS3.cast(com.coremedia.ui.components.IconDisplayField,{});ui_IconDisplayField_29_5_$1.tooltipOnValue=true;AS3.setBindable(ui_IconDisplayField_29_5_$1,"iconCls",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"labelIconCls")));ui_IconDisplayField_29_5_$1.hideEmptyLabel=true;var container_32_5_$1=AS3.cast(Ext.container.Container,{});var layout_VBox_34_9_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(container_32_5_$1,"layout",
layout_VBox_34_9_$1);var ui_IconDisplayField_37_9_$1=AS3.cast(com.coremedia.ui.components.IconDisplayField,{});AS3.setBindable(ui_IconDisplayField_37_9_$1,"iconPosition",net.jangaroo.ext.Exml.asString(com.coremedia.ui.components.IconDisplayField.ICON_POSITION_AFTER_VALUE));ui_IconDisplayField_37_9_$1.tooltipOnValue=true;AS3.setBindable(ui_IconDisplayField_37_9_$1,"iconCls","");AS3.setBindable(ui_IconDisplayField_37_9_$1,"value",AS3.getBindable(config,"label"));var button_41_9_$1=AS3.cast(Ext.button.Button,
{});button_41_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.LINK.getSkin());var ui_BindPropertyPlugin_43_13_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_43_13_$1.componentProperty="text";ui_BindPropertyPlugin_43_13_$1.bindTo=AS3.getBindable(config,"storingContentValueExpression").extendBy("name");button_41_9_$1.plugins=[ui_BindPropertyPlugin_43_13_$1];var editor_OpenInTabAction_48_13_$1=AS3.cast(com.coremedia.cms.editor.sdk.actions.OpenInTabAction,
{});AS3.setBindable(editor_OpenInTabAction_48_13_$1,"contentValueExpression",AS3.getBindable(config,"storingContentValueExpression"));button_41_9_$1.baseAction=new com.coremedia.cms.editor.sdk.actions.OpenInTabAction(editor_OpenInTabAction_48_13_$1);container_32_5_$1.items=[ui_IconDisplayField_37_9_$1,button_41_9_$1];config_$1.items=[ui_IconDisplayField_29_5_$1,container_32_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$EJQW(config_$1)}return{extend:"Ext.container.Container",alias:"widget.com.coremedia.blueprint.base.pagegrid.config.placementInheritStateButton",
constructor:PlacementInheritStateButton$,super$EJQW:function(){Ext.container.Container.prototype.constructor.apply(this,arguments)},config:{storingContentValueExpression:null,label:null,labelIconCls:null},requires:["Ext.button.Button","Ext.container.Container","Ext.layout.container.HBox","Ext.layout.container.VBox","com.coremedia.cms.editor.sdk.actions.OpenInTabAction","com.coremedia.ui.components.IconDisplayField","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin",
"net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementField",function(PlacementField){function PlacementField$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementFieldBase,{});var defaults_$1=AS3.cast(PlacementField,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"title","loading...");config_$1.itemId=net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"section").getName());var ui_BindPropertyPlugin_114_5_$1=
AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_114_5_$1.componentProperty="title";ui_BindPropertyPlugin_114_5_$1.bindTo=com.coremedia.blueprint.base.pagegrid.PlacementFieldBase.createLocalizedSectionValueExpression(config);var ui_BindPropertyPlugin_116_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_116_5_$1.componentProperty="ariaLabel";ui_BindPropertyPlugin_116_5_$1.bindTo=com.coremedia.blueprint.base.pagegrid.PlacementFieldBase.createLocalizedSectionValueExpression(config);
config_$1.plugins=[ui_BindPropertyPlugin_114_5_$1,ui_BindPropertyPlugin_116_5_$1];config_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;var container_120_5_$1=AS3.cast(Ext.container.Container,{});container_120_5_$1.itemId="inheritOrLockedContainer";var layout_HBox_122_9_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(container_120_5_$1,"layout",layout_HBox_122_9_$1);var ui_SwitchingContainer_125_9_$1=AS3.cast(com.coremedia.ui.components.SwitchingContainer,{});AS3.setBindable(ui_SwitchingContainer_125_9_$1,
"activeItemValueExpression",this.createInheritStateValueExpression(config));var component_127_13_$1=AS3.cast(Ext.Component,{});ui_SwitchingContainer_125_9_$1["defaultType"]=component_127_13_$1["xtype"];delete component_127_13_$1["xtype"];delete component_127_13_$1["xclass"];ui_SwitchingContainer_125_9_$1.defaults=component_127_13_$1;var pm_PlacementInheritStateButton_130_13_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementInheritStateButton,{});pm_PlacementInheritStateButton_130_13_$1.itemId=
"inherited";AS3.setBindable(pm_PlacementInheritStateButton_130_13_$1,"height",50);AS3.setBindable(pm_PlacementInheritStateButton_130_13_$1,"storingContentValueExpression",this.getStoringContentValueExpression(config));AS3.setBindable(pm_PlacementInheritStateButton_130_13_$1,"labelIconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","InheritPlacementAction_icon")));AS3.setBindable(pm_PlacementInheritStateButton_130_13_$1,
"label",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","PlacementState_inheritedFrom_text")));var pm_PlacementInheritStateButton_135_13_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementInheritStateButton,{});pm_PlacementInheritStateButton_135_13_$1.itemId="locked";AS3.setBindable(pm_PlacementInheritStateButton_135_13_$1,"height",50);AS3.setBindable(pm_PlacementInheritStateButton_135_13_$1,"storingContentValueExpression",
this.getStoringContentValueExpression(config));AS3.setBindable(pm_PlacementInheritStateButton_135_13_$1,"labelIconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","LockPlacementAction_icon")));AS3.setBindable(pm_PlacementInheritStateButton_135_13_$1,"label",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","PlacementState_lockedBy_text")));var ui_IconDisplayField_140_13_$1=
AS3.cast(com.coremedia.ui.components.IconDisplayField,{});ui_IconDisplayField_140_13_$1.itemId="missing";ui_IconDisplayField_140_13_$1.tooltipOnValue=true;AS3.setBindable(ui_IconDisplayField_140_13_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons","inherit")));AS3.setBindable(ui_IconDisplayField_140_13_$1,"value",this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","PlacementState_missing_text"));AS3.setBindable(ui_IconDisplayField_140_13_$1,
"tooltip",this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","PlacementState_missing_text_tooltip"));var container_145_13_$1=AS3.cast(Ext.container.Container,{});AS3.setBindable(container_145_13_$1,"hidden",true);container_145_13_$1.itemId="hidden";ui_SwitchingContainer_125_9_$1.lazyItems=[pm_PlacementInheritStateButton_130_13_$1,pm_PlacementInheritStateButton_135_13_$1,ui_IconDisplayField_140_13_$1,container_145_13_$1];container_120_5_$1.items=[ui_SwitchingContainer_125_9_$1];
var pm_PlacementLinkListPropertyField_151_5_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyField,{});AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"propertyFieldName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyFieldName")));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"structPropertyName",
net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"structPropertyName")));pm_PlacementLinkListPropertyField_151_5_$1.fallbackPropertyName=net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"fallbackPropertyName")?AS3.getBindable(config,"fallbackPropertyName"):undefined);AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"fallbackPropertyFieldName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"fallbackPropertyFieldName")));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,
"pageTreeRelation",AS3.getBindable(config,"pageTreeRelation"));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"section",AS3.getBindable(config,"section"));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"bindTo",this.getStoringContentValueExpression(config));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"forceReadOnlyValueExpression",this.getReadOnlyValueExpression());AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"columns",AS3.getBindable(config,"columns"));
AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"fields",AS3.getBindable(config,"fields"));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"linkType",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"linkType")));AS3.setBindable(pm_PlacementLinkListPropertyField_151_5_$1,"rowWidgetItems",AS3.getBindable(config,"rowWidgetItems"));var ui_AddItemsPlugin_166_9_$1=AS3.cast(com.coremedia.ui.plugins.AddItemsPlugin,{});AS3.setBindable(ui_AddItemsPlugin_166_9_$1,"recursive",true);
var tbSeparator_168_13_$1=AS3.cast(Ext.toolbar.Separator,{});var ui_IconButton_169_13_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_169_13_$1.itemId=net.jangaroo.ext.Exml.asString(PlacementField.INHERIT_BUTTON_ITEM_ID);ui_IconButton_169_13_$1.enableToggle=true;var pm_InheritPlacementAction_172_17_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementAction,{});AS3.setBindable(pm_InheritPlacementAction_172_17_$1,"bindTo",AS3.getBindable(config,"bindTo","DUMMY"));
AS3.setBindable(pm_InheritPlacementAction_172_17_$1,"storingContentValueExpression",this.getStoringContentValueExpression(config));AS3.setBindable(pm_InheritPlacementAction_172_17_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(pm_InheritPlacementAction_172_17_$1,"pageTreeRelation",AS3.getBindable(config,"pageTreeRelation"));AS3.setBindable(pm_InheritPlacementAction_172_17_$1,"section",AS3.getBindable(config,"section"));AS3.setBindable(pm_InheritPlacementAction_172_17_$1,
"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression","DUMMY"));ui_IconButton_169_13_$1.baseAction=new com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementAction(pm_InheritPlacementAction_172_17_$1);var ui_IconButton_180_13_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_180_13_$1.itemId=net.jangaroo.ext.Exml.asString(PlacementField.LOCK_BUTTON_ITEM_ID);ui_IconButton_180_13_$1.enableToggle=true;AS3.setBindable(ui_IconButton_180_13_$1,"iconCls",
net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","LockPlacementAction_icon")));AS3.setBindable(ui_IconButton_180_13_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","LockPlacementAction_tooltip")));AS3.setBindable(ui_IconButton_180_13_$1,"tooltip",this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField",
"LockPlacementAction_tooltip"));var editor_BindDisablePlugin_186_17_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.plugins.BindDisablePlugin,{});AS3.setBindable(editor_BindDisablePlugin_186_17_$1,"forceReadOnlyValueExpression",this.getReadOnlyValueExpression());var ui_BindPropertyPlugin_187_17_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_187_17_$1.componentProperty="pressed";ui_BindPropertyPlugin_187_17_$1.bidirectional=true;ui_BindPropertyPlugin_187_17_$1.ifUndefined=
false;ui_BindPropertyPlugin_187_17_$1.bindTo=AS3.getBindable(config,"bindTo","DUMMY").extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,AS3.getBindable(config,"propertyName"),com.coremedia.blueprint.base.pagegrid.PageGridConstants.LOCKED_PROPERTY_NAME);ui_IconButton_180_13_$1.plugins=[editor_BindDisablePlugin_186_17_$1,ui_BindPropertyPlugin_187_17_$1];var pm_PlacementFieldViewtypeSelector_193_13_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelector,{});
pm_PlacementFieldViewtypeSelector_193_13_$1.itemId=net.jangaroo.ext.Exml.asString(PlacementField.VIEWTYPE_SELECTOR_ITEM_ID);AS3.setBindable(pm_PlacementFieldViewtypeSelector_193_13_$1,"bindTo",this.getStoringContentValueExpression(config));AS3.setBindable(pm_PlacementFieldViewtypeSelector_193_13_$1,"referenceContentValueExpression",AS3.getBindable(config,"bindTo","DUMMY"));AS3.setBindable(pm_PlacementFieldViewtypeSelector_193_13_$1,"propertyName",net.jangaroo.ext.Exml.asString([AS3.getBindable(config,
"propertyName"),com.coremedia.blueprint.base.pagegrid.PageGridConstants.VIEWTYPE_PROPERTY_NAME].join(".")));var ui_BindPropertyPlugin_199_17_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_199_17_$1.componentProperty="disabled";ui_BindPropertyPlugin_199_17_$1.bindTo=this.getReadOnlyValueExpression();var editor_ShowIssuesPlugin_201_17_$1=AS3.cast(com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin,{});editor_ShowIssuesPlugin_201_17_$1.bindTo=AS3.getBindable(config,
"bindTo","DUMMY");AS3.setBindable(editor_ShowIssuesPlugin_201_17_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyFieldName")+"-viewtype"));pm_PlacementFieldViewtypeSelector_193_13_$1.plugins=[ui_BindPropertyPlugin_199_17_$1,editor_ShowIssuesPlugin_201_17_$1];pm_PlacementFieldViewtypeSelector_193_13_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;AS3.setBindable(ui_AddItemsPlugin_166_9_$1,"items",[tbSeparator_168_13_$1,ui_IconButton_169_13_$1,ui_IconButton_180_13_$1,
pm_PlacementFieldViewtypeSelector_193_13_$1]);var ui_IconButton_207_13_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_207_13_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField.PASTE_BUTTON_ITEM_ID);AS3.setBindable(ui_AddItemsPlugin_166_9_$1,"after",[ui_IconButton_207_13_$1]);pm_PlacementLinkListPropertyField_151_5_$1.plugins=[ui_AddItemsPlugin_166_9_$1];pm_PlacementLinkListPropertyField_151_5_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;
config_$1.items=[container_120_5_$1,pm_PlacementLinkListPropertyField_151_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$kSg2(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.PlacementFieldBase",alias:"widget.com.coremedia.blueprint.base.pagegrid.config.placementField",constructor:PlacementField$,super$kSg2:function(){com.coremedia.blueprint.base.pagegrid.PlacementFieldBase.prototype.constructor.apply(this,arguments)},config:{pageTreeRelation:null,section:null,linkType:null,
rowWidgetItems:null,propertyName:null,propertyFieldName:null,fallbackPropertyName:null,fallbackPropertyFieldName:null,structPropertyName:null,showLocal:false,fields:null,columns:null},statics:{LINK_LINK_PROPERTY_FIELD_ITEM_ID:"linkListPropertyField",INHERIT_BUTTON_ITEM_ID:"inheritButton",LOCK_BUTTON_ITEM_ID:"lockButton",VIEWTYPE_SELECTOR_ITEM_ID:"viewtypeSelector"},requires:["Ext.Component","Ext.container.Container","Ext.layout.container.HBox","Ext.toolbar.Separator","com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties",
"com.coremedia.blueprint.base.pagegrid.PlacementFieldBase","com.coremedia.cap.content.ContentPropertyNames","com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField","com.coremedia.cms.editor.sdk.premular.fields.plugins.BindDisablePlugin","com.coremedia.cms.editor.sdk.validation.ShowIssuesPlugin","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.components.IconButton","com.coremedia.ui.components.IconDisplayField","com.coremedia.ui.components.SwitchingContainer","com.coremedia.ui.plugins.AddItemsPlugin",
"com.coremedia.ui.plugins.BindPropertyPlugin","net.jangaroo.ext.Exml"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants","com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelector","com.coremedia.blueprint.base.pagegrid.PlacementInheritStateButton","com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyField","com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementAction"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.configuration.IPageGridConfiguration",function(IPageGridConfiguration){return{}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelector",function(PlacementFieldViewtypeSelector){var DEFAULT_VIEW_TYPE_BLOCK$static;function DEFAULT_VIEW_TYPE_BLOCK$static_(){DEFAULT_VIEW_TYPE_BLOCK$static=new com.coremedia.ui.models.bem.BEMBlock("cm-placement-field-default-viewtype")}var TPL$static;function TPL$static_(){TPL$static=['\x3ctpl for\x3d"."\x3e','  \x3cdiv class\x3d"'+com.coremedia.ui.components.LocalComboBox.COMBO_BOX_TPL_ITEM_CLASS+'\x3ctpl if\x3d"!bean"\x3e '+
DEFAULT_VIEW_TYPE_BLOCK$static+'\x3c/tpl\x3e"\x3e',"    {localizedName}","  \x3c/div\x3e","\x3c/tpl\x3e"]}function PlacementFieldViewtypeSelector$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelectorBase,{});var defaults_$1=AS3.cast(PlacementFieldViewtypeSelector,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"displayField","localizedNameUnencoded");config_$1.valueField="bean";AS3.setBindable(config_$1,
"emptyText",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.components.viewtypes.Viewtypes","_text")));config_$1.flex=1;config_$1.tpl=TPL$static;var ui_BindVisibilityPlugin_57_5_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_57_5_$1.bindTo=this.getAvailableViewTypesVE(config);AS3.setBindable(ui_BindVisibilityPlugin_57_5_$1,"transformer",function(items){return items&&items.length>1});var ui_AddQuickTipPlugin_59_5_$1=
AS3.cast(com.coremedia.ui.plugins.AddQuickTipPlugin,{});AS3.setBindable(ui_AddQuickTipPlugin_59_5_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","Placements_viewtype_tooltip")));var ui_BindListPlugin_61_5_$1=AS3.cast(com.coremedia.ui.plugins.BindListPlugin,{});AS3.setBindable(ui_BindListPlugin_61_5_$1,"bindTo",this.getAvailableViewTypesVE(config));var data_AutoField_63_9_$1=AS3.cast(Ext.data.field.Field,{});data_AutoField_63_9_$1.name=
"bean";data_AutoField_63_9_$1.mapping="";var ui_DataField_67_9_$1=AS3.cast(com.coremedia.ui.store.DataField,{});ui_DataField_67_9_$1.name="localizedNameUnencoded";ui_DataField_67_9_$1.encode=false;ui_DataField_67_9_$1.mapping="";ui_DataField_67_9_$1["convert"]=com.coremedia.blueprint.base.components.viewtypes.ViewtypeLocalizationUtil.localizeText;var ui_DataField_71_9_$1=AS3.cast(com.coremedia.ui.store.DataField,{});ui_DataField_71_9_$1.name="localizedName";ui_DataField_71_9_$1.mapping="";ui_DataField_71_9_$1["convert"]=
com.coremedia.blueprint.base.components.viewtypes.ViewtypeLocalizationUtil.localizeText;AS3.setBindable(ui_BindListPlugin_61_5_$1,"fields",[data_AutoField_63_9_$1,ui_DataField_67_9_$1,ui_DataField_71_9_$1]);var ui_BindPropertyPlugin_76_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_76_5_$1.bindTo=this.getViewtypeVE(config);ui_BindPropertyPlugin_76_5_$1.bidirectional=true;var ui_BEMPlugin_78_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_78_5_$1,
"block","cm-placement-field-viewtype-selector");config_$1.plugins=[ui_BindVisibilityPlugin_57_5_$1,ui_AddQuickTipPlugin_59_5_$1,ui_BindListPlugin_61_5_$1,ui_BindPropertyPlugin_76_5_$1,ui_BEMPlugin_78_5_$1];config_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$AKC0(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelectorBase",alias:"widget.com.coremedia.blueprint.base.pagegrid.config.placementFieldViewtypeSelector",
constructor:PlacementFieldViewtypeSelector$,super$AKC0:function(){com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelectorBase.prototype.constructor.apply(this,arguments)},config:{bindTo:null,referenceContentValueExpression:null,propertyName:null},statics:{DEFAULT_VIEW_TYPE_BLOCK:undefined,TPL:undefined,__initStatics__:function(){DEFAULT_VIEW_TYPE_BLOCK$static_();TPL$static_()}},requires:["Ext.data.field.Field","com.coremedia.blueprint.base.components.viewtypes.ViewtypeLocalizationUtil",
"com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties","com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelectorBase","com.coremedia.ui.components.LocalComboBox","com.coremedia.ui.models.bem.BEMBlock","com.coremedia.ui.plugins.AddQuickTipPlugin","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindListPlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.plugins.BindVisibilityPlugin","com.coremedia.ui.store.DataField","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.LayoutLocalizationUtil",function(LayoutLocalizationUtil){function localizeText$static(content){if(content===null)return null;return com.coremedia.blueprint.base.components.localization.ContentLocalizationUtil.localize(content,"_text",mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.blueprint.base.pagegrid.PageGridLayouts").content,resolveLayoutName$static)}function localizeDescription$static(content){if(content===null)return null;
return com.coremedia.blueprint.base.components.localization.ContentLocalizationUtil.localize(content,"_description",mx.resources.ResourceManager.getInstance().getResourceBundle(null,"com.coremedia.blueprint.base.pagegrid.PageGridLayouts").content,resolveLayoutName$static,resolveLayoutDescription$static)}function resolveLayoutName$static(layoutContent){return com.coremedia.ui.util.ObjectUtils.getPropertyAt(layoutContent,[com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,"settings","name"])}
function resolveLayoutDescription$static(layoutContent){return com.coremedia.ui.util.ObjectUtils.getPropertyAt(layoutContent,[com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,"settings","description"])}function LayoutLocalizationUtil$(){}return{constructor:LayoutLocalizationUtil$,statics:{localizeText:localizeText$static,localizeDescription:localizeDescription$static},requires:["com.coremedia.blueprint.base.components.localization.ContentLocalizationUtil","com.coremedia.blueprint.base.pagegrid.PageGridLayouts_properties",
"com.coremedia.cap.content.ContentPropertyNames","com.coremedia.ui.util.ObjectUtils","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementActionBase",function(InheritPlacementActionBase){function InheritPlacementActionBase$(config){if(arguments.length<=0)config=null;this.bindTo$HVfl=AS3.getBindable(config,"bindTo");this.storingContentValueExpression$HVfl=AS3.getBindable(config,"storingContentValueExpression");this.propertyName$HVfl=AS3.getBindable(config,"propertyName");this.forceReadOnlyValueExpression$HVfl=AS3.getBindable(config,"forceReadOnlyValueExpression");
this.pageTreeRelation$HVfl=AS3.getBindable(config,"pageTreeRelation");this.section$HVfl=AS3.getBindable(config,"section");this.super$HVfl(AS3.cast(com.coremedia.ui.actions.DependencyTrackedToggleAction,Ext.apply({iconCls:mx.resources.ResourceManager.getInstance().getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","InheritPlacementAction_icon"),text:mx.resources.ResourceManager.getInstance().getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","InheritPlacementAction_text"),
tooltip:mx.resources.ResourceManager.getInstance().getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","InheritPlacementAction_tooltip"),tooltipPressed:mx.resources.ResourceManager.getInstance().getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","InheritPlacementAction_tooltipPressed")},config)))}function isInherit(){var formContent=AS3.as(this.bindTo$HVfl.getValue(),com.coremedia.cap.content.Content);var storingContent=AS3.as(this.storingContentValueExpression$HVfl.getValue(),
com.coremedia.cap.content.Content);if(formContent===undefined||storingContent===undefined)return undefined;return formContent!==storingContent}function handleUnpress(){this.section$HVfl.load(AS3.bind(this,"createLocalPlacementDefinition$HVfl"))}function createLocalPlacementDefinition(){var properties=this.bindTo$HVfl.extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES).getValue();if(!properties||!properties.getState().exists)return;var contentProperty=String(this.propertyName$HVfl).split(".")[0];
var mainStruct=properties.get(contentProperty);if(!mainStruct||!mainStruct.getState().exists)return;var placementsBaseStruct=mainStruct.instantiate(com.coremedia.blueprint.base.pagegrid.PageGridConstants.NEW_PLACEMENTS_BASE_PROPERTY);if(!placementsBaseStruct)return;var placementsStruct=placementsBaseStruct.instantiate(com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENTS_LIST_PROPERTY);if(!placementsStruct)return;var extendedItems=this.oldExtendedItems$HVfl||this.structListToArrayOfObject$HVfl(this.storingContentValueExpression$HVfl.extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,
this.propertyName$HVfl,com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY).getValue());var viewtype=this.oldViewtype$HVfl||this.storingContentValueExpression$HVfl.extendBy(com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,this.propertyName$HVfl,com.coremedia.blueprint.base.pagegrid.PageGridConstants.VIEWTYPE_PROPERTY_NAME).getValue();this.oldExtendedItems$HVfl=null;this.oldViewtype$HVfl=null;if(!extendedItems)extendedItems=[];var newPlacementStruct=placementsStruct.instantiate(this.section$HVfl.getUriPath());
newPlacementStruct.getType().addStructListProperty(com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY,extendedItems);if(viewtype){var viewtypeType=com.coremedia.cap.common.SESSION.getConnection().getContentRepository().getContentType("CMViewtype");newPlacementStruct.getType().addLinkProperty(com.coremedia.blueprint.base.pagegrid.PageGridConstants.VIEWTYPE_PROPERTY_NAME,viewtypeType,viewtype)}}function handlePress(){this.removeLocalPlacementDefinition$HVfl()}
function removeLocalPlacementDefinition(){var formContent=AS3.as(this.bindTo$HVfl.getValue(),com.coremedia.cap.content.Content);var properties=formContent.getProperties();var propPath=String(this.propertyName$HVfl).split(".");var itemToRemove=propPath.pop();var shortenedPath=propPath.join(".");var struct=AS3.as(com.coremedia.ui.util.ObjectUtils.getPropertyAt(properties,shortenedPath),com.coremedia.cap.struct.Struct);this.oldExtendedItems$HVfl=null;this.oldViewtype$HVfl=null;if(struct&&struct.getType().getPropertyNames().indexOf(itemToRemove)!==
-1){var oldPlacement=AS3.as(struct.get(itemToRemove),com.coremedia.cap.struct.Struct);if(oldPlacement){this.oldExtendedItems$HVfl=this.structListToArrayOfObject$HVfl(oldPlacement.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY));this.oldViewtype$HVfl=oldPlacement.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.VIEWTYPE_PROPERTY_NAME)}struct.getType().removeProperty(itemToRemove)}else com.coremedia.ui.logging.Logger.error("Could not delete local placement definition in "+
this.propertyName$HVfl+" for content "+formContent.getId())}function structListToArrayOfObject(structList){if(!structList)return structList;return structList.map(function(struct){return struct.getType().getPropertyNames().filter(function(propertyName){return struct.get(propertyName)!==null}).map(function(propertyName){var object={};object[propertyName]=struct.get(propertyName);return object}).reduce(function(acc,current){return Ext.apply(acc,current)},{})})}function calculateDisabled(){if(this.forceReadOnlyValueExpression$HVfl&&
this.forceReadOnlyValueExpression$HVfl.getValue())return true;var formContent=this.bindTo$HVfl.getValue();if(formContent===undefined)return undefined;var readOnly=com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.isReadOnly(formContent);if(readOnly!==false)return readOnly;var placementStructPropertyName=String(this.propertyName$HVfl).split(".")[0];var pageDeclaringSection=com.coremedia.blueprint.base.pagegrid.PageGridUtil.computePageDeclaringSection(formContent,this.pageTreeRelation$HVfl,placementStructPropertyName,
this.section$HVfl);switch(pageDeclaringSection){case undefined:return undefined;case null:return false;case formContent:return true}var declaredSection=com.coremedia.blueprint.base.pagegrid.PageGridUtil.getPlacementUnchecked(pageDeclaringSection,placementStructPropertyName,this.section$HVfl);return com.coremedia.blueprint.base.pagegrid.PageGridUtil.isLockingChildren(declaredSection)}function calculatePressed(){return this.isInherit$HVfl()}return{extend:"com.coremedia.ui.actions.DependencyTrackedToggleAction",
bindTo$HVfl:null,storingContentValueExpression$HVfl:null,propertyName$HVfl:null,forceReadOnlyValueExpression$HVfl:null,pageTreeRelation$HVfl:null,section$HVfl:null,oldExtendedItems$HVfl:null,oldViewtype$HVfl:null,constructor:InheritPlacementActionBase$,super$HVfl:function(){com.coremedia.ui.actions.DependencyTrackedToggleAction.prototype.constructor.apply(this,arguments)},isInherit$HVfl:isInherit,handleUnpress:handleUnpress,createLocalPlacementDefinition$HVfl:createLocalPlacementDefinition,handlePress:handlePress,
removeLocalPlacementDefinition$HVfl:removeLocalPlacementDefinition,structListToArrayOfObject$HVfl:structListToArrayOfObject,calculateDisabled:calculateDisabled,calculatePressed:calculatePressed,requires:["Ext","com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties","com.coremedia.cap.common.SESSION","com.coremedia.cap.content.Content","com.coremedia.cap.content.ContentPropertyNames","com.coremedia.cap.struct.Struct","com.coremedia.cms.editor.sdk.util.PropertyEditorUtil","com.coremedia.ui.actions.DependencyTrackedToggleAction",
"com.coremedia.ui.logging.Logger","com.coremedia.ui.util.ObjectUtils","mx.resources.ResourceManager"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants","com.coremedia.blueprint.base.pagegrid.PageGridUtil"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementAction",function(InheritPlacementAction){function InheritPlacementAction$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementActionBase,{});var defaults_$1=AS3.cast(InheritPlacementAction,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$tUv_(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementActionBase",
constructor:InheritPlacementAction$,super$tUv_:function(){com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementActionBase.prototype.constructor.apply(this,arguments)},config:{bindTo:null,pageTreeRelation:null,storingContentValueExpression:null,forceReadOnlyValueExpression:null,section:null,propertyName:null},requires:["com.coremedia.blueprint.base.pagegrid.actions.InheritPlacementActionBase","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.LayoutPreviewRenderer",function(LayoutPreviewRenderer){function BLOCK$static_(){LayoutPreviewRenderer.BLOCK=new com.coremedia.ui.models.bem.BEMBlock("cm-layout-preview")}function ELEMENT_CELL$static_(){LayoutPreviewRenderer.ELEMENT_CELL=LayoutPreviewRenderer.BLOCK.createElement("cell")}function ELEMENT_CELL_HIGHLIGHTED$static_(){LayoutPreviewRenderer.ELEMENT_CELL_HIGHLIGHTED=LayoutPreviewRenderer.BLOCK.createElement("cell-highlighted")}function ELEMENT_CELL_READ_ONLY$static_(){LayoutPreviewRenderer.ELEMENT_CELL_READ_ONLY=
LayoutPreviewRenderer.BLOCK.createElement("cell-read-only")}var LAYOUT_PREVIEW_ICON_TEMPLATE$static;function LAYOUT_PREVIEW_ICON_TEMPLATE$static_(){LAYOUT_PREVIEW_ICON_TEMPLATE$static=new Ext.XTemplate('\x3ctable class\x3d"'+LayoutPreviewRenderer.BLOCK+'"\x3e','\x3ctpl for\x3d"."\x3e',"\x3ctr\x3e",'\x3ctpl for\x3d"."\x3e','\x3ctd class\x3d"','\x3ctpl if\x3d"readOnly"\x3e'+LayoutPreviewRenderer.ELEMENT_CELL_READ_ONLY,'\x3ctpl elseif\x3d"highlighted"\x3e'+LayoutPreviewRenderer.ELEMENT_CELL_HIGHLIGHTED,
"\x3ctpl else\x3e"+LayoutPreviewRenderer.ELEMENT_CELL+"\x3c/tpl\x3e",'" ','\x3ctpl if\x3d"rowspan"\x3erowSpan\x3d"{rowspan}" \x3c/tpl\x3e','\x3ctpl if\x3d"colspan"\x3ecolSpan\x3d"{colspan}" \x3c/tpl\x3e','width\x3d"{width}%" height\x3d"{height}%" {sectionName:unsafeQtip}\x3e\x3c/td\x3e',"\x3c/tpl\x3e","\x3c/tr\x3e","\x3c/tpl\x3e","\x3c/table\x3e")}function getLayoutPreviewIconRendererForSection$static(section,bindTo,propertyName,tooltips){return function(layoutContent){return LayoutPreviewRenderer.renderLayoutPreviewIcon(layoutContent,
bindTo.getValue(),propertyName,tooltips,section)}}function renderLayoutPreviewIcon$static(layoutContent,storingContent,propertyName,tooltips,highlightSection){if(arguments.length<=4)highlightSection=null;if(layoutContent===undefined)return undefined;if(layoutContent===null)return"";if(storingContent===undefined)return undefined;var storingContentType=storingContent.getType();if(storingContentType===undefined)return undefined;var storingContentTypeName=storingContentType.getName();var properties=layoutContent.getProperties();
if(properties){var layout=properties.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.SETTINGS_PROPERTY);if(layout){var items=layout.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEMS_PROPERTY);if(items){var rows=layout.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ROW_COUNT_PROPERTY);var returnUndefined=false;var templateModel=[];for(var i=0;i<rows;i++)templateModel.push([]);for(var $1=0;$1<items.length;++$1){var rowItem=items[$1];var rowIndex=
parseInt(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_ROW_PROPERTY),10)-1;if(rowIndex>=0&&rowIndex<rows){var section=AS3.as(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.SECTION_PROPERTY_NAME),com.coremedia.cap.content.Content);if(section){var sectionContentName=section.getName();if(sectionContentName===undefined)returnUndefined=true;else{var sectionName=com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.getLocalizedLabel(storingContentTypeName,
propertyName+"-"+sectionContentName);var readOnly=rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_EDITABLE_PROPERTY)===false;var item={readOnly:readOnly,highlighted:highlightSection===null||section===highlightSection,rowspan:parseInt(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_ROWSPAN_PROPERTY),10),col:parseInt(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_COL_PROPERTY),10),colspan:parseInt(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_COLSPAN_PROPERTY),
10),width:com.coremedia.ui.util.EncodingUtil.encodeForHTML(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_WIDTH_PROPERTY)),height:com.coremedia.ui.util.EncodingUtil.encodeForHTML(rowItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_HEIGHT_PROPERTY)),sectionName:!readOnly&&tooltips?com.coremedia.ui.util.EncodingUtil.encodeForHTML(com.coremedia.ui.util.EncodingUtil.encodeForHTML(sectionName)):""};var row=templateModel[rowIndex];row.push(item)}}}}if(returnUndefined)return undefined;
for(var $2=0;$2<templateModel.length;++$2){var unsortedRow=templateModel[$2];unsortedRow.sort(compareCol$static)}return LAYOUT_PREVIEW_ICON_TEMPLATE$static.apply(templateModel)}}}return undefined}function compareCol$static(item1,item2){return item1.col-item2.col}function LayoutPreviewRenderer$(){}return{constructor:LayoutPreviewRenderer$,statics:{BLOCK:undefined,ELEMENT_CELL:undefined,ELEMENT_CELL_HIGHLIGHTED:undefined,ELEMENT_CELL_READ_ONLY:undefined,LAYOUT_PREVIEW_ICON_TEMPLATE:undefined,getLayoutPreviewIconRendererForSection:getLayoutPreviewIconRendererForSection$static,
renderLayoutPreviewIcon:renderLayoutPreviewIcon$static,__initStatics__:function(){BLOCK$static_();ELEMENT_CELL$static_();ELEMENT_CELL_HIGHLIGHTED$static_();ELEMENT_CELL_READ_ONLY$static_();LAYOUT_PREVIEW_ICON_TEMPLATE$static_()}},requires:["Ext.XTemplate","com.coremedia.cap.content.Content","com.coremedia.cms.editor.sdk.util.PropertyEditorUtil","com.coremedia.ui.models.bem.BEMBlock","com.coremedia.ui.util.EncodingUtil"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField",function(PageGridPropertyField){var PLACEMENT_CONTAINER_CLASS_BLOCK$static;function PLACEMENT_CONTAINER_CLASS_BLOCK$static_(){PLACEMENT_CONTAINER_CLASS_BLOCK$static=new com.coremedia.ui.models.bem.BEMBlock("cm-placements-container")}var PLACEMENT_CONTAINER_CLASS_FIELD_ITEM$static;function PLACEMENT_CONTAINER_CLASS_FIELD_ITEM$static_(){PLACEMENT_CONTAINER_CLASS_FIELD_ITEM$static=PLACEMENT_CONTAINER_CLASS_BLOCK$static.createElement("field")}
function PageGridPropertyField$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PageGridPropertyFieldBase,{});var defaults_$1=AS3.cast(PageGridPropertyField,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var editor_SetPropertyLabelPlugin_108_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.plugins.SetPropertyLabelPlugin,{});editor_SetPropertyLabelPlugin_108_5_$1.bindTo=AS3.getBindable(config,"bindTo");AS3.setBindable(editor_SetPropertyLabelPlugin_108_5_$1,
"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));var editor_PropertyFieldPlugin_110_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.PropertyFieldPlugin,{});AS3.setBindable(editor_PropertyFieldPlugin_110_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));config_$1.plugins=[editor_SetPropertyLabelPlugin_108_5_$1,editor_PropertyFieldPlugin_110_5_$1];var editor_PropertyFieldLabel_113_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.PropertyFieldLabel,
{});AS3.setBindable(editor_PropertyFieldLabel_113_5_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(editor_PropertyFieldLabel_113_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));editor_PropertyFieldLabel_113_5_$1.hideLabel=AS3.getBindable(config,"hideLabel");AS3.setBindable(editor_PropertyFieldLabel_113_5_$1,"fieldLabel",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField",
"PageLayout_title")));var pm_PageGridLayoutSelector_118_5_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelector,{});pm_PageGridLayoutSelector_118_5_$1.itemId=net.jangaroo.ext.Exml.asString(PageGridPropertyField.LAYOUT_SELECTOR_ITEM_ID);AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"layoutPaths",AS3.getBindable(config,"layoutPaths"));AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"structPropertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));
AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"propertyName",net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridUtil.getLayoutPropertyPath(AS3.getBindable(config,"propertyName"))));AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"fallbackForNullValueExpression",com.coremedia.blueprint.base.pagegrid.PageGridUtil.createDefaultLayoutValueExpression(AS3.getBindable(config,"bindTo"),
AS3.getBindable(config,"propertyName")));AS3.setBindable(pm_PageGridLayoutSelector_118_5_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));var container_125_5_$1=AS3.cast(Ext.container.Container,{});container_125_5_$1.itemId=net.jangaroo.ext.Exml.asString(PageGridPropertyField.PLACEMENTS_CONTAINER_ITEM_ID);var ui_BindItemsPlugin_127_9_$1=AS3.cast(com.coremedia.ui.plugins.BindItemsPlugin,{});AS3.setBindable(ui_BindItemsPlugin_127_9_$1,"valueExpression",this.createPlacementsConfigListValueExpression());
AS3.setBindable(ui_BindItemsPlugin_127_9_$1,"reuseComponents",true);var ui_BEMPlugin_129_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_129_9_$1,"block",PLACEMENT_CONTAINER_CLASS_BLOCK$static);AS3.setBindable(ui_BEMPlugin_129_9_$1,"defaultElement",PLACEMENT_CONTAINER_CLASS_FIELD_ITEM$static);container_125_5_$1.plugins=[ui_BindItemsPlugin_127_9_$1,ui_BEMPlugin_129_9_$1];var pm_PlacementField_133_9_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementField,{});
AS3.setBindable(pm_PlacementField_133_9_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(pm_PlacementField_133_9_$1,"showLocal",AS3.getBindable(config,"showLocal"));AS3.setBindable(pm_PlacementField_133_9_$1,"structPropertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(pm_PlacementField_133_9_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));AS3.setBindable(pm_PlacementField_133_9_$1,"pageTreeRelation",
AS3.getBindable(config,"pageTreeRelation")||com.coremedia.blueprint.base.tree.cmNavigationTreeRelation);AS3.setBindable(pm_PlacementField_133_9_$1,"columns",AS3.getBindable(config,"columns"));AS3.setBindable(pm_PlacementField_133_9_$1,"fields",AS3.getBindable(config,"fields"));AS3.setBindable(pm_PlacementField_133_9_$1,"linkType",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"placementLinkType")));AS3.setBindable(pm_PlacementField_133_9_$1,"rowWidgetItems",AS3.getBindable(config,"placementRowWidgetItems"));
container_125_5_$1["defaultType"]=pm_PlacementField_133_9_$1["xtype"];delete pm_PlacementField_133_9_$1["xtype"];delete pm_PlacementField_133_9_$1["xclass"];container_125_5_$1.defaults=pm_PlacementField_133_9_$1;var layout_VBox_144_9_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_144_9_$1,"align","stretch");AS3.setBindable(container_125_5_$1,"layout",layout_VBox_144_9_$1);config_$1.items=[editor_PropertyFieldLabel_113_5_$1,pm_PageGridLayoutSelector_118_5_$1,container_125_5_$1];
var layout_VBox_150_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_150_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_VBox_150_5_$1);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$j9cZ(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.PageGridPropertyFieldBase",metadata:{"":["PublicApi"]},alias:"widget.com.coremedia.blueprint.base.pagegrid.config.pageGridPropertyField",constructor:PageGridPropertyField$,super$j9cZ:function(){com.coremedia.blueprint.base.pagegrid.PageGridPropertyFieldBase.prototype.constructor.apply(this,
arguments)},config:{hideLabel:false,bindTo:null,forceReadOnlyValueExpression:null,pageTreeRelation:null,placementRowWidgetItems:null,propertyName:null,fallbackPropertyName:null,showLocal:false,layoutPaths:null,fields:null,columns:null},statics:{LAYOUT_SELECTOR_ITEM_ID:"layoutSelector",PLACEMENTS_CONTAINER_ITEM_ID:"placementsContainer",PLACEMENT_CONTAINER_CLASS_BLOCK:undefined,PLACEMENT_CONTAINER_CLASS_FIELD_ITEM:undefined,__initStatics__:function(){PLACEMENT_CONTAINER_CLASS_BLOCK$static_();PLACEMENT_CONTAINER_CLASS_FIELD_ITEM$static_()}},
requires:["Ext.container.Container","Ext.layout.container.VBox","com.coremedia.blueprint.base.pagegrid.PageGridPropertyFieldBase","com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties","com.coremedia.cms.editor.sdk.premular.PropertyFieldLabel","com.coremedia.cms.editor.sdk.premular.PropertyFieldPlugin","com.coremedia.cms.editor.sdk.premular.fields.plugins.SetPropertyLabelPlugin","com.coremedia.ui.models.bem.BEMBlock","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindItemsPlugin",
"net.jangaroo.ext.Exml"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelector","com.coremedia.blueprint.base.pagegrid.PageGridUtil","com.coremedia.blueprint.base.pagegrid.PlacementField","com.coremedia.blueprint.base.tree.cmNavigationTreeRelation"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyField",function(PlacementLinkListPropertyField){function PlacementLinkListPropertyField$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase,{});var defaults_$1=AS3.cast(PlacementLinkListPropertyField,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var ui_AddItemsPlugin_58_5_$1=AS3.cast(com.coremedia.ui.plugins.AddItemsPlugin,
{});AS3.setBindable(ui_AddItemsPlugin_58_5_$1,"onlyIf",AS3.bind(this,"isFallbackConfigured"));var editor_LinkListPropertyField_60_9_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField,{});editor_LinkListPropertyField_60_9_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase.FALLBACK_CONTAINER);AS3.setBindable(editor_LinkListPropertyField_60_9_$1,"propertyName",net.jangaroo.ext.Exml.asString(config.fallbackPropertyName));
AS3.setBindable(editor_LinkListPropertyField_60_9_$1,"propertyFieldName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"fallbackPropertyFieldName")));AS3.setBindable(editor_LinkListPropertyField_60_9_$1,"linkListWrapper",this.getFallbackStructContentLinkListWrapper(config));var ui_BindVisibilityPlugin_65_13_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_65_13_$1.bindTo=this.getActiveItemValueExpression(config,com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase.FALLBACK_CONTAINER);
editor_LinkListPropertyField_60_9_$1.plugins=[ui_BindVisibilityPlugin_65_13_$1];editor_LinkListPropertyField_60_9_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;var editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.PropertyFieldAnnotatedLinkListWidget,{});AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1,"propertyNameWithoutIndex",
net.jangaroo.ext.Exml.asString(config.fallbackPropertyName+"."+com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY));AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1.items=AS3.getBindable(config,"rowWidgetItems");AS3.setBindable(editor_LinkListPropertyField_60_9_$1,"rowWidget",editor_PropertyFieldAnnotatedLinkListWidget_68_13_$1);
AS3.setBindable(ui_AddItemsPlugin_58_5_$1,"items",[editor_LinkListPropertyField_60_9_$1]);config_$1.plugins=[ui_AddItemsPlugin_58_5_$1];config_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;var editor_LinkListPropertyField_78_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField,{});editor_LinkListPropertyField_78_5_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase.DEFAULT_CONTAINER);AS3.setBindable(editor_LinkListPropertyField_78_5_$1,
"propertyName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")));AS3.setBindable(editor_LinkListPropertyField_78_5_$1,"propertyFieldName",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyFieldName")));AS3.setBindable(editor_LinkListPropertyField_78_5_$1,"linkListWrapper",this.getStructContentLinkListWrapper(config));var ui_BindVisibilityPlugin_83_9_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_83_9_$1.bindTo=this.getActiveItemValueExpression(config,
com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase.DEFAULT_CONTAINER);editor_LinkListPropertyField_78_5_$1.plugins=[ui_BindVisibilityPlugin_83_9_$1];editor_LinkListPropertyField_78_5_$1["plugins$at"]=net.jangaroo.ext.Exml.APPEND;var editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.PropertyFieldAnnotatedLinkListWidget,{});AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1,"bindTo",AS3.getBindable(config,"bindTo"));
AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1,"propertyNameWithoutIndex",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"propertyName")+"."+com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY));AS3.setBindable(editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1.items=AS3.getBindable(config,"rowWidgetItems");
AS3.setBindable(editor_LinkListPropertyField_78_5_$1,"rowWidget",editor_PropertyFieldAnnotatedLinkListWidget_86_9_$1);config_$1.items=[editor_LinkListPropertyField_78_5_$1];var layout_VBox_94_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_94_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_VBox_94_5_$1);var editor_LinkListPropertyField_97_5_$1=AS3.cast(com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField,{});editor_LinkListPropertyField_97_5_$1.hideLabel=
true;editor_LinkListPropertyField_97_5_$1.labelAlign="top";AS3.setBindable(editor_LinkListPropertyField_97_5_$1,"bindTo",AS3.getBindable(config,"bindTo"));AS3.setBindable(editor_LinkListPropertyField_97_5_$1,"linkType",net.jangaroo.ext.Exml.asString(AS3.getBindable(config,"linkType")));AS3.setBindable(editor_LinkListPropertyField_97_5_$1,"forceReadOnlyValueExpression",AS3.getBindable(config,"forceReadOnlyValueExpression"));AS3.setBindable(editor_LinkListPropertyField_97_5_$1,"columns",AS3.getBindable(config,
"columns"));AS3.setBindable(editor_LinkListPropertyField_97_5_$1,"fields",AS3.getBindable(config,"fields"));config_$1["defaultType"]=editor_LinkListPropertyField_97_5_$1["xtype"];delete editor_LinkListPropertyField_97_5_$1["xtype"];delete editor_LinkListPropertyField_97_5_$1["xclass"];config_$1.defaults=editor_LinkListPropertyField_97_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$c7pL(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase",
alias:"widget.com.coremedia.blueprint.base.pagegrid.config.placementLinkListPropertyField",constructor:PlacementLinkListPropertyField$,super$c7pL:function(){com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase.prototype.constructor.apply(this,arguments)},config:{rowWidgetItems:null,propertyFieldName:null,fallbackPropertyFieldName:null,columns:null,fields:null},requires:["Ext.layout.container.VBox","com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase","com.coremedia.cms.editor.sdk.premular.PropertyFieldAnnotatedLinkListWidget",
"com.coremedia.cms.editor.sdk.premular.fields.LinkListPropertyField","com.coremedia.ui.plugins.AddItemsPlugin","com.coremedia.ui.plugins.BindVisibilityPlugin","net.jangaroo.ext.Exml"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridPropertyFieldBase",function(PageGridPropertyFieldBase){function PageGridPropertyFieldBase$(config){if(arguments.length<=0)config=null;this.super$s8iK(config)}function createPlacementsConfigListValueExpression(){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computePlacementsConfigList$s8iK"))}function computePlacementsConfigList(){var config=AS3.cast(com.coremedia.blueprint.base.pagegrid.PageGridPropertyField,
this.initialConfig);var content=AS3.getBindable(config,"bindTo").getValue();if(!content)return undefined;var propertyName=AS3.getBindable(config,"propertyName");var layout=com.coremedia.blueprint.base.pagegrid.PageGridUtil.getLayout(content,propertyName);if(!layout)return undefined;var sections=com.coremedia.blueprint.base.pagegrid.PageGridUtil.getSections(layout);if(!sections)return undefined;var duplicates={};var configs=[];for(var $1=0;$1<sections.length;++$1){var section=sections[$1];var sectionId=
section.getId();if(!duplicates[sectionId]){duplicates[sectionId]=true;var placementFieldConfig=this.getPlacementFieldConfig$s8iK(section);configs.push(placementFieldConfig)}}return configs}function getPlacementFieldConfig(section){var config=AS3.cast(com.coremedia.blueprint.base.pagegrid.PageGridPropertyField,this.initialConfig);var result=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementField,{});AS3.setBindable(result,"section",section);result.itemId=section.getUriPath().replace(/\//g,"-");
AS3.setBindable(result,"propertyName",com.coremedia.blueprint.base.pagegrid.PageGridUtil.getPlacementPropertyPath(AS3.getBindable(config,"propertyName"),section));var placementPropertyName=AS3.getBindable(config,"propertyName").split(".")[0];var sectionName=section.getName();AS3.setBindable(result,"propertyFieldName",placementPropertyName+"-"+sectionName);AS3.setBindable(result,"collapsed",true);if(AS3.getBindable(config,"fallbackPropertyName")){AS3.setBindable(result,"fallbackPropertyName",com.coremedia.blueprint.base.pagegrid.PageGridUtil.getPlacementPropertyPath(AS3.getBindable(config,
"fallbackPropertyName"),section));var fallbackPlacementPropertyName=AS3.getBindable(config,"fallbackPropertyName").split(".")[0];AS3.setBindable(result,"fallbackPropertyFieldName",fallbackPlacementPropertyName+"-"+sectionName)}AS3.setBindable(result,"linkType",AS3.getBindable(this,"placementLinkType"));return result}return{extend:"Ext.container.Container",metadata:{"":["PublicApi"]},constructor:PageGridPropertyFieldBase$,super$s8iK:function(){Ext.container.Container.prototype.constructor.apply(this,
arguments)},createPlacementsConfigListValueExpression:createPlacementsConfigListValueExpression,computePlacementsConfigList$s8iK:computePlacementsConfigList,getPlacementFieldConfig$s8iK:getPlacementFieldConfig,config:{placementLinkType:"CMTeasable"},requires:["Ext.container.Container","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","com.coremedia.blueprint.base.pagegrid.PageGridUtil","com.coremedia.blueprint.base.pagegrid.PlacementField"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementLinkListPropertyFieldBase",function(PlacementLinkListPropertyFieldBase){function PlacementLinkListPropertyFieldBase$(config){if(arguments.length<=0)config=null;this.super$quL6(config)}function getActiveItemValueExpression(config,containerId){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){if(!config.fallbackPropertyName)return PlacementLinkListPropertyFieldBase.DEFAULT_CONTAINER===containerId;
var site=com.coremedia.cms.editor.sdk.editorContext.getSitesService().getSiteFor(AS3.as(AS3.getBindable(config,"bindTo").getValue(),com.coremedia.cap.content.Content));if(!(site&&site.getSiteRootDocument()));else{var storingContent=this$.getStoringContentValueExpression$quL6(config).getValue();if(storingContent===site.getSiteRootDocument())return PlacementLinkListPropertyFieldBase.FALLBACK_CONTAINER===containerId}return PlacementLinkListPropertyFieldBase.DEFAULT_CONTAINER===containerId})}function getStructContentLinkListWrapper(config){if(!this.structContentLinkListWrapper$quL6)this.structContentLinkListWrapper$quL6=
com.coremedia.cms.editor.sdk.util.AnnotatedLinkListHelper.createStructContentLinkListWrapper(AS3.getBindable(config,"bindTo"),AS3.getBindable(config,"forceReadOnlyValueExpression"),AS3.getBindable(config,"linkType"),AS3.getBindable(config,"propertyName"),com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY);return this.structContentLinkListWrapper$quL6}function getFallbackStructContentLinkListWrapper(config){if(!this.fallbackStructContentLinkListWrapper$quL6)this.fallbackStructContentLinkListWrapper$quL6=
com.coremedia.cms.editor.sdk.util.AnnotatedLinkListHelper.createStructContentLinkListWrapper(AS3.getBindable(config,"bindTo"),AS3.getBindable(config,"forceReadOnlyValueExpression"),AS3.getBindable(config,"linkType"),config.fallbackPropertyName,com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENT_EXTENDED_ITEMS_PROPERTY);return this.fallbackStructContentLinkListWrapper$quL6}function getStoringContentValueExpression(config){if(!this.storingContentValueExpression$quL6)this.storingContentValueExpression$quL6=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(com.coremedia.blueprint.base.pagegrid.PageGridUtil.computePageStoringPlacement,AS3.getBindable(config,"bindTo"),AS3.getBindable(config,"pageTreeRelation"),AS3.getBindable(config,"structPropertyName"),AS3.getBindable(config,"section"));return this.storingContentValueExpression$quL6}function isFallbackConfigured(){return this.initialConfig.fallbackPropertyName}return{extend:"Ext.container.Container",storingContentValueExpression$quL6:null,
structContentLinkListWrapper$quL6:null,fallbackStructContentLinkListWrapper$quL6:null,fallbackPropertyName:null,constructor:PlacementLinkListPropertyFieldBase$,super$quL6:function(){Ext.container.Container.prototype.constructor.apply(this,arguments)},getActiveItemValueExpression:getActiveItemValueExpression,getStructContentLinkListWrapper:getStructContentLinkListWrapper,getFallbackStructContentLinkListWrapper:getFallbackStructContentLinkListWrapper,getStoringContentValueExpression$quL6:getStoringContentValueExpression,
isFallbackConfigured:isFallbackConfigured,config:{bindTo:null,linkType:null,propertyName:null,forceReadOnlyValueExpression:null,structPropertyName:null,pageTreeRelation:null,section:null},statics:{DEFAULT_CONTAINER:"defaultContainer",FALLBACK_CONTAINER:"fallbackContainer"},requires:["Ext.container.Container","com.coremedia.cap.content.Content","com.coremedia.cms.editor.sdk.editorContext","com.coremedia.cms.editor.sdk.util.AnnotatedLinkListHelper","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants",
"com.coremedia.blueprint.base.pagegrid.PageGridUtil"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementFieldViewtypeSelectorBase",function(PlacementFieldViewtypeSelectorBase){function PlacementFieldViewtypeSelectorBase$(config){if(arguments.length<=0)config=null;this.super$xptn(config);this.viewtypeMaxWidthVE$xptn=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeViewTypeMaxWidth$xptn"),config)}function onAdded(container,pos,instanced){com.coremedia.ui.components.LocalComboBox.prototype.onAdded.call(this,
container,pos,instanced);this.viewtypeMaxWidthVE$xptn.addChangeListener(AS3.bind(this,"updateWidth$xptn"));this.updateWidth$xptn()}function destroy(){var params=Array.prototype.slice.call(arguments);this.viewtypeMaxWidthVE$xptn.removeChangeListener(AS3.bind(this,"updateWidth$xptn"));com.coremedia.ui.components.LocalComboBox.prototype.destroy.call(this,params)}function updateWidth(){var value=this.viewtypeMaxWidthVE$xptn.getValue();if(!isNaN(value)){this.setMaxWidth(value);this.getPicker().setMinWidth(value)}}
function computeViewTypeMaxWidth(config){var availableViewTypes=this.getAvailableViewTypesVE(config).getValue();if(availableViewTypes===undefined)return NaN;availableViewTypes=availableViewTypes.filter(function(item){return!!item});var returnNaN=false;var maxWidth=0;for(var i=0;i<availableViewTypes.length;i++){var content=availableViewTypes[i];var text=com.coremedia.blueprint.base.components.viewtypes.ViewtypeLocalizationUtil.localizeText(content);if(text===undefined){returnNaN=true;continue}maxWidth=
Math.max(maxWidth,calculateSimpleWidth$static(text))}if(returnNaN)return NaN;return Math.max(maxWidth,calculateSimpleWidth$static(this.resourceManager.getString("com.coremedia.blueprint.base.components.viewtypes.Viewtypes","_text")))}function calculateSimpleWidth$static(text){var calculatedString=Ext.util.Format.htmlEncode(text);return calculatedString.length*6+32}function getAvailableViewTypesVE(config){if(!this.availableViewTypesVE$xptn)this.availableViewTypesVE$xptn=com.coremedia.ui.data.ValueExpressionFactory.createUnion(com.coremedia.blueprint.base.components.viewtypes.ViewtypeUtil.createAvailableViewtypesExpression(AS3.getBindable(config,
"referenceContentValueExpression"),com.coremedia.blueprint.base.pagegrid.PageGridUtil.getConfiguration().viewtypePaths),com.coremedia.ui.data.ValueExpressionFactory.convertToSingletonArray(this.getViewtypeVE(config)),false);return this.availableViewTypesVE$xptn}function getViewtypeVE(config){if(!this.viewtypeVE$xptn)this.viewtypeVE$xptn=com.coremedia.cms.editor.sdk.util.LinkListUtil.createLinkValueExpression(AS3.getBindable(config,"bindTo"),AS3.getBindable(config,"propertyName"),"CMViewtype",true);
return this.viewtypeVE$xptn}return{extend:"com.coremedia.ui.components.LocalComboBox",availableViewTypesVE$xptn:null,viewtypeVE$xptn:null,viewtypeMaxWidthVE$xptn:null,constructor:PlacementFieldViewtypeSelectorBase$,super$xptn:function(){com.coremedia.ui.components.LocalComboBox.prototype.constructor.apply(this,arguments)},onAdded:onAdded,destroy:destroy,updateWidth$xptn:updateWidth,computeViewTypeMaxWidth$xptn:computeViewTypeMaxWidth,getAvailableViewTypesVE:getAvailableViewTypesVE,getViewtypeVE:getViewtypeVE,
requires:["Ext.util.Format","com.coremedia.blueprint.base.components.viewtypes.ViewtypeLocalizationUtil","com.coremedia.blueprint.base.components.viewtypes.ViewtypeUtil","com.coremedia.blueprint.base.components.viewtypes.Viewtypes_properties","com.coremedia.cms.editor.sdk.util.LinkListUtil","com.coremedia.ui.components.LocalComboBox","com.coremedia.ui.data.ValueExpressionFactory"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridUtil"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridUtil",function(PageGridUtil){var MISSING_PLACEMENT$static;function MISSING_PLACEMENT$static_(){MISSING_PLACEMENT$static=AS3.cast(com.coremedia.cap.struct.Struct,{})}function getConfiguration$static(){return com.coremedia.cms.editor.sdk.editorContext.getConfiguration()["pageGrid"]}function getLayout$static(content,placementPropertyName){var layout=PageGridUtil.getLayoutWithoutDefault(content,placementPropertyName);if(layout===undefined)return undefined;
if(layout===null)layout=PageGridUtil.getDefaultLayout(content,placementPropertyName);return layout}function getLayoutWithoutDefault$static(content,placementPropertyName){var layoutPropertyName=[com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,placementPropertyName,com.coremedia.blueprint.base.pagegrid.PageGridConstants.NEW_PLACEMENTS_BASE_PROPERTY,com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_PROPERTY_NAME].join(".");var layout=com.coremedia.ui.util.ObjectUtils.getPropertyAt(content,
layoutPropertyName,null);return layout}function getDefaultLayout$static(content,pagegridProperty){var result=null;if(PageGridUtil.defaultLayoutResolver)result=AS3.as(PageGridUtil.defaultLayoutResolver.call(null,content,pagegridProperty),com.coremedia.cap.content.Content);result=result||PageGridUtil.getDefaultLayoutInternal(content);if(result==null)AS3.trace("[ERROR]","No default layout with the name "+PageGridUtil.getConfiguration().layoutDefaultName+" found. ");return result}function getDefaultLayoutInternal$static(content){var result=
null;var site=com.coremedia.cms.editor.sdk.editorContext.getSitesService().getSiteFor(content);if(site===undefined)result=undefined;var siteRootFolder=site&&site.getSiteRootFolder();var contentRepository=com.coremedia.cms.editor.sdk.editorContext.getSession().getConnection().getContentRepository();var layoutDefaultName=PageGridUtil.getConfiguration().layoutDefaultName;var layoutPaths=PageGridUtil.getConfiguration().layoutPaths;for(var $1=0;$1<layoutPaths.length;++$1){var layoutPath=layoutPaths[$1];
var defaultLayout=contentRepository.getChild(layoutPath+"/"+layoutDefaultName,null,siteRootFolder);if(result===null)if(defaultLayout===undefined)result=undefined;else if(defaultLayout)return defaultLayout}return result}function getAvailableLayoutsFor$static(content,layoutPaths){if(layoutPaths&&layoutPaths.length>0)return com.coremedia.blueprint.base.components.util.ContentLookupUtil.findContentsOfTypeInPaths(layoutPaths,["CMSettings"],content);return com.coremedia.blueprint.base.components.util.ContentLookupUtil.findContentsOfTypeInPaths(PageGridUtil.getConfiguration().layoutPaths,
["CMSettings"],content)}function getSections$static(layout){var layoutItems=com.coremedia.ui.util.ObjectUtils.getPropertyAt(layout,com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_SECTIONS_PROPERTY_PATH,null);if(layoutItems===undefined)return undefined;if(!layoutItems)return[];var sections=[];for(var $1=0;$1<layoutItems.length;++$1){var layoutItem=layoutItems[$1];if(layoutItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_ITEM_EDITABLE_PROPERTY)!==false){var section=
AS3.as(layoutItem.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.SECTION_PROPERTY_NAME),com.coremedia.cap.content.Content);if(section)if(section.getName()===undefined)sections=undefined;else if(sections)sections.push(section)}}return sections}function getPlacementPropertyPath$static(placementStructPropertyName,section){return[placementStructPropertyName,com.coremedia.blueprint.base.pagegrid.PageGridConstants.NEW_PLACEMENTS_BASE_PROPERTY,com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENTS_LIST_PROPERTY,
section.getUriPath()].join(".")}function computePageStoringPlacement$static(startPageValueExpression,pageTreeRelation,structPropertyName,section){var content=startPageValueExpression.getValue();if(content===undefined)return undefined;var pageDeclaringSection=PageGridUtil.computePageDeclaringSection(content,pageTreeRelation,structPropertyName,section);if(pageDeclaringSection===undefined)return undefined;if(pageDeclaringSection&&PageGridUtil.isLockingChildren(PageGridUtil.getPlacementUnchecked(pageDeclaringSection,
structPropertyName,section)))return pageDeclaringSection;var placement=PageGridUtil.getPlacementUnchecked(content,structPropertyName,section);if(placement===undefined)return undefined;return placement?content:pageDeclaringSection}function computePageDeclaringSection$static(startPage,pageTreeRelation,placementStructPropertyName,section){var parentPages=pageTreeRelation.pathToRoot(startPage);if(parentPages===undefined)return undefined;if(parentPages===null)return null;var parentPageDefiningSection=
null;var parentPageDeclaringSection=null;for(var i=1;i<parentPages.length;i++){var parentPage=AS3.as(parentPages[i],com.coremedia.cap.content.Content);if(!parentPage)return null;if(!parentPage.isInProduction())continue;var placement=getPlacement$static(parentPage,placementStructPropertyName,section);if(placement===undefined)return undefined;if(placement)if(placement===MISSING_PLACEMENT$static)parentPageDeclaringSection=parentPage;else if(!parentPageDefiningSection||PageGridUtil.isLockingChildren(placement))parentPageDefiningSection=
parentPage}if(!parentPageDefiningSection)parentPageDefiningSection=parentPageDeclaringSection;if(!parentPageDefiningSection){var rootPage=parentPages[parentPages.length-1];var isRoot=pageTreeRelation.isRoot(rootPage);if(isRoot===undefined)return undefined;if(isRoot)parentPageDefiningSection=startPage}return parentPageDefiningSection}function getPlacement$static(parentPage,placementStructPropertyName,section){var pageLayout=PageGridUtil.getLayout(parentPage,placementStructPropertyName);if(pageLayout===
undefined)return undefined;if(pageLayout===null)return null;var declaredSections=PageGridUtil.getSections(pageLayout);if(declaredSections===undefined)return undefined;if(declaredSections.indexOf(section)!==-1)return PageGridUtil.getPlacementUnchecked(parentPage,placementStructPropertyName,section)||MISSING_PLACEMENT$static;return null}function getPlacementUnchecked$static(page,placementStructPropertyName,section){var fullPlacementPropertyPath=com.coremedia.cap.content.ContentPropertyNames.PROPERTIES+
"."+PageGridUtil.getPlacementPropertyPath(placementStructPropertyName,section);return com.coremedia.ui.util.ObjectUtils.getPropertyAt(page,fullPlacementPropertyPath,null)}function isLockingChildren$static(placement){if(!placement)return placement===undefined?undefined:false;return placement.get(com.coremedia.blueprint.base.pagegrid.PageGridConstants.LOCKED_PROPERTY_NAME)}function getLayoutPropertyPath$static(placementStructPropertyName){return[placementStructPropertyName,com.coremedia.blueprint.base.pagegrid.PageGridConstants.NEW_PLACEMENTS_BASE_PROPERTY,
com.coremedia.blueprint.base.pagegrid.PageGridConstants.LAYOUT_PROPERTY_NAME].join(".")}function createDefaultLayoutValueExpression$static(pageValueExpression,pagegridProperty){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return PageGridUtil.getDefaultLayout(pageValueExpression.getValue(),pagegridProperty)})}function createLayoutValueExpression$static(pageValueExpression,placementStructPropertyName){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(PageGridUtil.computeLayout,
pageValueExpression,com.coremedia.cap.content.ContentPropertyNames.PROPERTIES+"."+PageGridUtil.getLayoutPropertyPath(placementStructPropertyName))}function computeLayout$static(contentValueExpression,propertyPath){var content=contentValueExpression.getValue();if(!content)return undefined;var layout=com.coremedia.ui.util.ObjectUtils.getPropertyAt(content,propertyPath,null);return layout===null?PageGridUtil.getDefaultLayout(content):layout}function PageGridUtil$(){}return{constructor:PageGridUtil$,
statics:{MISSING_PLACEMENT:undefined,defaultLayoutResolver:null,getConfiguration:getConfiguration$static,getLayout:getLayout$static,getLayoutWithoutDefault:getLayoutWithoutDefault$static,getDefaultLayout:getDefaultLayout$static,getDefaultLayoutInternal:getDefaultLayoutInternal$static,getAvailableLayoutsFor:getAvailableLayoutsFor$static,getSections:getSections$static,getPlacementPropertyPath:getPlacementPropertyPath$static,computePageStoringPlacement:computePageStoringPlacement$static,computePageDeclaringSection:computePageDeclaringSection$static,
getPlacementUnchecked:getPlacementUnchecked$static,isLockingChildren:isLockingChildren$static,getLayoutPropertyPath:getLayoutPropertyPath$static,createDefaultLayoutValueExpression:createDefaultLayoutValueExpression$static,createLayoutValueExpression:createLayoutValueExpression$static,computeLayout:computeLayout$static,__initStatics__:function(){MISSING_PLACEMENT$static_()}},requires:["AS3.trace","com.coremedia.blueprint.base.components.util.ContentLookupUtil","com.coremedia.cap.content.Content","com.coremedia.cap.content.ContentPropertyNames",
"com.coremedia.cap.struct.Struct","com.coremedia.cms.editor.sdk.editorContext","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PlacementFieldBase",function(PlacementFieldBase){function PlacementFieldBase$(config){if(arguments.length<=0)config=null;this.super$33Hp(config);this.on("expand",AS3.bind(this,"updateLayout"))}function getStoringContentValueExpression(config){if(!this.storingContentValueExpression$33Hp)this.storingContentValueExpression$33Hp=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(com.coremedia.blueprint.base.pagegrid.PageGridUtil.computePageStoringPlacement,
AS3.getBindable(config,"bindTo","DUMMY"),AS3.getBindable(config,"pageTreeRelation"),AS3.getBindable(config,"structPropertyName"),AS3.getBindable(config,"section"));return this.storingContentValueExpression$33Hp}function getReadOnlyValueExpression(){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"isReadOnly$33Hp"))}function createInheritStateValueExpression(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeInheritState$33Hp"),
config)}function computeInheritState(config){var content=AS3.getBindable(config,"bindTo","DUMMY").getValue();var storingContent=this.getStoringContentValueExpression(config).getValue();if(content===undefined||storingContent===undefined)return undefined;if(content===storingContent&&!AS3.getBindable(config,"showLocal"))return"hidden";if(!storingContent)return"missing";var isLocked=com.coremedia.ui.util.ObjectUtils.getPropertyAt(storingContent,[com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,
AS3.getBindable(config,"propertyName"),com.coremedia.blueprint.base.pagegrid.PageGridConstants.LOCKED_PROPERTY_NAME].join("."));if(isLocked)return"locked";return"inherited"}function isReadOnly(){var config=AS3.cast(com.coremedia.blueprint.base.pagegrid.PlacementField,this.initialConfig);var externalForceReadOnlyValue=AS3.getBindable(config,"forceReadOnlyValueExpression","DUMMY").getValue();if(externalForceReadOnlyValue===false){var content=AS3.getBindable(config,"bindTo","DUMMY").getValue();var isReadOnly=
com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.isReadOnly(content);if(isReadOnly===false){var storingContent=this.getStoringContentValueExpression(config).getValue();if(storingContent===undefined)return undefined;return content!==storingContent}return isReadOnly}return externalForceReadOnlyValue}function createLocalizedSectionValueExpression$static(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(localizeSection$static,config)}function localizeSection$static(config){var contentTypeName=
AS3.getBindable(config,"bindTo","DUMMY").extendBy("type.name").getValue();if(!contentTypeName)return undefined;var value=com.coremedia.cms.editor.sdk.util.PropertyEditorUtil.getLocalizedLabel(contentTypeName,AS3.getBindable(config,"propertyFieldName"));return com.coremedia.ui.util.EncodingUtil.encodeForHTML(value)}return{extend:"com.coremedia.cms.editor.sdk.premular.PropertyFieldGroup",storingContentValueExpression$33Hp:null,constructor:PlacementFieldBase$,super$33Hp:function(){com.coremedia.cms.editor.sdk.premular.PropertyFieldGroup.prototype.constructor.apply(this,
arguments)},getStoringContentValueExpression:getStoringContentValueExpression,getReadOnlyValueExpression:getReadOnlyValueExpression,createInheritStateValueExpression:createInheritStateValueExpression,computeInheritState$33Hp:computeInheritState,isReadOnly$33Hp:isReadOnly,statics:{createLocalizedSectionValueExpression:createLocalizedSectionValueExpression$static},requires:["com.coremedia.cap.content.ContentPropertyNames","com.coremedia.cms.editor.sdk.premular.PropertyFieldGroup","com.coremedia.cms.editor.sdk.util.PropertyEditorUtil",
"com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.EncodingUtil","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.blueprint.base.pagegrid.PageGridConstants","com.coremedia.blueprint.base.pagegrid.PageGridUtil","com.coremedia.blueprint.base.pagegrid.PlacementField"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelector",function(PageGridLayoutSelector){function PageGridLayoutSelector$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase,{});var defaults_$1=AS3.cast(PageGridLayoutSelector,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"offeredContentsValueExpression",com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.createAvailableLayoutsValueExpression(config));
AS3.setBindable(config_$1,"displayField",net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.DISPLAY_FIELD_NAME));AS3.setBindable(config_$1,"sortField","localizedName");config_$1.hideLabel=true;AS3.setBindable(config_$1,"emptyText",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField","PageLayout_error_noLayout_text")));AS3.setBindable(config_$1,"qtip",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField",
"PageLayout_tooltip")));AS3.setBindable(config_$1,"comboBoxTemplate",com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.COMBO_BOX_TEMPLATE);AS3.setBindable(config_$1,"displayTemplate",com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.DISPLAY_TEMPLATE);var ui_DataField_48_5_$1=AS3.cast(com.coremedia.ui.store.DataField,{});ui_DataField_48_5_$1.name=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.DISPLAY_FIELD_NAME);ui_DataField_48_5_$1.encode=
false;ui_DataField_48_5_$1.mapping="";ui_DataField_48_5_$1["convert"]=com.coremedia.blueprint.base.pagegrid.LayoutLocalizationUtil.localizeText;var ui_DataField_52_5_$1=AS3.cast(com.coremedia.ui.store.DataField,{});ui_DataField_52_5_$1.name=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.TITLE_FIELD_NAME);ui_DataField_52_5_$1.mapping="";ui_DataField_52_5_$1["convert"]=com.coremedia.blueprint.base.pagegrid.LayoutLocalizationUtil.localizeText;var data_AutoField_55_5_$1=
AS3.cast(Ext.data.field.Field,{});data_AutoField_55_5_$1.name=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.DESCRIPTION_FIELD_NAME);data_AutoField_55_5_$1.mapping="";data_AutoField_55_5_$1["convert"]=com.coremedia.blueprint.base.pagegrid.LayoutLocalizationUtil.localizeDescription;var ui_DataField_58_5_$1=AS3.cast(com.coremedia.ui.store.DataField,{});ui_DataField_58_5_$1.name=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.THUMBNAIL_FIELD_NAME);
ui_DataField_58_5_$1.encode=false;ui_DataField_58_5_$1.mapping="";ui_DataField_58_5_$1["convert"]=AS3.bind(this,"renderLayoutPreviewIcon");var data_AutoField_62_5_$1=AS3.cast(Ext.data.field.Field,{});data_AutoField_62_5_$1.name=net.jangaroo.ext.Exml.asString(com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.SITE_FIELD_NAME);data_AutoField_62_5_$1.mapping="";data_AutoField_62_5_$1["convert"]=com.coremedia.blueprint.base.components.sites.SitesLocalizationUtil.localizeSiteInfo;AS3.setBindable(config_$1,
"fields",[ui_DataField_48_5_$1,ui_DataField_52_5_$1,data_AutoField_55_5_$1,ui_DataField_58_5_$1,data_AutoField_62_5_$1]);net.jangaroo.ext.Exml.apply(config_$1,config);this.super$Uqzh(config_$1)}return{extend:"com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase",alias:"widget.com.coremedia.blueprint.base.pagegrid.config.pageGridLayoutSelector",constructor:PageGridLayoutSelector$,super$Uqzh:function(){com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase.prototype.constructor.apply(this,
arguments)},config:{layoutPaths:null,layoutDefaultName:null,structPropertyName:null},requires:["Ext.data.field.Field","com.coremedia.blueprint.base.components.sites.SitesLocalizationUtil","com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase","com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties","com.coremedia.ui.store.DataField","net.jangaroo.ext.Exml"],uses:["com.coremedia.blueprint.base.pagegrid.LayoutLocalizationUtil"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridLayoutSelectorBase",function(PageGridLayoutSelectorBase){function deletedPlacements_(){this.deletedPlacements$FnpS={}}function COMBO_BOX_TEMPLATE$static_(){PageGridLayoutSelectorBase.COMBO_BOX_TEMPLATE=com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyFieldBase.getExtendedComboBoxTpl(PageGridLayoutSelectorBase.TITLE_FIELD_NAME,PageGridLayoutSelectorBase.DESCRIPTION_FIELD_NAME,null,null,PageGridLayoutSelectorBase.SITE_FIELD_NAME,
PageGridLayoutSelectorBase.THUMBNAIL_FIELD_NAME)}function DISPLAY_TEMPLATE$static_(){PageGridLayoutSelectorBase.DISPLAY_TEMPLATE=com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyFieldBase.getExtendedDisplayTpl(PageGridLayoutSelectorBase.TITLE_FIELD_NAME,PageGridLayoutSelectorBase.DESCRIPTION_FIELD_NAME,null,null,PageGridLayoutSelectorBase.SITE_FIELD_NAME,PageGridLayoutSelectorBase.THUMBNAIL_FIELD_NAME)}function PageGridLayoutSelectorBase$(config){if(arguments.length<=0)config=null;
this.super$FnpS(config);deletedPlacements_.call(this);this.layoutChooser$FnpS=AS3.as(this.getComponent(com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyField.COMBO_BOX_ITEM_ID),com.coremedia.ui.components.LocalComboBox);AS3.setBindable(this,"bindTo",AS3.getBindable(config,"bindTo","DUMMY"));AS3.setBindable(this,"propertyName",AS3.getBindable(config,"propertyName","DUMMY"));this.structPropertyName$FnpS=AS3.getBindable(config,"structPropertyName");this.mon(this.layoutChooser$FnpS,"change",
AS3.bind(this,"cleanupPlacements$FnpS"))}function createAvailableLayoutsValueExpression$static(config){return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(computeAvailableLayouts$static,config)}function setFieldLabel(label){if(this.hideLabel)return;com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyField.prototype.setFieldLabel.call(this,label)}function computeAvailableLayouts$static(config){var referenceContent=AS3.getBindable(config,"bindTo","DUMMY").getValue();
if(!referenceContent)return undefined;return com.coremedia.blueprint.base.pagegrid.PageGridUtil.getAvailableLayoutsFor(referenceContent,AS3.getBindable(config,"layoutPaths"))}function cleanupPlacements(){var layoutContent=AS3.as(this.layoutChooser$FnpS.getValue(),com.coremedia.cap.content.Content);var content=AS3.as(AS3.getBindable(this,"bindTo","DUMMY").getValue(),com.coremedia.cap.content.Content);if(!content)return;var placements=com.coremedia.ui.util.ObjectUtils.getPropertyAt(content,[com.coremedia.cap.content.ContentPropertyNames.PROPERTIES,
AS3.getBindable(this,"propertyName","DUMMY").split(".")[0],com.coremedia.blueprint.base.pagegrid.PageGridConstants.NEW_PLACEMENTS_BASE_PROPERTY,com.coremedia.blueprint.base.pagegrid.PageGridConstants.PLACEMENTS_LIST_PROPERTY]);if(placements){var descriptors=placements.getType().getDescriptors();if(!layoutContent)layoutContent=com.coremedia.blueprint.base.pagegrid.PageGridUtil.getDefaultLayout(content);var sections=layoutContent?com.coremedia.blueprint.base.pagegrid.PageGridUtil.getSections(layoutContent):
[];if(!sections)return;var sectionIds=sections.map(toSectionId$static);for(var $1=0;$1<descriptors.length;++$1){var descriptor=descriptors[$1];var sectionId=descriptor.name;if(sectionIds.indexOf(sectionId)===-1){this.deletedPlacements$FnpS[sectionId]=AS3.cast(com.coremedia.cap.struct.Struct,placements.get(sectionId)).toObject();placements.getType().removeProperty(sectionId)}}for(var $2=0;$2<sectionIds.length;++$2){var expectedSectionId=sectionIds[$2];var deletedPlacement=this.deletedPlacements$FnpS[expectedSectionId];
if(deletedPlacement){var newPlacementStruct=placements.instantiate(expectedSectionId);newPlacementStruct.updateProperties(deletedPlacement)}}}}function toSectionId$static(section){return section.getUriPath()}function renderLayoutPreviewIcon(layoutContent){return com.coremedia.blueprint.base.pagegrid.LayoutPreviewRenderer.renderLayoutPreviewIcon(layoutContent,AS3.getBindable(this,"bindTo","DUMMY").getValue(),this.structPropertyName$FnpS,true)}return{extend:"com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyField",
structPropertyName$FnpS:null,layoutChooser$FnpS:null,constructor:PageGridLayoutSelectorBase$,super$FnpS:function(){com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyField.prototype.constructor.apply(this,arguments)},setFieldLabel:setFieldLabel,cleanupPlacements$FnpS:cleanupPlacements,renderLayoutPreviewIcon:renderLayoutPreviewIcon,statics:{DISPLAY_FIELD_NAME:"localizedNameUnencoded",TITLE_FIELD_NAME:"localizedName",DESCRIPTION_FIELD_NAME:"localizedDescription",SITE_FIELD_NAME:"localizedSiteInfo",
THUMBNAIL_FIELD_NAME:"layoutPreviewHtml",COMBO_BOX_TEMPLATE:undefined,DISPLAY_TEMPLATE:undefined,createAvailableLayoutsValueExpression:createAvailableLayoutsValueExpression$static,__initStatics__:function(){COMBO_BOX_TEMPLATE$static_();DISPLAY_TEMPLATE$static_()}},requires:["com.coremedia.cap.content.Content","com.coremedia.cap.content.ContentPropertyNames","com.coremedia.cap.struct.Struct","com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyField","com.coremedia.cms.editor.sdk.premular.fields.ComboBoxLinkPropertyFieldBase",
"com.coremedia.ui.components.LocalComboBox","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.blueprint.base.pagegrid.LayoutPreviewRenderer","com.coremedia.blueprint.base.pagegrid.PageGridConstants","com.coremedia.blueprint.base.pagegrid.PageGridUtil"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridConstants",function(PageGridConstants){function LAYOUT_SECTIONS_PROPERTY_PATH$static_(){PageGridConstants.LAYOUT_SECTIONS_PROPERTY_PATH=com.coremedia.cap.content.ContentPropertyNames.PROPERTIES+".settings.items"}function PageGridConstants$(){}return{constructor:PageGridConstants$,statics:{LAYOUT_SECTIONS_PROPERTY_PATH:undefined,NEW_PLACEMENTS_BASE_PROPERTY:"placements_2",PLACEMENTS_LIST_PROPERTY:"placements",SECTION_PROPERTY_NAME:"section",
LOCKED_PROPERTY_NAME:"locked",VIEWTYPE_PROPERTY_NAME:"viewtype",LAYOUT_PROPERTY_NAME:"layout",PLACEMENT_ITEMS_PROPERTY:"items",PLACEMENT_EXTENDED_ITEMS_PROPERTY:"extendedItems",SETTINGS_PROPERTY:"settings",LAYOUT_ROW_COUNT_PROPERTY:"rowCount",LAYOUT_ITEMS_PROPERTY:"items",LAYOUT_NAME_PROPERTY:"name",LAYOUT_DESCRIPTION_PROPERTY:"description",LAYOUT_ITEM_ROW_PROPERTY:"row",LAYOUT_ITEM_COL_PROPERTY:"col",LAYOUT_ITEM_EDITABLE_PROPERTY:"editable",LAYOUT_ITEM_ROWSPAN_PROPERTY:"rowspan",LAYOUT_ITEM_COLSPAN_PROPERTY:"colspan",
LAYOUT_ITEM_WIDTH_PROPERTY:"width",LAYOUT_ITEM_HEIGHT_PROPERTY:"height",__initStatics__:function(){LAYOUT_SECTIONS_PROPERTY_PATH$static_()}},requires:["com.coremedia.cap.content.ContentPropertyNames"]}});Ext.define("com.coremedia.blueprint.base.tree.cmNavigationTreeRelation",function(cmNavigationTreeRelation){function cmNavigationTreeRelation_(){return new com.coremedia.cms.editor.sdk.sites.SiteRootChildrenLinkListContentTreeRelation("CMNavigation","children")}return{__factory__:cmNavigationTreeRelation_,requires:["com.coremedia.cms.editor.sdk.sites.SiteRootChildrenLinkListContentTreeRelation"]}});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties",{requires:["com.coremedia.icons.CoreIcons_properties"],"PageLayout_title":"Page Layout","PageLayout_allSites":"all","PageLayout_tooltip":"Select the layout of this page. \x3cbr\x3eBy default, the \x3cb\x3estandard layout\x3c/b\x3e of the site is used.\x3cbr\x3eChanging the layout will affect the available \x3cb\x3eplacements below\x3c/b\x3e.","PageLayout_error_noLayout_text":"No layout defined for this page and no default layout found.",
"PageLayout_default_text":"Default","InheritPlacementAction_text":"Inherit Placement","InheritPlacementAction_tooltip":"Inherit the placement of the parent page","InheritPlacementAction_tooltipPressed":"Define custom content items","LockPlacementAction_text":"Lock Placement","LockPlacementAction_tooltip":"Lock placement editing in all child pages","PlacementState_inheritedFrom_text":"This placement is inherited from","PlacementState_lockedBy_text":"This placement is locked by and inherited from",
"PlacementState_missing_text":"No parent page is set, thus, no placement can be inherited","PlacementState_missing_text_tooltip":"Click the toolbar button \x3cb\x3einherit placement\x3c/b\x3e to create this placement","Placements_viewtype_tooltip":"Select the layout variant for this placement. If set, the layout variant affects how the placement is rendered."},function(){this.prototype["InheritPlacementAction_icon"]=com.coremedia.icons.CoreIcons_properties.INSTANCE.inherit;this.prototype["LockPlacementAction_icon"]=
com.coremedia.icons.CoreIcons_properties.INSTANCE.no_rights;com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties.INSTANCE=new com.coremedia.blueprint.base.pagegrid.PageGridPropertyField_properties});Ext.define("com.coremedia.blueprint.base.pagegrid.PageGridLayouts_properties",{"ignored":"ignored"},function(){com.coremedia.blueprint.base.pagegrid.PageGridLayouts_properties.INSTANCE=new com.coremedia.blueprint.base.pagegrid.PageGridLayouts_properties});
//# sourceMappingURL=com.coremedia.blueprint.base__bpbase-pagegrid-studio-plugin.js.map
