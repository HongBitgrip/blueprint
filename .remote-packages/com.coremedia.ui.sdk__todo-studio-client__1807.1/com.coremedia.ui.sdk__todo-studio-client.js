Ext.define("com.coremedia.cms.editor.todo.components.TodoPanelBase",function(TodoPanelBase){var SWITCH_TO_DISPLAY_MODE_EVENT_NAME$static="todoPanel.switchToDisplayMode";var WARNING_IF_SELECTED_MODIFIER$static="warning-if-selected";var ERROR_IF_SELECTED_MODIFIER$static="error-if-selected";var GROW_APPEND_DUMMY$static="\n ";function TodoPanelBase$(config){var this$=this;if(arguments.length<=0)config=null;this.super$_7Dv(config);this.checkbox$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.CHECKBOX_ITEM_ID),
Ext.form.field.Checkbox);this.textDisplay$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.TEXT_DISPLAY_ITEM_ID),Ext.Component);this.textInput$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.TEXT_INPUT_ITEM_ID),Ext.form.field.TextArea);this.assigneeBtn$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.ASSIGNEE_BUTTON_ITEM_ID),Ext.button.Button);this.dueDateContainer$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.DUE_DATE_CT_ID),
Ext.container.Container);this.removeButton$_7Dv=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoPanel.REMOVE_BUTTON_ITEM_ID),Ext.button.Button);this.windowListener$_7Dv=new com.coremedia.ui.util.MutableMousedownListener(getEditorMainView$static().getEl().dom,function(evt){this$.switchToDisplayMode();this$.handlePossibleButtonClick$_7Dv(evt)},true);getEditorMainView$static().addListener(SWITCH_TO_DISPLAY_MODE_EVENT_NAME$static,AS3.bind(this.windowListener$_7Dv,"trigger"));this.on("afterrender",
function(){this$.panelListener$_7Dv=new com.coremedia.ui.util.MutableMousedownListener(this$.getEl().dom,function(){this$.windowListener$_7Dv.muteNextEvent();this$.switchToEditorMode()});this$.panelListener$_7Dv.enable()});this.mon(this.textDisplay$_7Dv,"afterrender",function(){this$.mon(this$.textDisplay$_7Dv.getEl(),"mousedown",function(){this$.textInput$_7Dv.focus(false,TodoPanelBase.MODE_SWITCH_DELAY)})});var draggableItem=AS3.as(this.up(),com.coremedia.ui.components.DraggableItem);if(draggableItem){var dragHandle=
draggableItem.queryById(com.coremedia.ui.components.DraggableItem.DND_ITEM_ID);dragHandle&&this.mon(dragHandle,"afterrender",function(){this$.mon(dragHandle.getEl(),"mousedown",function(){if(!AS3.getBindable(draggableItem,"enabledVE","DUMMY")||AS3.as(AS3.getBindable(draggableItem,"enabledVE","DUMMY").getValue(),Boolean))if(Ext.dd.DragDropManager.stopPropagation)this$.specialBehaviourForStopPropagation$_7Dv();else this$.preventNextSwitch$_7Dv(false)})})}this.mon(this.checkbox$_7Dv,"afterrender",function(){this$.mon(this$.checkbox$_7Dv.getEl().parent(),
"mousedown",function(){this$.preventNextSwitch$_7Dv(true)})});this.mon(this.removeButton$_7Dv,"afterrender",function(){this$.mon(this$.removeButton$_7Dv.getEl(),"mousedown",function(){this$.preventNextSwitch$_7Dv(true)})});this.mon(this.assigneeBtn$_7Dv,"afterrender",function(){this$.mon(this$.assigneeBtn$_7Dv.getEl(),"mousedown",function(){this$.preventNextSwitch$_7Dv(true)})});this.mon(AS3.getBindable(this.assigneeBtn$_7Dv,"menu","DUMMY"),"afterrender",function(){this$.mon(AS3.getBindable(this$.assigneeBtn$_7Dv,
"menu","DUMMY").getEl(),"mousedown",function(){this$.preventNextSwitch$_7Dv(false)})});this.mon(this.dueDateContainer$_7Dv,"afterrender",function(){this$.mon(this$.dueDateContainer$_7Dv.getEl(),"mousedown",function(){this$.preventNextSwitch$_7Dv(true)})});this.dueDateField$_7Dv=AS3.as(this.dueDateContainer$_7Dv.query(com.coremedia.ui.util.createComponentSelector().itemId(com.coremedia.cms.editor.todo.components.TodoDueDateContainer.DUE_DATE_FIELD_ITEM_ID).build())[0],com.coremedia.ui.components.StatefulDateField);
this.mon(this.dueDateField$_7Dv,"expand",function(){var picker=this$.dueDateField$_7Dv.getPicker();if(picker)this$.mon(picker.getEl(),"mousedown",function(){this$.preventNextSwitch$_7Dv(false)})},null,{single:true})}function handlePossibleButtonClick(evt){if(!evt)return;function handleButtonClick(btn){if(btn.destroyed)return;btn.handler();var oldHandler=btn.handler;AS3.setBindable(btn,"handler",Ext.emptyFn);window.setTimeout(function(){!btn.destroyed&&AS3.setBindable(btn,"handler",oldHandler)},500)}
var target=Ext.get(evt.target);while(target){var cmp=Ext.getCmp(target.getId());if(AS3.is(cmp,Ext.button.Button)){handleButtonClick(AS3.as(cmp,Ext.button.Button));break}target=target.parent()}}function specialBehaviourForStopPropagation(){this.panelListener$_7Dv.muteNextEvent();if(this.getIsEditorModeVE().getValue()===true)this.windowListener$_7Dv.muteNextEvent();getEditorMainView$static().fireEvent(SWITCH_TO_DISPLAY_MODE_EVENT_NAME$static)}function preventNextSwitch(isPartOfTodoPanel){if(this.getIsEditorModeVE().getValue()===
true){if(!isPartOfTodoPanel)this.windowListener$_7Dv.muteNextEvent()}else if(isPartOfTodoPanel)this.panelListener$_7Dv.muteNextEvent()}function getDueDatePickerModifiers(date){var modifiers=this.additionalDueDatePickerModifiers&&AS3.as(this.additionalDueDatePickerModifiers(date),Array)||[];if(AS3.getBindable(this,"todo").getTodoState()===com.coremedia.cms.editor.todo.rest.impl.TodoImpl.IN_PROGRESS_STATE){var issues=AS3.as(this.dueDateIssueBuilder(date),Array)||[];var maxIssuesSeverity=com.coremedia.cms.editor.sdk.validation.ValidationUtil.computeMaximumSeverity(issues);
if(maxIssuesSeverity===com.coremedia.ui.data.validation.Severity.WARN)modifiers.push(WARNING_IF_SELECTED_MODIFIER$static);if(maxIssuesSeverity===com.coremedia.ui.data.validation.Severity.ERROR)modifiers.push(ERROR_IF_SELECTED_MODIFIER$static)}return modifiers}function beforeDestroy(){getEditorMainView$static().removeListener(SWITCH_TO_DISPLAY_MODE_EVENT_NAME$static,AS3.bind(this.windowListener$_7Dv,"trigger"));if(this.panelListener$_7Dv)this.panelListener$_7Dv.disable();if(this.windowListener$_7Dv)this.windowListener$_7Dv.disable();
Ext.panel.Panel.prototype.beforeDestroy.call(this)}function switchToEditorMode(){if(!this.getIsEditorModeVE().getValue()){this.getIsEditorModeVE().setValue(true);this.windowListener$_7Dv.enable();this.editorModeListener&&this.editorModeListener(true)}}function deleteTodo(){AS3.getBindable(this,"todo").load(function(todo){todo.deleteMe()})}function switchToDisplayMode(){if(this.destroyed)return;if(this.getIsEditorModeVE().getValue()===true){this.windowListener$_7Dv.disable();var value=this.textInput$_7Dv.getValue();
if(value)this.textInput$_7Dv.setValue(value["trim"]());this.getIsEditorModeVE().setValue(false);this.editorModeListener&&this.editorModeListener(false)}}function getIsEditorModeVE(){if(!this.isEditorModeVE$_7Dv)this.isEditorModeVE$_7Dv=com.coremedia.ui.data.ValueExpressionFactory.createFromValue(false);return this.isEditorModeVE$_7Dv}function getIsDueDateFieldActiveVE(){if(!this.isDueDateFieldActiveVE$_7Dv)this.isDueDateFieldActiveVE$_7Dv=com.coremedia.ui.data.ValueExpressionFactory.createFromValue(false);
return this.isDueDateFieldActiveVE$_7Dv}function getTextDisplayOrInputVE(){var this$=this;if(!this.textDisplayOrInputVE$_7Dv)this.textDisplayOrInputVE$_7Dv=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var isEditorMode=this$.getIsEditorModeVE().getValue();if(isEditorMode)return com.coremedia.cms.editor.todo.components.TodoPanel.TEXT_INPUT_ITEM_ID;else return com.coremedia.cms.editor.todo.components.TodoPanel.TEXT_DISPLAY_ITEM_ID});return this.textDisplayOrInputVE$_7Dv}
function getDisplayFieldModifiersVE(){var this$=this;if(!this.displayFieldModifierVE$_7Dv)this.displayFieldModifierVE$_7Dv=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var description=AS3.getBindable(this$,"todo").getDescription();if(description){description=description["trim"]();if(description!=="")return[]}return["empty"]});return this.displayFieldModifierVE$_7Dv}function getTodoAssignmentButtonVisibleVE(){var this$=this;if(!this.todoAssignmentButtonVisibleVE$_7Dv)this.todoAssignmentButtonVisibleVE$_7Dv=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){switch(com.coremedia.ui.data.RemoteBeanUtil.isAccessible(AS3.getBindable(this$,"todo"))){case true:var assignees=AS3.getBindable(this$,"todo").getAssignees();return assignees&&assignees.length>0||this$.getIsEditorModeVE().getValue();default:return false}});return this.todoAssignmentButtonVisibleVE$_7Dv}function getTodoDueDateContainerVisibleVE(){var this$=this;if(!this.todoDueDateContainerVisibleVE$_7Dv)this.todoDueDateContainerVisibleVE$_7Dv=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){switch(com.coremedia.ui.data.RemoteBeanUtil.isAccessible(AS3.getBindable(this$,"todo"))){case true:return AS3.getBindable(this$,"todo").getDueDate()||this$.getIsEditorModeVE().getValue()||this$.getIsDueDateFieldActiveVE().getValue();default:return false}});return this.todoDueDateContainerVisibleVE$_7Dv}function getTodoControlsVisibleVE(){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return this$.getTodoAssignmentButtonVisibleVE().getValue()||
this$.getTodoDueDateContainerVisibleVE().getValue()})}function getTodoPanelModifiersVE(){var this$=this;if(!this.todoPanelModifiersVE$_7Dv)this.todoPanelModifiersVE$_7Dv=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var todoModifiers=[];if(AS3.getBindable(this$,"todo").isLoaded()){todoModifiers.push("state-"+AS3.getBindable(this$,"todo").getTodoState().toLowerCase());var assignees=AS3.getBindable(this$,"todo").getAssignees();if(assignees&&assignees.length>0)todoModifiers.push("has-assignee");
if(AS3.getBindable(this$,"todo").getDueDate())todoModifiers.push("has-due-date")}else AS3.getBindable(this$,"todo").load();if(this$.getIsEditorModeVE().getValue())todoModifiers.push("editor-mode");if(this$.getIsDueDateFieldActiveVE().getValue())todoModifiers.push("due-date-focus");return todoModifiers});return this.todoPanelModifiersVE$_7Dv}function getEditorMainView$static(){return Ext.getCmp(com.coremedia.cms.editor.sdk.desktop.EditorMainView.ID)}function formatTextDisplay$static(value){if(!value||
value["trim"]()==="")value=mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.todo.Todo","Todo_description_empty_text");return com.coremedia.ui.util.EncodingUtil.encodeForHTML(value+GROW_APPEND_DUMMY$static)}function todoStateAsBoolean$static(value){return com.coremedia.cms.editor.todo.rest.impl.TodoImpl.DONE===value}function todoStateAsString$static(value){return value?com.coremedia.cms.editor.todo.rest.impl.TodoImpl.DONE:com.coremedia.cms.editor.todo.rest.impl.TodoImpl.IN_PROGRESS_STATE}
return{extend:"Ext.panel.Panel",checkbox$_7Dv:null,assigneeBtn$_7Dv:null,textDisplay$_7Dv:null,textInput$_7Dv:null,dueDateContainer$_7Dv:null,removeButton$_7Dv:null,isEditorModeVE$_7Dv:null,isDueDateFieldActiveVE$_7Dv:null,displayFieldModifierVE$_7Dv:null,textDisplayOrInputVE$_7Dv:null,todoAssignmentButtonVisibleVE$_7Dv:null,todoPanelModifiersVE$_7Dv:null,todoDueDateContainerVisibleVE$_7Dv:null,dueDateField$_7Dv:null,editorModeListener:null,dueDateIssueBuilder:null,additionalDueDatePickerModifiers:null,
windowListener$_7Dv:null,panelListener$_7Dv:null,constructor:TodoPanelBase$,super$_7Dv:function(){Ext.panel.Panel.prototype.constructor.apply(this,arguments)},handlePossibleButtonClick$_7Dv:handlePossibleButtonClick,specialBehaviourForStopPropagation$_7Dv:specialBehaviourForStopPropagation,preventNextSwitch$_7Dv:preventNextSwitch,getDueDatePickerModifiers:getDueDatePickerModifiers,beforeDestroy:beforeDestroy,switchToEditorMode:switchToEditorMode,deleteTodo:deleteTodo,switchToDisplayMode:switchToDisplayMode,
getIsEditorModeVE:getIsEditorModeVE,getIsDueDateFieldActiveVE:getIsDueDateFieldActiveVE,getTextDisplayOrInputVE:getTextDisplayOrInputVE,getDisplayFieldModifiersVE:getDisplayFieldModifiersVE,getTodoAssignmentButtonVisibleVE:getTodoAssignmentButtonVisibleVE,getTodoDueDateContainerVisibleVE:getTodoDueDateContainerVisibleVE,getTodoControlsVisibleVE:getTodoControlsVisibleVE,getTodoPanelModifiersVE:getTodoPanelModifiersVE,config:{todo:null},statics:{MODE_SWITCH_DELAY:200,formatTextDisplay:formatTextDisplay$static,
todoStateAsBoolean:todoStateAsBoolean$static,todoStateAsString:todoStateAsString$static},requires:["Ext","Ext.Component","Ext.button.Button","Ext.container.Container","Ext.dd.DragDropManager","Ext.form.field.Checkbox","Ext.form.field.TextArea","Ext.panel.Panel","com.coremedia.cms.editor.sdk.desktop.EditorMainView","com.coremedia.cms.editor.sdk.validation.ValidationUtil","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.ui.components.DraggableItem","com.coremedia.ui.components.StatefulDateField",
"com.coremedia.ui.data.RemoteBeanUtil","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.validation.Severity","com.coremedia.ui.util.EncodingUtil","com.coremedia.ui.util.MutableMousedownListener","com.coremedia.ui.util.createComponentSelector","mx.resources.ResourceManager"],uses:["com.coremedia.cms.editor.todo.components.TodoDueDateContainer","com.coremedia.cms.editor.todo.components.TodoPanel","com.coremedia.cms.editor.todo.rest.impl.TodoImpl"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoPanel",function(TodoPanel){function TodoPanel$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoPanelBase,{});var defaults_$1=AS3.cast(TodoPanel,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var ui_BEMPlugin_53_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_53_5_$1,"block",TodoPanel.BLOCK);AS3.setBindable(ui_BEMPlugin_53_5_$1,"modifier",
this.getTodoPanelModifiersVE());config_$1.plugins=[ui_BEMPlugin_53_5_$1];var layout_VBox_57_5_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_57_5_$1,"align","stretch");AS3.setBindable(config_$1,"layout",layout_VBox_57_5_$1);var container_60_5_$1=AS3.cast(Ext.container.Container,{});AS3.setBindable(container_60_5_$1,"height",36);var checkbox_62_9_$1=AS3.cast(Ext.form.field.Checkbox,{});checkbox_62_9_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.CHECKBOX_ITEM_ID);checkbox_62_9_$1.hideLabel=
true;AS3.setBindable(checkbox_62_9_$1,"boxLabel",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.todo.Todo","Todo_done_text")));checkbox_62_9_$1.flex=1;var ui_BEMMixin_67_13_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_67_13_$1,"bemElement",TodoPanel.ELEMENT_CHECK);delete ui_BEMMixin_67_13_$1["xtype"];delete ui_BEMMixin_67_13_$1["xclass"];net.jangaroo.ext.Exml.apply(checkbox_62_9_$1,ui_BEMMixin_67_13_$1);var ui_BindPropertyPlugin_70_13_$1=
AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_70_13_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.create(com.coremedia.cms.editor.todo.model.TodoPropertyNames.STATE,AS3.getBindable(config,"todo"));ui_BindPropertyPlugin_70_13_$1.transformer=com.coremedia.cms.editor.todo.components.TodoPanelBase.todoStateAsBoolean;ui_BindPropertyPlugin_70_13_$1.reverseTransformer=com.coremedia.cms.editor.todo.components.TodoPanelBase.todoStateAsString;ui_BindPropertyPlugin_70_13_$1.bidirectional=
true;checkbox_62_9_$1.plugins=[ui_BindPropertyPlugin_70_13_$1];var ui_IconButton_76_9_$1=AS3.cast(com.coremedia.ui.components.IconButton,{});ui_IconButton_76_9_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.REMOVE_BUTTON_ITEM_ID);AS3.setBindable(ui_IconButton_76_9_$1,"scale","small");ui_IconButton_76_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE.getSkin());AS3.setBindable(ui_IconButton_76_9_$1,"handler",AS3.bind(this,"deleteTodo"));AS3.setBindable(ui_IconButton_76_9_$1,
"iconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons","remove_small")));AS3.setBindable(ui_IconButton_76_9_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.todo.Todo","Todo_delete_btn_tooltip")));AS3.setBindable(ui_IconButton_76_9_$1,"tooltip",this.resourceManager.getString("com.coremedia.cms.editor.todo.Todo","Todo_delete_btn_tooltip"));var ui_BEMMixin_84_13_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,
{});AS3.setBindable(ui_BEMMixin_84_13_$1,"bemElement",TodoPanel.ELEMENT_DELETE);delete ui_BEMMixin_84_13_$1["xtype"];delete ui_BEMMixin_84_13_$1["xclass"];net.jangaroo.ext.Exml.apply(ui_IconButton_76_9_$1,ui_BEMMixin_84_13_$1);container_60_5_$1.items=[checkbox_62_9_$1,ui_IconButton_76_9_$1];var layout_HBox_89_9_$1=AS3.cast(Ext.layout.container.HBox,{});AS3.setBindable(layout_HBox_89_9_$1,"align","middle");AS3.setBindable(container_60_5_$1,"layout",layout_HBox_89_9_$1);var container_92_5_$1=AS3.cast(Ext.container.Container,
{});container_92_5_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.DETAILS_CT_ITEM_ID);container_92_5_$1.flex=1;var ui_BEMMixin_95_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_95_9_$1,"bemElement",TodoPanel.ELEMENT_DETAILS);delete ui_BEMMixin_95_9_$1["xtype"];delete ui_BEMMixin_95_9_$1["xclass"];net.jangaroo.ext.Exml.apply(container_92_5_$1,ui_BEMMixin_95_9_$1);var ui_SwitchingContainer_98_9_$1=AS3.cast(com.coremedia.ui.components.SwitchingContainer,{});ui_SwitchingContainer_98_9_$1.itemId=
net.jangaroo.ext.Exml.asString(TodoPanel.TEXT_CT_ITEM_ID);AS3.setBindable(ui_SwitchingContainer_98_9_$1,"activeItemValueExpression",this.getTextDisplayOrInputVE());AS3.setBindable(ui_SwitchingContainer_98_9_$1,"margin","0 6px 0 0");ui_SwitchingContainer_98_9_$1.flex=1;var component_103_13_$1=AS3.cast(Ext.Component,{});component_103_13_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.TEXT_DISPLAY_ITEM_ID);var ui_BEMPlugin_105_17_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_105_17_$1,
"block","cm-todo-text-display");AS3.setBindable(ui_BEMPlugin_105_17_$1,"modifier",this.getDisplayFieldModifiersVE());var ui_BindPropertyPlugin_107_17_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_107_17_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.create(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DESCRIPTION,AS3.getBindable(config,"todo"));ui_BindPropertyPlugin_107_17_$1.componentProperty="html";ui_BindPropertyPlugin_107_17_$1.transformer=com.coremedia.cms.editor.todo.components.TodoPanelBase.formatTextDisplay;
component_103_13_$1.plugins=[ui_BEMPlugin_105_17_$1,ui_BindPropertyPlugin_107_17_$1];var textArea_113_13_$1=AS3.cast(Ext.form.field.TextArea,{});textArea_113_13_$1.grow=true;textArea_113_13_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.TEXT_INPUT_ITEM_ID);var ui_BindPropertyPlugin_116_17_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_116_17_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.create(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DESCRIPTION,
AS3.getBindable(config,"todo"));ui_BindPropertyPlugin_116_17_$1.reverseTransformer=function(value){return value["trim"]()};ui_BindPropertyPlugin_116_17_$1.bidirectional=true;textArea_113_13_$1.plugins=[ui_BindPropertyPlugin_116_17_$1];ui_SwitchingContainer_98_9_$1.items=[component_103_13_$1,textArea_113_13_$1];var container_125_9_$1=AS3.cast(Ext.container.Container,{});AS3.setBindable(container_125_9_$1,"height",38);container_125_9_$1.liquidLayout=true;var ui_BEMMixin_128_13_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,
{});AS3.setBindable(ui_BEMMixin_128_13_$1,"bemElement",TodoPanel.ELEMENT_CONTROLS);delete ui_BEMMixin_128_13_$1["xtype"];delete ui_BEMMixin_128_13_$1["xclass"];net.jangaroo.ext.Exml.apply(container_125_9_$1,ui_BEMMixin_128_13_$1);var ui_BindVisibilityPlugin_131_13_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_131_13_$1.bindTo=this.getTodoControlsVisibleVE();container_125_9_$1.plugins=[ui_BindVisibilityPlugin_131_13_$1];var layout_Container_134_13_$1=AS3.cast(Ext.layout.container.Container,
{});AS3.setBindable(container_125_9_$1,"layout",layout_Container_134_13_$1);var todo_TodoAssignmentButton_137_13_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoAssignmentButton,{});todo_TodoAssignmentButton_137_13_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.ASSIGNEE_BUTTON_ITEM_ID);AS3.setBindable(todo_TodoAssignmentButton_137_13_$1,"todo",AS3.getBindable(config,"todo"));AS3.setBindable(todo_TodoAssignmentButton_137_13_$1,"assigneesVE",AS3.getBindable(config,"assigneesVE"));todo_TodoAssignmentButton_137_13_$1.ui=
net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.INLINE.getSkin());var ui_BEMMixin_142_17_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_142_17_$1,"bemElement",TodoPanel.ELEMENT_ASSIGNEES);delete ui_BEMMixin_142_17_$1["xtype"];delete ui_BEMMixin_142_17_$1["xclass"];net.jangaroo.ext.Exml.apply(todo_TodoAssignmentButton_137_13_$1,ui_BEMMixin_142_17_$1);var todo_TodoDueDateContainer_145_13_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoDueDateContainer,
{});todo_TodoDueDateContainer_145_13_$1.itemId=net.jangaroo.ext.Exml.asString(TodoPanel.DUE_DATE_CT_ID);AS3.setBindable(todo_TodoDueDateContainer_145_13_$1,"todo",AS3.getBindable(config,"todo"));AS3.setBindable(todo_TodoDueDateContainer_145_13_$1,"datePickerModifiersForDay",AS3.bind(this,"getDueDatePickerModifiers"));AS3.setBindable(todo_TodoDueDateContainer_145_13_$1,"issueBuilder",config.dueDateIssueBuilder);AS3.setBindable(todo_TodoDueDateContainer_145_13_$1,"isEditorModeVE",this.getIsEditorModeVE());
AS3.setBindable(todo_TodoDueDateContainer_145_13_$1,"isDueDateFieldActiveVE",this.getIsDueDateFieldActiveVE());var ui_BEMMixin_152_17_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_152_17_$1,"bemElement",TodoPanel.ELEMENT_DUE_DATE);delete ui_BEMMixin_152_17_$1["xtype"];delete ui_BEMMixin_152_17_$1["xclass"];net.jangaroo.ext.Exml.apply(todo_TodoDueDateContainer_145_13_$1,ui_BEMMixin_152_17_$1);container_125_9_$1.items=[todo_TodoAssignmentButton_137_13_$1,todo_TodoDueDateContainer_145_13_$1];
container_92_5_$1.items=[ui_SwitchingContainer_98_9_$1,container_125_9_$1];var layout_VBox_159_9_$1=AS3.cast(Ext.layout.container.VBox,{});AS3.setBindable(layout_VBox_159_9_$1,"align","stretch");AS3.setBindable(container_92_5_$1,"layout",layout_VBox_159_9_$1);config_$1.items=[container_60_5_$1,container_92_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$_do8(config_$1)}return{extend:"com.coremedia.cms.editor.todo.components.TodoPanelBase",alias:"widget.com.coremedia.cms.editor.todo.config.todoPanel",
constructor:TodoPanel$,super$_do8:function(){com.coremedia.cms.editor.todo.components.TodoPanelBase.prototype.constructor.apply(this,arguments)},config:{assigneesVE:null},statics:{BLOCK:"cm-todo-panel",ELEMENT_CHECK:"check",ELEMENT_DETAILS:"details",ELEMENT_DELETE:"delete",ELEMENT_CONTROLS:"controls",ELEMENT_ASSIGNEES:"assignees",ELEMENT_DUE_DATE:"due-date",DETAILS_CT_ITEM_ID:"detailsCtItemId",TEXT_CT_ITEM_ID:"textCtItemId",TEXT_DISPLAY_ITEM_ID:"textDisplayItemId",TEXT_INPUT_ITEM_ID:"textInputItemId",
ASSIGNEE_BUTTON_ITEM_ID:"assigneeButtonItemId",CHECKBOX_ITEM_ID:"checkboxItemId",DUE_DATE_CT_ID:"todoDueDateCt",REMOVE_BUTTON_ITEM_ID:"removeButtonItemId"},requires:["Ext.Component","Ext.container.Container","Ext.form.field.Checkbox","Ext.form.field.TextArea","Ext.layout.container.Container","Ext.layout.container.HBox","Ext.layout.container.VBox","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.cms.editor.todo.components.TodoPanelBase","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.components.IconButton",
"com.coremedia.ui.components.SwitchingContainer","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.plugins.BEMMixin","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.plugins.BindVisibilityPlugin","com.coremedia.ui.skins.ButtonSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.todo.components.TodoAssignmentButton","com.coremedia.cms.editor.todo.components.TodoDueDateContainer","com.coremedia.cms.editor.todo.model.TodoPropertyNames"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase",function(TodoAssignmentButtonBase){var fixedMenuItems$static;function fixedMenuItems$static_(){fixedMenuItems$static=[TodoAssignmentButtonBase.UNASSIGN_BUTTON_ITEM_ID,TodoAssignmentButtonBase.SEPARATOR_ITEM_ID]}function TodoAssignmentButtonBase$(config){if(arguments.length<=0)config=null;this.super$QNJC(config)}function getLoadedAssigneeVE(){var this$=this;if(!this.assigneeNameVE$QNJC)this.assigneeNameVE$QNJC=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){if(!AS3.getBindable(this$,
"todo").isLoaded()){AS3.getBindable(this$,"todo").load();return undefined}var assignees=AS3.getBindable(this$,"todo").getAssignees();if(!assignees)return undefined;if(assignees.length===0)return null;var assignee=AS3.as(assignees[0],com.coremedia.cap.user.User);if(!assignee.isLoaded()){assignee.load();return undefined}return assignee});return this.assigneeNameVE$QNJC}function assignUser(user){var this$=this;AS3.getBindable(this,"todo").getAssignees(function(assignees){if(assignees.indexOf(user)===
-1)AS3.getBindable(this$,"todo").setAssignees([user])})}function unassignUsers(){var this$=this;AS3.getBindable(this,"todo").getAssignees(function(assignees){if(assignees.length>0)AS3.getBindable(this$,"todo").removeAssignees(assignees)})}function getSelectableAssigneesVE(){var this$=this;if(!this.selectableAssigneesVE$QNJC)this.selectableAssigneesVE$QNJC=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var allAssignees=AS3.getBindable(this$,"assigneesVE").getValue();var assignedUsers=
AS3.getBindable(this$,"todo").getAssignees();if(allAssignees&&assignedUsers)return allAssignees.filter(function(user){return assignedUsers.indexOf(user)===-1});return undefined});return this.selectableAssigneesVE$QNJC}function getSortedSelectableAssigneesVE(){var this$=this;if(!this.sortedSelectableAssigneesVE$QNJC)this.sortedSelectableAssigneesVE$QNJC=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var selectableAssignees=this$.getSelectableAssigneesVE().getValue();if(!selectableAssignees)return undefined;
var sortedSelectableAssignees=selectableAssignees.sort(function compare(user1,user2){var sessionUser=com.coremedia.cap.common.SESSION.getUser();if(user1===sessionUser)return-1;else if(user2===sessionUser)return 1;else{var user1Name=user1.getName();var user2Name=user2.getName();if(user1Name<user2Name)return-1;if(user1Name>user2Name)return 1;return 0}});return sortedSelectableAssignees});return this.sortedSelectableAssigneesVE$QNJC}function getHasAssigneeVE(){var this$=this;if(!this.hasAssigneeVE$QNJC)this.hasAssigneeVE$QNJC=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return AS3.is(this$.getLoadedAssigneeVE().getValue(),com.coremedia.cap.user.User)});return this.hasAssigneeVE$QNJC}function getHasAssigneeAndSelectableAssigneesVE(){var this$=this;if(!this.hasAssigneeAndSelectableAssigneesVE$QNJC)this.hasAssigneeAndSelectableAssigneesVE$QNJC=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var hasAssignee=this$.getHasAssigneeVE().getValue();var selectableAssignees=
this$.getSelectableAssigneesVE().getValue();return hasAssignee&&selectableAssignees&&selectableAssignees.length>0});return this.hasAssigneeAndSelectableAssigneesVE$QNJC}function computeButtonText(){var assignee=this.getLoadedAssigneeVE().getValue();if(!assignee)return undefined;return TodoAssignmentButtonBase.getUserNameOrMe(assignee)}function computeButtonAriaLabel(){var text=this.computeButtonText();return text||mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.todo.Todo",
"Todo_unassigned")}function menuRemoveFunction(container,autoDestroy){container.itemCollection.each(function(item){if(fixedMenuItems$static.indexOf(item.getItemId())===-1)container.remove(item,autoDestroy)})}function getUserNameOrMe$static(user){if(user===com.coremedia.cap.common.SESSION.getUser())return mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.todo.Todo","Todo_assignee_me");else return user?com.coremedia.ui.util.EncodingUtil.encodeForHTML(user.getName()):""}
return{extend:"Ext.button.Button",assigneeNameVE$QNJC:null,hasAssigneeVE$QNJC:null,selectableAssigneesVE$QNJC:null,sortedSelectableAssigneesVE$QNJC:null,hasAssigneeAndSelectableAssigneesVE$QNJC:null,constructor:TodoAssignmentButtonBase$,super$QNJC:function(){Ext.button.Button.prototype.constructor.apply(this,arguments)},getLoadedAssigneeVE:getLoadedAssigneeVE,assignUser:assignUser,unassignUsers:unassignUsers,getSelectableAssigneesVE:getSelectableAssigneesVE,getSortedSelectableAssigneesVE:getSortedSelectableAssigneesVE,
getHasAssigneeVE:getHasAssigneeVE,getHasAssigneeAndSelectableAssigneesVE:getHasAssigneeAndSelectableAssigneesVE,computeButtonText:computeButtonText,computeButtonAriaLabel:computeButtonAriaLabel,menuRemoveFunction:menuRemoveFunction,config:{todo:null,assigneesVE:null},statics:{UNASSIGN_BUTTON_ITEM_ID:"unassignButtonItemId",SEPARATOR_ITEM_ID:"separatorItemId",fixedMenuItems:undefined,getUserNameOrMe:getUserNameOrMe$static,__initStatics__:function(){fixedMenuItems$static_()}},requires:["Ext.button.Button",
"com.coremedia.cap.common.SESSION","com.coremedia.cap.user.User","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.EncodingUtil","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoDueDateContainer",function(TodoDueDateContainer){function TodoDueDateContainer$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase,{});var defaults_$1=AS3.cast(TodoDueDateContainer,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);config_$1.liquidLayout=true;var ui_BEMPlugin_33_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMPlugin,{});AS3.setBindable(ui_BEMPlugin_33_5_$1,
"block","cm-todo-due-date-container");AS3.setBindable(ui_BEMPlugin_33_5_$1,"modifier",this.getModifiersVE());config_$1.plugins=[ui_BEMPlugin_33_5_$1];var layout_Container_37_5_$1=AS3.cast(Ext.layout.container.Container,{});AS3.setBindable(config_$1,"layout",layout_Container_37_5_$1);var local_TodoDueDateDisplayField_40_5_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoDueDateDisplayField,{});local_TodoDueDateDisplayField_40_5_$1.itemId=net.jangaroo.ext.Exml.asString(TodoDueDateContainer.DUE_DATE_DISPLAY_FIELD_ITEM_ID);
AS3.setBindable(local_TodoDueDateDisplayField_40_5_$1,"todo",AS3.getBindable(config,"todo"));AS3.setBindable(local_TodoDueDateDisplayField_40_5_$1,"dueDateValueVE",this.getDueDateValueExpression(AS3.getBindable(config,"todo")));AS3.setBindable(local_TodoDueDateDisplayField_40_5_$1,"dueDateIssuesVE",this.getDueDateIssuesVE());AS3.setBindable(local_TodoDueDateDisplayField_40_5_$1,"dueDateValidationStateVE",this.getDueDateValidationStateVE());var container_46_5_$1=AS3.cast(Ext.container.Container,{});
container_46_5_$1.itemId=net.jangaroo.ext.Exml.asString(TodoDueDateContainer.DUE_DATE_FIELD_CT_ITEM_ID);container_46_5_$1.liquidLayout=true;var ui_BEMMixin_49_9_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_49_9_$1,"bemElement","field-container");delete ui_BEMMixin_49_9_$1["xtype"];delete ui_BEMMixin_49_9_$1["xclass"];net.jangaroo.ext.Exml.apply(container_46_5_$1,ui_BEMMixin_49_9_$1);var layout_Container_52_9_$1=AS3.cast(Ext.layout.container.Container,{});AS3.setBindable(container_46_5_$1,
"layout",layout_Container_52_9_$1);var button_55_9_$1=AS3.cast(Ext.button.Button,{});button_55_9_$1.itemId=net.jangaroo.ext.Exml.asString(TodoDueDateContainer.DUE_DATE_RESET_ITEM_ID);button_55_9_$1.ui=net.jangaroo.ext.Exml.asString(com.coremedia.ui.skins.ButtonSkin.SIMPLE.getSkin());AS3.setBindable(button_55_9_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.Editor","DateTimePropertyField_dateReset_text")));AS3.setBindable(button_55_9_$1,"handler",
AS3.bind(this,"resetDueDate"));var ui_BEMMixin_60_13_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_60_13_$1,"bemElement","reset");delete ui_BEMMixin_60_13_$1["xtype"];delete ui_BEMMixin_60_13_$1["xclass"];net.jangaroo.ext.Exml.apply(button_55_9_$1,ui_BEMMixin_60_13_$1);var ui_StatefulDateField_63_9_$1=AS3.cast(com.coremedia.ui.components.StatefulDateField,{});ui_StatefulDateField_63_9_$1.itemId=net.jangaroo.ext.Exml.asString(TodoDueDateContainer.DUE_DATE_FIELD_ITEM_ID);
ui_StatefulDateField_63_9_$1.ariaLabel=net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.Editor","Date_property_field"));ui_StatefulDateField_63_9_$1.format=net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.Editor","DateTimePropertyField_dateFormat"));ui_StatefulDateField_63_9_$1.enableKeyEvents=true;var ui_BEMMixin_68_13_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_68_13_$1,"bemElement","field");
delete ui_BEMMixin_68_13_$1["xtype"];delete ui_BEMMixin_68_13_$1["xclass"];net.jangaroo.ext.Exml.apply(ui_StatefulDateField_63_9_$1,ui_BEMMixin_68_13_$1);var ui_BindPropertyPlugin_71_13_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_71_13_$1.bindTo=this.getDueDateValueExpression(AS3.getBindable(config,"todo"));ui_BindPropertyPlugin_71_13_$1.reverseTransformer=function(date){return AS3.as(date,Date)};ui_BindPropertyPlugin_71_13_$1.bidirectional=true;var ui_BindPropertyPlugin_74_13_$1=
AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_74_13_$1.bindTo=com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase.getEmptyTextValueExpression();ui_BindPropertyPlugin_74_13_$1.componentProperty="emptyText";var ui_BindPropertyPlugin_76_13_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_76_13_$1.componentProperty="validationState";ui_BindPropertyPlugin_76_13_$1.bindTo=this.getDueDateFieldValidationStateVE();ui_StatefulDateField_63_9_$1.plugins=
[ui_BindPropertyPlugin_71_13_$1,ui_BindPropertyPlugin_74_13_$1,ui_BindPropertyPlugin_76_13_$1];container_46_5_$1.items=[button_55_9_$1,ui_StatefulDateField_63_9_$1];config_$1.items=[local_TodoDueDateDisplayField_40_5_$1,container_46_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$oSdR(config_$1)}return{extend:"com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase",alias:"widget.com.coremedia.cms.editor.todo.config.todoDueDateContainer",constructor:TodoDueDateContainer$,
super$oSdR:function(){com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase.prototype.constructor.apply(this,arguments)},statics:{DUE_DATE_DISPLAY_FIELD_ITEM_ID:"dueDateDisplayField",DUE_DATE_FIELD_CT_ITEM_ID:"dueDateFieldContainer",DUE_DATE_FIELD_ITEM_ID:"todoDueDateField",DUE_DATE_RESET_ITEM_ID:"todoDueDateReset"},requires:["Ext.button.Button","Ext.container.Container","Ext.layout.container.Container","com.coremedia.cms.editor.Editor_properties","com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase",
"com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.components.StatefulDateField","com.coremedia.ui.plugins.BEMMixin","com.coremedia.ui.plugins.BEMPlugin","com.coremedia.ui.plugins.BindPropertyPlugin","com.coremedia.ui.skins.ButtonSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.todo.components.TodoDueDateDisplayField"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoDueDateContainerBase",function(TodoDueDateContainerBase){function TodoDueDateContainerBase$(config){var this$=this;if(arguments.length<=0)config=null;this.super$wjzC(config);this.dueDateField$wjzC=AS3.as(this.queryById(com.coremedia.cms.editor.todo.components.TodoDueDateContainer.DUE_DATE_FIELD_ITEM_ID),com.coremedia.ui.components.StatefulDateField);this.mon(this.dueDateField$wjzC,"afterrender",function(){this$.getDueDateIssuesVE().addChangeListener(AS3.bind(this$,
"changeIssueText$wjzC"));this$.changeIssueText$wjzC();this$.mon(this$.dueDateField$wjzC,"focusenter",function(){AS3.getBindable(this$,"isDueDateFieldActiveVE").setValue(true)});this$.mon(this$.dueDateField$wjzC,"focusleave",function(){AS3.getBindable(this$,"isDueDateFieldActiveVE").setValue(false)});this$.mon(this$.dueDateField$wjzC,"select",function(dateField,date){AS3.getBindable(this$,"todo").setDueDate(date)})})}function getModifiersVE(){var this$=this;if(!this.modifiersVE$wjzC)this.modifiersVE$wjzC=
com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var modifiers=[];if(AS3.getBindable(this$,"isEditorModeVE").getValue())modifiers.push("editor-mode");if(AS3.getBindable(this$,"isDueDateFieldActiveVE").getValue())modifiers.push("focus");return modifiers});return this.modifiersVE$wjzC}function getDueDateValidationStateVE(){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var issues=AS3.as(this$.getDueDateIssuesVE().getValue(),
Array)||[];if(issues.length>0){var issue=AS3.as(issues[0],com.coremedia.ui.data.impl.IssueImpl);return issue.severity===com.coremedia.ui.data.validation.Severity.ERROR?com.coremedia.ui.mixins.ValidationState.ERROR:null}return null})}function getDueDateFieldValidationStateVE(){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var issues=AS3.as(this$.getDueDateIssuesVE().getValue(),Array)||[];if(issues.length>0){var issue=AS3.as(issues[0],com.coremedia.ui.data.impl.IssueImpl);
if(issue.severity===com.coremedia.ui.data.validation.Severity.ERROR)return com.coremedia.ui.mixins.ValidationState.ERROR;if(issue.severity===com.coremedia.ui.data.validation.Severity.WARN)return com.coremedia.ui.mixins.ValidationState.WARNING}return null})}function getDueDateIssuesVE(){var this$=this;var me=this;if(!this.dueDateIssuesVE$wjzC)this.dueDateIssuesVE$wjzC=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){if(AS3.getBindable(this$,"todo").getTodoState()===com.coremedia.cms.editor.todo.rest.impl.TodoImpl.DONE)return[];
com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(me,"afterrender");if(this$.dueDateField$wjzC){com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this$.dueDateField$wjzC,"afterrender");com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this$.dueDateField$wjzC,"validitychange");com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this$.dueDateField$wjzC,"change");var value=AS3.as(this$.dueDateField$wjzC.getValue(),
Date);return value&&AS3.getBindable(this$,"issueBuilder")?AS3.getBindable(this$,"issueBuilder")(value):null}return undefined});return this.dueDateIssuesVE$wjzC}function getDueDateValueExpression(todoBean){if(!this.dueDateVE$wjzC)this.dueDateVE$wjzC=com.coremedia.ui.data.ValueExpressionFactory.create(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DUE_DATE,todoBean);return this.dueDateVE$wjzC}function getEmptyTextValueExpression$static(){return com.coremedia.ui.data.ValueExpressionFactory.createFromValue(mx.resources.ResourceManager.getInstance().getString("com.coremedia.cms.editor.todo.Todo",
"Todo_dueDate_emptyText"))}function changeIssueText(){var issues=AS3.as(this.getDueDateIssuesVE().getValue(),Array)||[];if(issues.length===0){AS3.setBindable(this.dueDateField$wjzC,"validationMessage",null);return}var issuesHtml=com.coremedia.ui.util.ArrayUtils.reduce(issues,function(previous,currentIssue){var separator=issues.indexOf(currentIssue)===0?"":"\x3cbr\x3e\x3cbr\x3e";return previous+separator+currentIssue.code},"");AS3.setBindable(this.dueDateField$wjzC,"validationMessage",issuesHtml)}
function resetDueDate(){AS3.getBindable(this,"todo")&&AS3.getBindable(this,"todo").setDueDate(null);this.dueDateField$wjzC&&this.dueDateField$wjzC.reset()}function onDestroy(){this.getDueDateIssuesVE().removeChangeListener(AS3.bind(this,"changeIssueText$wjzC"));Ext.container.Container.prototype.onDestroy.call(this)}return{extend:"Ext.container.Container",dueDateField$wjzC:null,modifiersVE$wjzC:null,dueDateVE$wjzC:null,dueDateIssuesVE$wjzC:null,constructor:TodoDueDateContainerBase$,super$wjzC:function(){Ext.container.Container.prototype.constructor.apply(this,
arguments)},getModifiersVE:getModifiersVE,getDueDateValidationStateVE:getDueDateValidationStateVE,getDueDateFieldValidationStateVE:getDueDateFieldValidationStateVE,getDueDateIssuesVE:getDueDateIssuesVE,getDueDateValueExpression:getDueDateValueExpression,changeIssueText$wjzC:changeIssueText,resetDueDate:resetDueDate,onDestroy:onDestroy,config:{todo:null,isEditorModeVE:null,isDueDateFieldActiveVE:null,datePickerModifiersForDay:null,issueBuilder:null},statics:{getEmptyTextValueExpression:getEmptyTextValueExpression$static},
requires:["Ext.container.Container","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.ui.components.StatefulDateField","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.dependencies.DependencyTracker","com.coremedia.ui.data.impl.IssueImpl","com.coremedia.ui.data.validation.Severity","com.coremedia.ui.mixins.ValidationState","com.coremedia.ui.util.ArrayUtils","mx.resources.ResourceManager"],uses:["com.coremedia.cms.editor.todo.components.TodoDueDateContainer","com.coremedia.cms.editor.todo.model.TodoPropertyNames",
"com.coremedia.cms.editor.todo.rest.impl.TodoImpl"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItem",function(TodoAssignmentMenuItem){function TodoAssignmentMenuItem$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItemBase,{});var defaults_$1=AS3.cast(TodoAssignmentMenuItem,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons",
"user")));AS3.setBindable(config_$1,"handler",AS3.bind(this,"callSelectionHandler"));var ui_BindPropertyPlugin_24_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_24_5_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeUserName"));ui_BindPropertyPlugin_24_5_$1.componentProperty="text";config_$1.plugins=[ui_BindPropertyPlugin_24_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$hSxx(config_$1)}return{extend:"com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItemBase",
alias:"widget.com.coremedia.cms.editor.todo.config.todoAssignmentMenuItem",constructor:TodoAssignmentMenuItem$,super$hSxx:function(){com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItemBase.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItemBase","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.plugins.BindPropertyPlugin","net.jangaroo.ext.Exml"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItemBase",function(TodoAssignmentMenuItemBase){function TodoAssignmentMenuItemBase$(config){if(arguments.length<=0)config=null;this.super$1rHi(config)}function callSelectionHandler(){this.userSelectionHandler&&this.userSelectionHandler(AS3.getBindable(this,"user"))}function computeUserName(){if(!AS3.getBindable(this,"user").isLoaded()){AS3.getBindable(this,"user").load();return undefined}return this.userTransformer(AS3.getBindable(this,
"user"))}return{extend:"Ext.menu.Item",userSelectionHandler:null,userTransformer:null,constructor:TodoAssignmentMenuItemBase$,super$1rHi:function(){Ext.menu.Item.prototype.constructor.apply(this,arguments)},callSelectionHandler:callSelectionHandler,computeUserName:computeUserName,config:{user:null},requires:["Ext.menu.Item"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoDueDateDisplayField",function(TodoDueDateDisplayField){function TodoDueDateDisplayField$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.ui.components.IconDisplayField,{});var defaults_$1=AS3.cast(TodoDueDateDisplayField,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var ui_BEMMixin_58_5_$1=AS3.cast(com.coremedia.ui.plugins.BEMMixin,{});AS3.setBindable(ui_BEMMixin_58_5_$1,"bemElement","text");delete ui_BEMMixin_58_5_$1["xtype"];
delete ui_BEMMixin_58_5_$1["xclass"];net.jangaroo.ext.Exml.apply(config_$1,ui_BEMMixin_58_5_$1);var ui_BindPropertyPlugin_61_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_61_5_$1.bindTo=AS3.getBindable(config,"dueDateValueVE");ui_BindPropertyPlugin_61_5_$1.componentProperty="value";ui_BindPropertyPlugin_61_5_$1.transformer=com.coremedia.cms.editor.sdk.util.TimeUtil.getRelativeDateString;var ui_BindPropertyPlugin_64_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,
{});ui_BindPropertyPlugin_64_5_$1.componentProperty="iconCls";ui_BindPropertyPlugin_64_5_$1.bindTo=this.getDueDateWarningIconVE();var ui_BindPropertyPlugin_66_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_66_5_$1.componentProperty="validationState";ui_BindPropertyPlugin_66_5_$1.bindTo=AS3.getBindable(config,"dueDateValidationStateVE");var ui_BindPropertyPlugin_68_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_68_5_$1.componentProperty=
"UI";ui_BindPropertyPlugin_68_5_$1.bindTo=this.getDisplayFieldUIVE$bGs_();config_$1.plugins=[ui_BindPropertyPlugin_61_5_$1,ui_BindPropertyPlugin_64_5_$1,ui_BindPropertyPlugin_66_5_$1,ui_BindPropertyPlugin_68_5_$1];net.jangaroo.ext.Exml.apply(config_$1,config);this.super$bGs_(config_$1)}function getDisplayFieldUIVE(){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var dueDate=AS3.getBindable(this$,"dueDateValueVE").getValue();if(dueDate&&AS3.getBindable(this$,
"todo").getTodoState()===com.coremedia.cms.editor.todo.rest.impl.TodoImpl.IN_PROGRESS_STATE&&com.coremedia.cms.editor.sdk.util.TimeUtil.isSoon(dueDate,2))return com.coremedia.ui.skins.IconDisplayFieldSkin.BOLD.getSkin();else return com.coremedia.ui.skins.IconDisplayFieldSkin.DEFAULT.getSkin()})}function getDueDateWarningIconVE(){var this$=this;return com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){var issues=AS3.as(AS3.getBindable(this$,"dueDateIssuesVE").getValue(),Array)||
[];if(issues.length>0){var issue=AS3.as(issues[0],com.coremedia.ui.data.impl.IssueImpl);return issue.severity===com.coremedia.ui.data.validation.Severity.WARN?this$.resourceManager.getString("com.coremedia.icons.CoreIcons","warning"):null}else return null})}return{extend:"com.coremedia.ui.components.IconDisplayField",alias:"widget.com.coremedia.cms.editor.todo.config.todoDueDateDisplayField",constructor:TodoDueDateDisplayField$,super$bGs_:function(){com.coremedia.ui.components.IconDisplayField.prototype.constructor.apply(this,
arguments)},getDisplayFieldUIVE$bGs_:getDisplayFieldUIVE,getDueDateWarningIconVE:getDueDateWarningIconVE,config:{todo:null,dueDateValueVE:null,dueDateIssuesVE:null,dueDateValidationStateVE:null},requires:["com.coremedia.cms.editor.sdk.util.TimeUtil","com.coremedia.ui.components.IconDisplayField","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.data.impl.IssueImpl","com.coremedia.ui.data.validation.Severity","com.coremedia.ui.plugins.BEMMixin","com.coremedia.ui.plugins.BindPropertyPlugin",
"com.coremedia.ui.skins.IconDisplayFieldSkin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.todo.rest.impl.TodoImpl"]}});Ext.define("com.coremedia.cms.editor.todo.components.TodoAssignmentButton",function(TodoAssignmentButton){function TodoAssignmentButton$(config){var this$=this;if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase,{});var defaults_$1=AS3.cast(TodoAssignmentButton,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);AS3.setBindable(config_$1,"iconCls",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.icons.CoreIcons",
"user")));var ui_BindPropertyPlugin_25_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_25_5_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeButtonText"));ui_BindPropertyPlugin_25_5_$1.componentProperty="text";var ui_BindPropertyPlugin_27_5_$1=AS3.cast(com.coremedia.ui.plugins.BindPropertyPlugin,{});ui_BindPropertyPlugin_27_5_$1.bindTo=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(AS3.bind(this,"computeButtonAriaLabel"));
ui_BindPropertyPlugin_27_5_$1.componentProperty="ariaLabel";config_$1.plugins=[ui_BindPropertyPlugin_25_5_$1,ui_BindPropertyPlugin_27_5_$1];var menu_31_5_$1=AS3.cast(Ext.menu.Menu,{});var ui_BindComponentsPlugin_33_9_$1=AS3.cast(com.coremedia.ui.plugins.BindComponentsPlugin,{});AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,"valueExpression",this.getSortedSelectableAssigneesVE());AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,"configBeanParameterName","user");AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,
"reuseComponents",true);AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,"clearBeforeUpdate",true);AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,"removeFunction",AS3.bind(this,"menuRemoveFunction"));var todo_TodoAssignmentMenuItem_39_13_$1=AS3.cast(com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItem,{});todo_TodoAssignmentMenuItem_39_13_$1.userSelectionHandler=AS3.bind(this,"assignUser");todo_TodoAssignmentMenuItem_39_13_$1.userTransformer=com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase.getUserNameOrMe;
AS3.setBindable(ui_BindComponentsPlugin_33_9_$1,"template",todo_TodoAssignmentMenuItem_39_13_$1);menu_31_5_$1.plugins=[ui_BindComponentsPlugin_33_9_$1];var menuItem_45_9_$1=AS3.cast(Ext.menu.Item,{});menuItem_45_9_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase.UNASSIGN_BUTTON_ITEM_ID);AS3.setBindable(menuItem_45_9_$1,"text",net.jangaroo.ext.Exml.asString(this.resourceManager.getString("com.coremedia.cms.editor.todo.Todo","Todo_remove_assignment_text")));
AS3.setBindable(menuItem_45_9_$1,"handler",function(){this$.unassignUsers()});var ui_BindVisibilityPlugin_49_13_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_49_13_$1.bindTo=this.getHasAssigneeVE();menuItem_45_9_$1.plugins=[ui_BindVisibilityPlugin_49_13_$1];var menuSeparator_52_9_$1=AS3.cast(Ext.menu.Separator,{});menuSeparator_52_9_$1.itemId=net.jangaroo.ext.Exml.asString(com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase.SEPARATOR_ITEM_ID);
var ui_BindVisibilityPlugin_54_13_$1=AS3.cast(com.coremedia.ui.plugins.BindVisibilityPlugin,{});ui_BindVisibilityPlugin_54_13_$1.bindTo=this.getHasAssigneeAndSelectableAssigneesVE();menuSeparator_52_9_$1.plugins=[ui_BindVisibilityPlugin_54_13_$1];menu_31_5_$1.items=[menuItem_45_9_$1,menuSeparator_52_9_$1];config_$1.menu=menu_31_5_$1;net.jangaroo.ext.Exml.apply(config_$1,config);this.super$xnzR(config_$1)}return{extend:"com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase",alias:"widget.com.coremedia.cms.editor.todo.config.todoAssignmentButton",
constructor:TodoAssignmentButton$,super$xnzR:function(){com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase.prototype.constructor.apply(this,arguments)},requires:["Ext.menu.Item","Ext.menu.Menu","Ext.menu.Separator","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.cms.editor.todo.components.TodoAssignmentButtonBase","com.coremedia.icons.CoreIcons_properties","com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.plugins.BindComponentsPlugin","com.coremedia.ui.plugins.BindPropertyPlugin",
"com.coremedia.ui.plugins.BindVisibilityPlugin","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.todo.components.TodoAssignmentMenuItem"]}});Ext.define("com.coremedia.cms.editor.todo.model.Todo",function(Todo){return{mixins:["com.coremedia.ui.data.RemoteBean"],requires:["com.coremedia.ui.data.RemoteBean"]}});Ext.define("com.coremedia.cms.editor.todo.model.TodoPropertyNames",function(TodoPropertyNames){function TodoPropertyNames$(){}return{constructor:TodoPropertyNames$,statics:{ID:"id",DESCRIPTION:"description",STATE:"state",TARGET:"target",DUE_DATE:"dueDate"}}});Ext.define("com.coremedia.cms.editor.todo.model.TodoRepository",function(TodoRepository){return{mixins:["com.coremedia.ui.data.RemoteBean"],requires:["com.coremedia.ui.data.RemoteBean"]}});Ext.define("com.coremedia.cms.editor.todo.rest.impl.TodoRepositoryImpl",function(TodoRepositoryImpl){var instance$static=null;var CREATE_URI_SEGMENT$static="create";var OPEN_TODO_TARGETS_PATH$static="opentodotargets";function getInstance$static(){if(!instance$static)instance$static=AS3.cast(com.coremedia.cms.editor.todo.model.TodoRepository,com.coremedia.ui.data.beanFactory.getRemoteBean("todos"));return instance$static}function TodoRepositoryImpl$(path){this.super$7Zic(path)}function createTodo(target,
description,callback){switch(Math.max(arguments.length,1)){case 1:description=null;case 2:callback=null}var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath()+"/"+CREATE_URI_SEGMENT$static,"POST",true);rsm.request({target:target,description:description},function success(rsmr){var todo=AS3.as(com.coremedia.ui.data.impl.BeanFactoryImpl.resolveBeans(Ext.JSON.decode(rsmr.response.responseText)),com.coremedia.cms.editor.todo.model.Todo);callback&&callback(todo)},function failure(rsmr){callback&&
callback(rsmr.getError())})}function getTargetsWithOpenTodosForSessionUser(callback){var this$=this;if(arguments.length<=0)callback=null;var todosBean=com.coremedia.ui.data.beanFactory.getRemoteBean(this.getUriPath()+"/"+com.coremedia.cms.editor.sdk.editorContext.getSession().getUser().get("numericId")+"/"+OPEN_TODO_TARGETS_PATH$static);if(callback||!todosBean.isLoaded()){todosBean.load(function(){if(callback)callback(this$.getTargetsWithOpenTodosForSessionUser())});return undefined}return com.coremedia.ui.data.RemoteBeanUtil.isAccessible(todosBean)?
todosBean.get("items"):[]}return{extend:"com.coremedia.ui.data.impl.RemoteBeanImpl",mixins:["com.coremedia.cms.editor.todo.model.TodoRepository"],metadata:{"":["RestResource",["uriTemplate","todos"]]},constructor:TodoRepositoryImpl$,super$7Zic:function(){com.coremedia.ui.data.impl.RemoteBeanImpl.prototype.constructor.apply(this,arguments)},createTodo:createTodo,getTargetsWithOpenTodosForSessionUser:getTargetsWithOpenTodosForSessionUser,statics:{getInstance:getInstance$static},requires:["Ext.JSON",
"com.coremedia.cms.editor.sdk.editorContext","com.coremedia.cms.editor.todo.model.TodoRepository","com.coremedia.ui.data.RemoteBeanUtil","com.coremedia.ui.data.beanFactory","com.coremedia.ui.data.impl.BeanFactoryImpl","com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.RemoteServiceMethod"],uses:["com.coremedia.cms.editor.todo.model.Todo"]}});Ext.define("com.coremedia.cms.editor.todo.rest.impl.TodoImpl",function(TodoImpl){var ASSIGNEES_URI_SEGMENT$static="assignees";var ADD_ASSIGNEES_URI_SEGMENT$static;function ADD_ASSIGNEES_URI_SEGMENT$static_(){ADD_ASSIGNEES_URI_SEGMENT$static=ASSIGNEES_URI_SEGMENT$static+"/add"}var REMOVE_ASSIGNEES_URI_SEGMENT$static;function REMOVE_ASSIGNEES_URI_SEGMENT$static_(){REMOVE_ASSIGNEES_URI_SEGMENT$static=ASSIGNEES_URI_SEGMENT$static+"/remove"}function TodoImpl$(path){this.super$tFEy(path)}function getTarget(){return this.get(com.coremedia.cms.editor.todo.model.TodoPropertyNames.TARGET)}
function getDescription(){return this.get(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DESCRIPTION)}function setDescription(description){this.set(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DESCRIPTION,description)}function getTodoState(){return this.get(com.coremedia.cms.editor.todo.model.TodoPropertyNames.STATE)}function setTodoState(state){this.set(com.coremedia.cms.editor.todo.model.TodoPropertyNames.STATE,state)}function getDueDate(){return this.get(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DUE_DATE)}
function setDueDate(dueDate){this.set(com.coremedia.cms.editor.todo.model.TodoPropertyNames.DUE_DATE,dueDate)}function deleteMe(callback){if(arguments.length<=0)callback=null;var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath(),"DELETE");rsm.request(null,callback,callback)}function getAssignees(callback){var this$=this;if(arguments.length<=0)callback=null;var usersBean=com.coremedia.ui.data.beanFactory.getRemoteBean(this.getUriPath()+"/"+ASSIGNEES_URI_SEGMENT$static);if(callback||
!usersBean.isLoaded()){usersBean.load(function(usersBean){if(callback)callback(this$.getAssignees())});return undefined}return com.coremedia.ui.data.RemoteBeanUtil.isAccessible(usersBean)?usersBean.get("items"):[]}function setAssignees(assignees){var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath()+"/"+ASSIGNEES_URI_SEGMENT$static,"PUT",true);rsm.request({assignees:assignees})}function addAssignees(assignees){var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath()+
"/"+ADD_ASSIGNEES_URI_SEGMENT$static,"PUT",true);rsm.request({assignees:assignees})}function removeAssignees(assignees){var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(this.getUriPath()+"/"+REMOVE_ASSIGNEES_URI_SEGMENT$static,"PUT",true);rsm.request({assignees:assignees})}return{extend:"com.coremedia.ui.data.impl.RemoteBeanImpl",mixins:["com.coremedia.cms.editor.todo.model.Todo"],metadata:{"":["RestResource",["uriTemplate","todo/{id:[^/]+}"]]},constructor:TodoImpl$,super$tFEy:function(){com.coremedia.ui.data.impl.RemoteBeanImpl.prototype.constructor.apply(this,
arguments)},getTarget:getTarget,getDescription:getDescription,setDescription:setDescription,getTodoState:getTodoState,setTodoState:setTodoState,getDueDate:getDueDate,setDueDate:setDueDate,deleteMe:deleteMe,getAssignees:getAssignees,setAssignees:setAssignees,addAssignees:addAssignees,removeAssignees:removeAssignees,statics:{IN_PROGRESS_STATE:"IN_PROGRESS",DONE:"DONE",ADD_ASSIGNEES_URI_SEGMENT:undefined,REMOVE_ASSIGNEES_URI_SEGMENT:undefined,__initStatics__:function(){ADD_ASSIGNEES_URI_SEGMENT$static_();
REMOVE_ASSIGNEES_URI_SEGMENT$static_()}},requires:["com.coremedia.cms.editor.todo.model.Todo","com.coremedia.ui.data.RemoteBeanUtil","com.coremedia.ui.data.beanFactory","com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.RemoteServiceMethod"],uses:["com.coremedia.cms.editor.todo.model.TodoPropertyNames"]}});Ext.define("com.coremedia.cms.editor.todo.TodoStudioPlugin",function(TodoStudioPlugin){function TodoStudioPlugin$(config){if(arguments.length<=0)config=null;var config_$1=AS3.cast(com.coremedia.cms.editor.todo.TodoStudioPluginBase,{});var defaults_$1=AS3.cast(TodoStudioPlugin,{});config=net.jangaroo.ext.Exml.apply(defaults_$1,config);var editor_RegisterRestResource_31_5_$1=AS3.cast(com.coremedia.cms.editor.configuration.RegisterRestResource,{});AS3.setBindable(editor_RegisterRestResource_31_5_$1,
"beanClass",com.coremedia.cms.editor.todo.rest.impl.TodoRepositoryImpl);var editor_RegisterRestResource_32_5_$1=AS3.cast(com.coremedia.cms.editor.configuration.RegisterRestResource,{});AS3.setBindable(editor_RegisterRestResource_32_5_$1,"beanClass",com.coremedia.cms.editor.todo.rest.impl.TodoImpl);AS3.setBindable(config_$1,"configuration",[new com.coremedia.cms.editor.configuration.RegisterRestResource(editor_RegisterRestResource_31_5_$1),new com.coremedia.cms.editor.configuration.RegisterRestResource(editor_RegisterRestResource_32_5_$1)]);
net.jangaroo.ext.Exml.apply(config_$1,config);this.super$kV5H(config_$1)}return{extend:"com.coremedia.cms.editor.todo.TodoStudioPluginBase",constructor:TodoStudioPlugin$,super$kV5H:function(){com.coremedia.cms.editor.todo.TodoStudioPluginBase.prototype.constructor.apply(this,arguments)},config:{resourceBundles:null},requires:["com.coremedia.cms.editor.configuration.RegisterRestResource","com.coremedia.cms.editor.todo.TodoStudioPluginBase","net.jangaroo.ext.Exml"],uses:["com.coremedia.cms.editor.todo.rest.impl.TodoImpl",
"com.coremedia.cms.editor.todo.rest.impl.TodoRepositoryImpl"]}});Ext.define("com.coremedia.cms.editor.todo.TodoStudioPluginBase",function(TodoStudioPluginBase){function TodoStudioPluginBase$(config){if(arguments.length<=0)config=null;this.super$xbl2(config);addAdditionalResourceBundles$static(AS3.getBindable(config,"resourceBundles"))}function addAdditionalResourceBundles$static(resourceBundles){if(resourceBundles&&AS3.is(resourceBundles,Array))resourceBundles.forEach(function(bundle){com.coremedia.ui.i18n.ResourceBundle.overrideProperties(mx.resources.ResourceManager.getInstance().getResourceBundle(null,
"com.coremedia.cms.editor.todo.Todo"),bundle)})}return{extend:"com.coremedia.cms.editor.configuration.StudioPlugin",constructor:TodoStudioPluginBase$,super$xbl2:function(){com.coremedia.cms.editor.configuration.StudioPlugin.prototype.constructor.apply(this,arguments)},requires:["com.coremedia.cms.editor.configuration.StudioPlugin","com.coremedia.cms.editor.todo.Todo_properties","com.coremedia.ui.i18n.ResourceBundle","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.cms.editor.todo.TodoHelper",function(TodoHelper){function TodoHelper$(){}function filterOpenTodos$static(todos,user){return todos.filter(function(todo){if(todo.getTodoState()!==com.coremedia.cms.editor.todo.rest.impl.TodoImpl.IN_PROGRESS_STATE)return false;if(user){var assignees=todo.getAssignees();return assignees&&assignees.indexOf(user)>-1}return true})}return{constructor:TodoHelper$,statics:{filterOpenTodos:filterOpenTodos$static},uses:["com.coremedia.cms.editor.todo.rest.impl.TodoImpl"]}});Ext.define("com.coremedia.cms.editor.todo.Todo_properties",{"Todo_description_empty_text":"Please enter a description.","Todo_remove_assignment_text":"Remove Assignment","Todo_delete_btn":"Delete To-Do","Todo_delete_btn_tooltip":"Delete To-Do","Todo_assignee_me":"Me","Todo_unassigned":"No user assigned","Todo_dueDate_emptyText":"Date","Todo_done_text":"Done"},function(){com.coremedia.cms.editor.todo.Todo_properties.INSTANCE=new com.coremedia.cms.editor.todo.Todo_properties});
//# sourceMappingURL=com.coremedia.ui.sdk__todo-studio-client.js.map
