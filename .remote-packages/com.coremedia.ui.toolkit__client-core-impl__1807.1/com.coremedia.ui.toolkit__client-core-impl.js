Ext.define("com.coremedia.ui.data.util.ObservablePropertyUtil",function(ObservablePropertyUtil){function createPropertyChangeEventsFor$static(observable,property){var valueExpression=com.coremedia.ui.data.ValueExpressionFactory.createFromFunction(function(){return com.coremedia.ui.util.ObjectUtils.getProperty(observable,property)});var oldValue=valueExpression.getValue();function getterResultChanged(){var newValue=valueExpression.getValue();com.coremedia.ui.data.util.PropertyChangeEventUtil.fireEvent(observable,
property,oldValue,newValue);oldValue=newValue}valueExpression.addChangeListener(getterResultChanged);if(observable.events["destroy"])observable.addListener("destroy",function(){valueExpression.removeChangeListener(getterResultChanged)})}function ObservablePropertyUtil$(){}return{constructor:ObservablePropertyUtil$,statics:{createPropertyChangeEventsFor:createPropertyChangeEventsFor$static},requires:["com.coremedia.ui.data.ValueExpressionFactory","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.ui.data.util.PropertyChangeEventUtil"]}});Ext.define("com.coremedia.ui.data.util.PropertyChangeEventUtil",function(PropertyChangeEventUtil){function fireEvent$static(bean,property,oldValue,newValue,oldState,newState){switch(Math.max(arguments.length,4)){case 4:oldState=null;case 5:newState=null}if(bean.hasListeners&&bean.hasListener(property))return bean.fireEvent(property,PropertyChangeEventUtil.createEvent(bean,property,oldValue,newValue,oldState,newState));return true}function createEvent$static(bean,property,oldValue,newValue,oldState,
newState){switch(Math.max(arguments.length,4)){case 4:oldState=null;case 5:newState=null}return new com.coremedia.ui.data.impl.PropertyChangeEventImpl(bean,property,oldValue,newValue,oldState||com.coremedia.ui.data.BeanState.READABLE,newState||com.coremedia.ui.data.BeanState.READABLE)}function PropertyChangeEventUtil$(){}return{metadata:{"":["PublicApi"]},constructor:PropertyChangeEventUtil$,statics:{fireEvent:fireEvent$static,createEvent:createEvent$static},requires:["com.coremedia.ui.data.BeanState"],
uses:["com.coremedia.ui.data.impl.PropertyChangeEventImpl"]}});Ext.define("com.coremedia.ui.data.util.FormUtil",function(FormUtil){function submitForm$static(path,params){if(arguments.length<=1)params=null;var form=window.document.createElement("form");form.setAttribute("method","POST");form.setAttribute("action",path);if(!params)params={};if(!params[com.coremedia.ui.data.impl.RemoteService.getCsrfTokenParameterName()])params[com.coremedia.ui.data.impl.RemoteService.getCsrfTokenParameterName()]=com.coremedia.ui.data.impl.RemoteService.getCsrfTokenValue();for(var key in params)if(params.hasOwnProperty(key)){var hiddenField=
window.document.createElement("input");hiddenField.setAttribute("type","hidden");hiddenField.setAttribute("name",key);hiddenField.setAttribute("value",params[key]);form.appendChild(hiddenField)}window.document.body.appendChild(form);form["submit"]()}function FormUtil$(){}return{constructor:FormUtil$,statics:{submitForm:submitForm$static},uses:["com.coremedia.ui.data.impl.RemoteService"]}});Ext.define("com.coremedia.ui.data.impl.BeanFactoryImpl",function(BeanFactoryImpl){var URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static;function URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static_(){URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static=[]}function initBeanFactory$static(){if(!com.coremedia.ui.data.beanFactory){var dataPackage=joo.getOrCreatePackage("com.coremedia.ui.data");dataPackage.beanFactory=new BeanFactoryImpl;dataPackage.applicationContext=com.coremedia.ui.data.beanFactory.createLocalBean({});com.coremedia.ui.data.impl.BeanClassRegistry.registerTypeImplementation("com.coremedia.ui.data.validation.Issue",
com.coremedia.ui.data.impl.IssueImpl);com.coremedia.ui.data.impl.BeanClassRegistry.registerTypeImplementation("com.coremedia.ui.data.WriteResult",com.coremedia.ui.data.impl.WriteResult);com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver(com.coremedia.ui.data.impl.RemoteBeanImpl.REF_PROPERTY,function(property,json){return com.coremedia.ui.data.beanFactory.getRemoteBean(json[property])});com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver(BeanFactoryImpl.REFS_PROPERTY,
function(property,json){var refs=json[property];var prefix=json.prefix||"";var result=[];for(var i=0;i<refs.length;i++)result.push(com.coremedia.ui.data.beanFactory.getRemoteBean(prefix+refs[i]));return result});com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver(BeanFactoryImpl.BEAN_TYPE_NAME,function(property,json){var url=AS3.as(json[property],String);var bean=AS3.as(com.coremedia.ui.data.beanFactory.getRemoteBean(url),com.coremedia.ui.data.impl.RemoteBeanImpl);delete json[property];
for(var m in json)json[m]=com.coremedia.ui.data.impl.BeanClassRegistry.resolveBeans(json[m]);AS3.assert(!(com.coremedia.ui.data.BeanState.PROPERTY_NAME in json),"BeanFactoryImpl.as",54,17);bean.inject(json);return bean});com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver("$BlobHash",function(property,json){return new com.coremedia.ui.data.impl.BlobHash(json[property])});com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver("$Blob",function(property,json){return new com.coremedia.ui.data.impl.BlobImpl(json[property],
json["contentType"],json["size"],undefined,json["hash"],AS3.cast(com.coremedia.ui.data.RemoteBean,com.coremedia.ui.data.impl.BeanClassRegistry.resolveBeans(json["metadata"])))})}return AS3.cast(BeanFactoryImpl,com.coremedia.ui.data.beanFactory)}function registerRemoteBeanClasses(){var remoteBeanClasses=Array.prototype.slice.call(arguments);for(var i=0;i<remoteBeanClasses.length;i++){var descriptor=remoteBeanClasses[i];if(AS3.is(descriptor,Class))this.registerRemoteBeanClass(AS3.cast(Class,descriptor));
else for(var uriTemplate in descriptor){var classOrClassName=descriptor[uriTemplate];var remoteBeanClass=AS3.as(classOrClassName,Class)||AS3.as(joo.getQualifiedObject(classOrClassName),Class);if(!remoteBeanClass)throw new AS3.Error("Values of remote Bean classes descriptor must be Class objects or fully qualified names of classes (String).");this.registerRemoteBeanClass(remoteBeanClass,uriTemplate)}}}function registerRemoteObjectResolver(property,resolver){com.coremedia.ui.data.impl.BeanClassRegistry.registerRemoteObjectResolver(property,
resolver)}function registerTypeImplementation(type,clazz){com.coremedia.ui.data.impl.BeanClassRegistry.registerTypeImplementation(type,clazz)}function registerRemoteBeanClass(remoteBeanClass,uriTemplate){if(arguments.length<=1)uriTemplate=null;if(!uriTemplate){var metadata=remoteBeanClass.prototype["metadata"];if(metadata){var classMetadata=metadata[""];if(classMetadata){var restResourceAnnotation;for(var i=0;i<classMetadata.length;i+=2){var annotation=classMetadata[i];if(annotation==="RestResource"){restResourceAnnotation=
classMetadata[i+1];break}}if(restResourceAnnotation&&restResourceAnnotation[0]==="uriTemplate")uriTemplate=restResourceAnnotation[1]}}if(!uriTemplate)throw new AS3.Error("Class "+Ext.getClassName(remoteBeanClass)+" registered as a remote Bean class, but has no valid [RestResource(uriTemplate\x3d'...')] annotation.");}URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static.push(new com.coremedia.ui.data.impl.URITemplate(uriTemplate),remoteBeanClass)}function resolveBeans$static(object){return com.coremedia.ui.data.impl.BeanClassRegistry.resolveBeans(object)}
function createRemoteBean$static(path){for(var i=0;i<URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static.length;i+=2){var uriTemplate=AS3.as(URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static[i],com.coremedia.ui.data.impl.URITemplate);var binding=uriTemplate.match(path);if(binding){var typedClass=AS3.as(URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static[i+1],Class);return new typedClass(path,binding)}}return new com.coremedia.ui.data.impl.RemoteBeanImpl(path)}function getRemoteBean(path){var bean=com.coremedia.ui.data.impl.RemoteBeanCache.getRemoteBean(path);
if(!bean){bean=BeanFactoryImpl.createRemoteBean(path);com.coremedia.ui.data.impl.RemoteBeanCache.registerRemoteBean(path,bean)}return bean}function createLocalBean(properties){if(arguments.length<=0)properties=null;return new com.coremedia.ui.data.impl.BeanImpl(properties)}function createLocalBeans(objects){var this$=this;var beans=[];objects.forEach(function(object){beans.push(this$.createLocalBean(object))});return beans}function dispose(bean){com.coremedia.ui.data.impl.RemoteBeanCache.dispose(bean.getUriPath())}
function BeanFactoryImpl$(){}return{mixins:["com.coremedia.ui.data.IBeanFactory"],registerRemoteBeanClasses:registerRemoteBeanClasses,registerRemoteObjectResolver:registerRemoteObjectResolver,registerTypeImplementation:registerTypeImplementation,registerRemoteBeanClass:registerRemoteBeanClass,getRemoteBean:getRemoteBean,createLocalBean:createLocalBean,createLocalBeans:createLocalBeans,dispose:dispose,constructor:BeanFactoryImpl$,statics:{BEAN_TYPE_NAME:"$Bean",REFS_PROPERTY:"$Refs",URI_TEMPLATE_2_REMOTE_BEAN_CLASS:undefined,
initBeanFactory:initBeanFactory$static,resolveBeans:resolveBeans$static,createRemoteBean:createRemoteBean$static,__initStatics__:function(){URI_TEMPLATE_2_REMOTE_BEAN_CLASS$static_()}},requires:["AS3.Error","Ext","com.coremedia.ui.data.BeanState","com.coremedia.ui.data.IBeanFactory","com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.beanFactory","com.coremedia.ui.data.impl.IssueImpl"],uses:["com.coremedia.ui.data.impl.BeanClassRegistry","com.coremedia.ui.data.impl.BeanImpl","com.coremedia.ui.data.impl.BlobHash",
"com.coremedia.ui.data.impl.BlobImpl","com.coremedia.ui.data.impl.RemoteBeanCache","com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.URITemplate","com.coremedia.ui.data.impl.WriteResult"]}});Ext.define("com.coremedia.ui.data.impl.IssuesUtil",function(IssuesUtil){function getAllIssues$static(issuesJson){var allIssues=[];if(issuesJson){allIssues=allIssues.concat(issuesJson["global"]);for(var property in issuesJson["byProperty"])allIssues=allIssues.concat(AS3.as(issuesJson["byProperty"][property],Array))}return allIssues}function IssuesUtil$(){}return{constructor:IssuesUtil$,statics:{getAllIssues:getAllIssues$static}}});Ext.define("com.coremedia.ui.data.impl.RemoteServiceMethodResponse",function(RemoteServiceMethodResponse){return{}});Ext.define("com.coremedia.ui.data.impl.RequestQueue",function(RequestQueue){function requestQueue_(){this.requestQueue$B7LG=[]}function toBeNotifiedWhenIdle_(){this.toBeNotifiedWhenIdle$B7LG=[]}function beans_(){this.beans$B7LG=[]}function RequestQueue$(successCallback){requestQueue_.call(this);toBeNotifiedWhenIdle_.call(this);beans_.call(this);if(arguments.length<=0)successCallback=null;this.successCallback$B7LG=successCallback}function addBean(remoteBean){this.beans$B7LG.push(remoteBean)}function getETag(){return this.eTag$B7LG}
function setETag(value){if(this.eTag$B7LG!==value){this.eTag$B7LG=value;for(var i=0;i<this.beans$B7LG.length;i++)AS3.as(this.beans$B7LG[i],com.coremedia.ui.data.impl.QueuedRemoteBean).requestQueueETagUpdated()}}function flush(remoteBean,callback){if(arguments.length<=1)callback=null;if(this.requestQueue$B7LG.length>0){var requestQueueEntry=this.provideFreeRequestQueueEntry$B7LG(remoteBean);requestQueueEntry.callback=callback?callback:Ext.emptyFn}else this.invokeCallback$B7LG(remoteBean,callback,null)}
function propertiesUpdated(remoteBean,overwrittenValues,newValues){var requestQueueEntry=this.provideFreeRequestQueueEntry$B7LG(remoteBean);for(var property in overwrittenValues)requestQueueEntry.setProperty(property,newValues[property])}function provideFreeRequestQueueEntry(remoteBean){var requestQueueEntry;if(this.requestQueue$B7LG.length>0){requestQueueEntry=this.requestQueue$B7LG[this.requestQueue$B7LG.length-1];if(requestQueueEntry.callback||requestQueueEntry.getRemoteBean()!==remoteBean){requestQueueEntry=
new com.coremedia.ui.data.impl.RequestQueueEntry(remoteBean);this.requestQueue$B7LG.push(requestQueueEntry)}}else{requestQueueEntry=new com.coremedia.ui.data.impl.RequestQueueEntry(remoteBean);this.requestQueue$B7LG.push(requestQueueEntry);com.coremedia.ui.util.EventUtil.invokeLater(AS3.bind(this,"writeChanges$B7LG"))}return requestQueueEntry}function writeChanges(){var requestQueueEntry=this.requestQueue$B7LG[0];var changedProperties=requestQueueEntry.getChangedProperties();if(changedProperties){if(!requestQueueEntry.callback)requestQueueEntry.callback=
Ext.emptyFn;requestQueueEntry.getRemoteBean().doWriteChanges(changedProperties)}else this.completeFirstRequestQueueEntry$B7LG(null)}function onWriteComplete(error){this.completeFirstRequestQueueEntry$B7LG(error)}function onWriteFailureInternal(){for(var i=0;i<this.requestQueue$B7LG.length;i++){var requestQueueEntry=this.requestQueue$B7LG[i];requestQueueEntry.clearChangedProperties()}}function completeFirstRequestQueueEntry(error){var requestQueueEntry=AS3.cast(com.coremedia.ui.data.impl.RequestQueueEntry,
this.requestQueue$B7LG.shift());if(this.requestQueue$B7LG.length>0)com.coremedia.ui.util.EventUtil.invokeLater(AS3.bind(this,"writeChanges$B7LG"));else{var toBeNotified=this.toBeNotifiedWhenIdle$B7LG;this.toBeNotifiedWhenIdle$B7LG=[];for(var i=0;i<toBeNotified.length;i++)toBeNotified[i].notifyRequestQueueIdle()}this.invokeCallback$B7LG(requestQueueEntry.getRemoteBean(),requestQueueEntry.callback,error)}function invokeCallback(remoteBean,callback,error){if(callback)try{var result=new com.coremedia.ui.data.impl.FlushResultImpl(remoteBean,
error);callback(result)}catch(e){if(AS3.is(e,AS3.Error))com.coremedia.ui.logging.Logger.error(com.coremedia.ui.data.impl.QueuedRemoteBean+": Error while invoking callback: "+e);else throw e;}}function writePending(){for(var i=0;i<this.requestQueue$B7LG.length;i++){var requestQueueEntry=this.requestQueue$B7LG[i];if(requestQueueEntry.getChangedProperties())return true}return false}function getPendingWriteProperties(remoteBean){var result=[];for(var i=0;i<this.requestQueue$B7LG.length;i++){var requestQueueEntry=
this.requestQueue$B7LG[i];if(requestQueueEntry.getRemoteBean()===remoteBean)for(var property in requestQueueEntry.getChangedProperties())result.push(property)}return result}function notifyWhenIdle(remoteBean){if(this.toBeNotifiedWhenIdle$B7LG.indexOf(remoteBean)===-1)this.toBeNotifiedWhenIdle$B7LG.push(remoteBean)}function onWriteSuccess(remoteBean){if(this.successCallback$B7LG)this.successCallback$B7LG(remoteBean)}return{eTag$B7LG:null,successCallback$B7LG:null,constructor:RequestQueue$,addBean:addBean,
getETag:getETag,setETag:setETag,flush:flush,propertiesUpdated:propertiesUpdated,provideFreeRequestQueueEntry$B7LG:provideFreeRequestQueueEntry,writeChanges$B7LG:writeChanges,onWriteComplete:onWriteComplete,onWriteFailureInternal:onWriteFailureInternal,completeFirstRequestQueueEntry$B7LG:completeFirstRequestQueueEntry,invokeCallback$B7LG:invokeCallback,writePending:writePending,getPendingWriteProperties:getPendingWriteProperties,notifyWhenIdle:notifyWhenIdle,onWriteSuccess:onWriteSuccess,requires:["AS3.Error",
"Ext","com.coremedia.ui.util.EventUtil"],uses:["com.coremedia.ui.data.impl.FlushResultImpl","com.coremedia.ui.data.impl.QueuedRemoteBean","com.coremedia.ui.data.impl.RequestQueueEntry","com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.ui.data.impl.FlushResultImpl",function(FlushResultImpl){function FlushResultImpl$(bean,error){this["remoteBean"]=bean;this["error"]=error;this["successful"]=error?false:true}return{mixins:["com.coremedia.ui.data.FlushResult"],constructor:FlushResultImpl$,requires:["com.coremedia.ui.data.FlushResult"]}});Ext.define("com.coremedia.ui.data.impl.RemoteBeanCache",function(RemoteBeanCache){var beanCache$static;function beanCache$static_(){beanCache$static={}}function getRemoteBean$static(path){return AS3.as(beanCache$static[path],com.coremedia.ui.data.RemoteBean)}function registerRemoteBean$static(path,bean){beanCache$static[path]=bean}function getLevels$static(){var result={};for(var path in beanCache$static)try{var remoteBean=AS3.as(beanCache$static[path],com.coremedia.ui.data.RemoteBean);var className=
Ext.getClassName(remoteBean);var level=result[className];if(!level)result[className]=level=new com.coremedia.ui.data.impl.CacheLevel;level.total++;if(remoteBean.isLoaded())level.loaded++;if(hasAnyListener$static(remoteBean))level.listened++}catch(e){com.coremedia.ui.logging.Logger.debug("error while determining type of cache entry: "+e.message+"; ignoring")}return result}function hasAnyListener$static(remoteBean){var observable=AS3.as(remoteBean,Ext.util.Observable);if(!observable)return false;for(var eventName in observable.events)if(observable.hasListener(eventName))return true;
return false}function peek$static(path){return AS3.as(beanCache$static[path],com.coremedia.ui.data.RemoteBean)}function search$static(uriTemplate){var foundBeans=[];for(var path in beanCache$static)if(uriTemplate.matches(path))foundBeans.push(beanCache$static[path]);return foundBeans}function invalidateAll$static(){for(var path in beanCache$static){var remoteBean=AS3.as(beanCache$static[path],com.coremedia.ui.data.RemoteBean);remoteBean.invalidate()}}function disposeAll$static(){beanCache$static=
{}}function dispose$static(path){delete beanCache$static[path]}function RemoteBeanCache$(){}return{constructor:RemoteBeanCache$,statics:{beanCache:undefined,getRemoteBean:getRemoteBean$static,registerRemoteBean:registerRemoteBean$static,getLevels:getLevels$static,peek:peek$static,search:search$static,invalidateAll:invalidateAll$static,disposeAll:disposeAll$static,dispose:dispose$static,__initStatics__:function(){beanCache$static_()}},requires:["Ext","Ext.util.Observable","com.coremedia.ui.data.RemoteBean"],
uses:["com.coremedia.ui.data.impl.CacheLevel","com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.ui.data.impl.BeanValueDependency",function(BeanValueDependency){function BeanValueDependency$(bean){this.bean$GFn_=bean}function getId(){return this.bean$GFn_.getDependencyId()}function addListener(listener){this.bean$GFn_.addValueChangeListener(listener)}function removeListener(listener){this.bean$GFn_.removeValueChangeListener(listener)}return{mixins:["com.coremedia.ui.data.dependencies.Dependency"],bean$GFn_:null,constructor:BeanValueDependency$,getId:getId,addListener:addListener,
removeListener:removeListener,requires:["com.coremedia.ui.data.dependencies.Dependency"]}});Ext.define("com.coremedia.ui.data.impl.PropertyChangeEventImpl",function(PropertyChangeEventImpl){function PropertyChangeEventImpl$(bean,property,oldValue,newValue,oldState,newState){switch(Math.max(arguments.length,4)){case 4:oldState=null;case 5:newState=null}this["bean"]=bean;this["property"]=property;this["oldValue"]=oldValue;this["newValue"]=newValue;this["oldState"]=!oldState?com.coremedia.ui.data.BeanState.READABLE:oldState;this["newState"]=!newState?com.coremedia.ui.data.BeanState.READABLE:
newState}return{mixins:["com.coremedia.ui.data.PropertyChangeEvent"],constructor:PropertyChangeEventImpl$,requires:["com.coremedia.ui.data.BeanState","com.coremedia.ui.data.PropertyChangeEvent"]}});Ext.define("com.coremedia.ui.data.impl.ProblemDescriptionImpl",function(ProblemDescriptionImpl){function ProblemDescriptionImpl$(json){this["code"]=json["code"];this["arguments"]=json["arguments"]}return{mixins:["com.coremedia.ui.data.ProblemDescription"],constructor:ProblemDescriptionImpl$,requires:["com.coremedia.ui.data.ProblemDescription"]}});Ext.define("com.coremedia.ui.data.impl.URITemplate",function(URITemplate){var URI_TEMPLATE_VAR_PATTERN$static=/{([a-z][a-z0-9_$]*):([^}]+)}/gi;function containsVariables$static(uriTemplate){URI_TEMPLATE_VAR_PATTERN$static.lastIndex=0;return URI_TEMPLATE_VAR_PATTERN$static.test(uriTemplate)}function URITemplate$(uriTemplate){this.uriTemplate$PDwu=uriTemplate;var uriPattern="";this.variables$PDwu=[];URI_TEMPLATE_VAR_PATTERN$static.lastIndex=0;while(true){var startIndex=URI_TEMPLATE_VAR_PATTERN$static.lastIndex;
var match=URI_TEMPLATE_VAR_PATTERN$static.exec(uriTemplate);var endIndex=match?URI_TEMPLATE_VAR_PATTERN$static.lastIndex-match[0].length:AS3.int_.MAX_VALUE;if(endIndex>startIndex)uriPattern+=regExpEscape$static(uriTemplate.substring(startIndex,endIndex));if(!match)break;this.variables$PDwu.push(match[1]);uriPattern+="("+match[2]+")"}uriPattern="^"+uriPattern+"$";this.uriPattern$PDwu=new RegExp(uriPattern)}function regExpEscape$static(literal){return literal.replace(/([\\.+*?[\]^$(){}=!<>|:-])/g,"\\$1")}
function matches(uri){this.uriPattern$PDwu.lastIndex=0;return this.uriPattern$PDwu.test(uri)}function match(uri){this.uriPattern$PDwu.lastIndex=0;var matches=this.uriPattern$PDwu.exec(uri);if(matches){var binding={};for(var i=0;i<this.variables$PDwu.length;++i)binding[this.variables$PDwu[i]]=matches[i+1];return binding}return null}function getPattern(variable){if(!this.variableToMatcher$PDwu){this.variableToMatcher$PDwu={};for(var i=0;i<this.variables$PDwu.length;++i){var varName=this.variables$PDwu[i];
this.variableToMatcher$PDwu[varName]=new RegExp("{"+varName+"(?::[^}]+)?}","g")}}return this.variableToMatcher$PDwu[variable]}function format(binding,value){if(arguments.length<=1)value=null;var result=value!==null?value:this.uriTemplate$PDwu;for(var variable in binding){var pattern=this.getPattern$PDwu(variable);if(!pattern)throw new AS3.Error("URITemplate.format(): missing binding for variable "+variable+".");result=result.replace(pattern,binding[variable]);encodeURIComponent(result).replace(/%2F/g,
"/")}return result}function toString(){return this.uriTemplate$PDwu}return{uriTemplate$PDwu:null,uriPattern$PDwu:null,variables$PDwu:null,variableToMatcher$PDwu:null,constructor:URITemplate$,matches:matches,match:match,getPattern$PDwu:getPattern,format:format,toString:toString,statics:{containsVariables:containsVariables$static},requires:["AS3.Error","AS3.int_"]}});Ext.define("com.coremedia.ui.data.impl.BlobHash",function(BlobHash){function BlobHash$(hash){this.hash$qKBP=hash}function getHash(){return this.hash$qKBP}return{hash$qKBP:null,constructor:BlobHash$,getHash:getHash}});Ext.define("com.coremedia.ui.data.impl.RemoteService",function(RemoteService){var csrfTokenHeaderName$static=null;var csrfTokenParameterName$static=null;var csrfTokenValue$static=null;function getCsrfTokenHeaderName$static(){return csrfTokenHeaderName$static}function getCsrfTokenParameterName$static(){return csrfTokenParameterName$static}function getCsrfTokenValue$static(){return csrfTokenValue$static}function static$0(){init$static()}function init$static(){AS3.setBindable(Ext.Ajax,"defaultHeaders",
{"Accept":"application/json, text/xml"});var originalFn=Ext.Ajax["request"];Ext.Ajax.request=function(options){if(Ext.isFunction(options.failure)){var originalFailure=options.failure;options.failure=function(response,options){response["requestMethod"]=options.method;originalFailure.call(this,response,options)}}if(Ext.isFunction(options.success)){var originalSuccess=options.success;options.success=function(response,options){response["requestMethod"]=options.method;originalSuccess.call(this,response,
options)}}if(Ext.isFunction(options.callback)){var originalCallback=options.callback;options.callback=function(options,success,response){response["requestMethod"]=options.method;originalCallback.call(this,options,success,response)}}originalFn.call(Ext.Ajax,options)}}function RemoteService$(){}function initCsrfToken$static(csrfToken){if(arguments.length<=0)csrfToken=null;if(csrfToken){csrfTokenHeaderName$static=csrfToken["headerName"];csrfTokenParameterName$static=csrfToken["parameterName"];csrfTokenValue$static=
csrfToken["token"];if(csrfTokenHeaderName$static&&csrfTokenValue$static){AS3.getBindable(Ext.Ajax,"defaultHeaders","DUMMY")[csrfTokenHeaderName$static]=csrfTokenValue$static;return}}com.coremedia.ui.logging.Logger.warn("could not determine session id; will not send csrfToken headers")}function getConnection$static(){return Ext.Ajax}function APPLICATION_URI$static_(){RemoteService.APPLICATION_URI=net.jangaroo.net.URIUtils.parse(window.location.href)}function REMOTE_SERVICE_URI$static_(){RemoteService.REMOTE_SERVICE_URI=
net.jangaroo.net.URIUtils.parse(com.coremedia.ui.util.UrlUtil.getHashParam("coremediaRemoteServiceUri")||window["coremediaRemoteServiceUri"]||"api/")}function REMOTE_SERVICE_ABSOLUTE_URI$static_(){RemoteService.REMOTE_SERVICE_ABSOLUTE_URI=RemoteService.APPLICATION_URI.resolve(RemoteService.REMOTE_SERVICE_URI)}function resolveRelativeUris$static(object,baseUri){var parsedBase=net.jangaroo.net.URIUtils.parse(baseUri);var base=RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.resolve(parsedBase);resolveRelativeUris1$static(object,
base)}function resolveRelativeUris1$static(object,baseUri){if(Ext.isArray(object))for(var i=0;i<object.length;++i)resolveRelativeUris1$static(object[i],baseUri);else for(var m in object){var value=object[m];if(typeof value==="object"&&value!=null){var relativeUri=value["."];if(typeof relativeUri=="string")object[m]=RemoteService.relativizeAgainstServicePath(relativeUri,baseUri);else resolveRelativeUris1$static(value,baseUri)}}}function relativizeAgainstServicePath$static(reference,base){if(arguments.length<=
1)base=null;var referenceUri=net.jangaroo.net.URIUtils.parse(reference);var resolved=(base!==null?base:RemoteService.REMOTE_SERVICE_ABSOLUTE_URI).resolve(referenceUri);var relativized=RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.relativize(resolved);return relativized.toString()}function calculateRequestURI$static(uri){return RemoteService.APPLICATION_URI.relativize(RemoteService.calculateAbsoluteURI(uri)).toString()}function calculateAbsoluteURI$static(uri){return RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.resolve(net.jangaroo.net.URIUtils.parse(uri))}
function calculateRemoteURI$static(uri){return RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.relativize(RemoteService.APPLICATION_URI.resolve(net.jangaroo.net.URIUtils.parse(uri))).toString()}function relativizeURI$static(baseUri,reference){var absoluteBase=RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.resolve(net.jangaroo.net.URIUtils.parse(baseUri));var absoluteUri=RemoteService.REMOTE_SERVICE_ABSOLUTE_URI.resolve(net.jangaroo.net.URIUtils.parse(reference));return absoluteBase.relativize(absoluteUri).toString()}
var MARSHALLERS$static;function MARSHALLERS$static_(){MARSHALLERS$static=[com.coremedia.ui.data.Calendar,function(value){return value.marshal()},Date,function(value){return Ext.Date.format(value,"c")}]}function registerMarshaller$static(clazz,marshaller){MARSHALLERS$static.push(clazz,marshaller)}function marshalValue$static(value){if(!value)return value;for(var j=0;j<MARSHALLERS$static.length;j+=2){var clazz=MARSHALLERS$static[j];if(value instanceof clazz){var marshaller=MARSHALLERS$static[j+1];return marshaller(value)}}if(value.constructor===
Object){var resultObject={};for(var p in value)resultObject[p]=RemoteService.marshalValue(value[p]);return resultObject}else if(Ext.isArray(value)){var resultArray=[];for(var i=0;i<AS3.as(value,Array).length;i++)resultArray[i]=RemoteService.marshalValue(value[i]);return resultArray}else return value}function getEtag$static(request){var etag=request.getResponseHeader(RemoteService.ETAG_HTTP_HEADER);if(!etag)return etag;if(etag.substr(0,1)==='"')etag=etag.substr(1);if(etag.substr(etag.length-1,1)===
'"')etag=etag.substr(0,etag.length-1);return etag.replace('\\"','"')}function formatEtag$static(etag){return etag.replace('"','\\"')+'"'}function resolveResponse$static(responseText,baseUri){if(responseText){var jsonResult=Ext.JSON.decode(responseText);resolveRelativeUris$static(jsonResult,baseUri);if(Ext.isArray(jsonResult))jsonResult={items:jsonResult};return com.coremedia.ui.data.impl.BeanClassRegistry.resolveBeans(jsonResult)}return null}function createRemoteError$static(response,strategy){if(arguments.length<=
1)strategy=null;var json=response.responseText&&response.responseText.indexOf("{")===0&&Ext.JSON.decode(response.responseText);if(!json)json={};json=Ext.apply({$Type:"com.coremedia.ui.data.error.RemoteError",method:response["requestMethod"],status:response.status,errorCode:"HTTP-"+response.status,errorName:RemoteService.HTTP_ERROR,message:response.statusText},json);var remoteError=AS3.as(com.coremedia.ui.data.impl.BeanClassRegistry.resolveBeans(json),com.coremedia.ui.data.error.RemoteError);if(!remoteError)remoteError=
new com.coremedia.ui.data.error.RemoteError(json);remoteError.setSync(strategy);return remoteError}function batchedForkJoinRequest$static(sequential,items,batchSize,uri,method,requestParams,batchResponseHandler,joinHandler){var batches=[];var batchIndex=0;var startIndex=0;var endIndex=Math.min(batchSize,items.length);while(endIndex<items.length){batches[batchIndex]=items.slice(startIndex,endIndex);batchIndex++;startIndex=endIndex;endIndex=Math.min(endIndex+batchSize,items.length)}batches[batchIndex]=
items.slice(startIndex,endIndex);var execEvt=new com.coremedia.ui.util.ExecuteEventually(function(){joinHandler()});var batchCount=0;function batchRequest(){var batch=batches[batchCount];if(batch.length>0){execEvt.delay();var params={};Ext.apply(params,requestParams);params.items=batch;var rsm=new com.coremedia.ui.data.impl.RemoteServiceMethod(uri,method,true);rsm.request(params,function(rsmr){if(sequential&&batchCount<batches.length-2){batchCount++;batchRequest()}batchResponseHandler(rsmr);execEvt.proceed()});
if(!sequential&&batchCount<batches.length-2){batchCount++;batchRequest()}}}batchRequest();execEvt.proceed()}return{constructor:RemoteService$,statics:{HTTP_ERROR:"HTTP-ERROR",getCsrfTokenHeaderName:getCsrfTokenHeaderName$static,getCsrfTokenParameterName:getCsrfTokenParameterName$static,getCsrfTokenValue:getCsrfTokenValue$static,initCsrfToken:initCsrfToken$static,getConnection:getConnection$static,APPLICATION_URI:undefined,REMOTE_SERVICE_URI:undefined,REMOTE_SERVICE_ABSOLUTE_URI:undefined,relativizeAgainstServicePath:relativizeAgainstServicePath$static,
calculateRequestURI:calculateRequestURI$static,calculateAbsoluteURI:calculateAbsoluteURI$static,calculateRemoteURI:calculateRemoteURI$static,relativizeURI:relativizeURI$static,MARSHALLERS:undefined,registerMarshaller:registerMarshaller$static,marshalValue:marshalValue$static,ETAG_HTTP_HEADER:"Etag",getEtag:getEtag$static,formatEtag:formatEtag$static,resolveResponse:resolveResponse$static,createRemoteError:createRemoteError$static,batchedForkJoinRequest:batchedForkJoinRequest$static,__initStatics__:function(){static$0();
APPLICATION_URI$static_();REMOTE_SERVICE_URI$static_();REMOTE_SERVICE_ABSOLUTE_URI$static_();MARSHALLERS$static_()}},requires:["Ext","Ext.Ajax","Ext.Date","Ext.JSON","com.coremedia.ui.data.Calendar","com.coremedia.ui.data.error.RemoteError","com.coremedia.ui.util.ExecuteEventually","com.coremedia.ui.util.UrlUtil","net.jangaroo.net.URIUtils"],uses:["com.coremedia.ui.data.impl.BeanClassRegistry","com.coremedia.ui.data.impl.RemoteServiceMethod","com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.ui.data.impl.CacheLevel",function(CacheLevel){function CacheLevel$(){}return{total:0,loaded:0,listened:0,constructor:CacheLevel$}});Ext.define("com.coremedia.ui.data.impl.BeanImpl",function(BeanImpl){var nextDependencyId$static=0;function BeanImpl$(value){this.super$IuP_();if(arguments.length<=0)value=null;this.value$IuP_=value||{};this.propertiesWithListeners={}}function getValueObject(){return this.value$IuP_}function addPropertyChangeListener(property,onChange){this.addListener(property,onChange);this.propertiesWithListeners[property]=true}function removePropertyChangeListener(property,onChange){this.removeListener(property,
onChange);if(!this.hasListener(property))delete this.propertiesWithListeners[property]}function hasPropertyChangeListener(property){return this.hasListener(property)}function addValueChangeListener(onChange){this.addPropertyChangeListener(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME,onChange)}function removeValueChangeListener(onChange){this.removePropertyChangeListener(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME,onChange)}function hasValueChangeListener(){return this.hasPropertyChangeListener(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME)}
function get(property){if(property===com.coremedia.ui.data.BeanState.PROPERTY_NAME)return this.getState();com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanPropertyDependency(this,property));return this.doGet(property,false)}function doGet(propertyPath,automaticallyInstantiate){var unwrapped=this.getUnwrapped(propertyPath,automaticallyInstantiate);if(AS3.is(unwrapped,Array))return this.wrapSubBeansInArray$IuP_(AS3.as(unwrapped,Array),propertyPath);else if(this.isSubObjectInternal(unwrapped,
propertyPath))return this.createSubBean(propertyPath);else return unwrapped}function wrapSubBeansInArray(array,propertyPath){var resultArray=null;for(var i=0;i<array.length;i++){var extendedPropertyPath=com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPath,i);var element=array[i];if(this.isSubObjectInternal(element,extendedPropertyPath)){if(!resultArray)resultArray=array.concat();resultArray[i]=this.createSubBean(extendedPropertyPath)}}return resultArray||array}function getUnwrapped(propertyPath,
automaticallyInstantiate){var propertyPathArcs=com.coremedia.ui.data.impl.PropertyPathUtil.deserialize(propertyPath);var current=this.value$IuP_;var propertyPathPrefix;for(var i=0;i<propertyPathArcs.length;i++){var property=propertyPathArcs[i];var nextPropertyPathPrefix=com.coremedia.ui.data.impl.PropertyPathUtil.append(propertyPathPrefix,property);if(i>0&&!this.isSubObjectInternal(current,propertyPathPrefix)&&!(Ext.isArray(current)&&this.hasIndex$IuP_(current,property))){current=undefined;break}current=
automaticallyInstantiate?this.getOrCreate(current,propertyPathPrefix,property):current[property];propertyPathPrefix=nextPropertyPathPrefix}return current}function getOrCreate(object,propertyPath,lastProperty){var result=object[lastProperty];if(result===undefined){result=com.coremedia.ui.data.beanFactory.createLocalBean();this.set(com.coremedia.ui.data.impl.PropertyPathUtil.append(propertyPath,lastProperty),result);object[lastProperty]=result}return result}function instantiate(property){com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanPropertyDependency(this,
property));return this.doGet(property,true)}function set(property,newValue){var properties={};properties[property]=newValue;return this.updateProperties(properties)}function getUpdatableArray(property){var oldValue=this.getUnwrapped(property,false);if(!AS3.is(oldValue,Array))throw new AS3.Error("property '"+property+"' is not array-valued, but contains: "+oldValue);var oldArray=AS3.as(oldValue,Array);var newArray=oldArray.concat();return newArray}function addAt(property,position,value){switch(Math.max(arguments.length,
1)){case 1:position=-1;case 2:value=null}var updatableArray=this.getUpdatableArray$IuP_(property);if(position<0)position=updatableArray.length;updatableArray.splice(position,0,value);this.set(property,updatableArray)}function removeAt(property,position){if(arguments.length<=1)position=-1;var updatableArray=this.getUpdatableArray$IuP_(property);if(position<0)position=updatableArray.length;var removedElement=updatableArray.splice(position,1)[0];if(AS3.is(removedElement,com.coremedia.ui.data.impl.SubBean))removedElement=
AS3.cast(com.coremedia.ui.data.impl.SubBean,removedElement).toObject();this.set(property,updatableArray);return removedElement}function toObject(){this.dependencyOnValue();return this.toObjectInternal$IuP_("",this.value$IuP_)}function dependencyOnValue(){com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanValueDependency(this))}function toObjectInternal(propertyPath,o){if(Ext.isArray(o)){var array=AS3.as(o,Array);var resultArray=[];for(var i=0;i<array.length;i++)resultArray[i]=
this.toObjectInternal$IuP_(com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPath,i),array[i]);return resultArray}else if(this.isSubObjectInternal(o,propertyPath)){var objectResult={};for(var name in o)objectResult[name]=this.toObjectInternal$IuP_(com.coremedia.ui.data.impl.PropertyPathUtil.append(propertyPath,name),o[name]);return objectResult}else return o}function updateProperties(newValues){return this.doUpdateProperties(newValues,false,com.coremedia.ui.data.BeanState.READABLE,
com.coremedia.ui.data.BeanState.READABLE)!=null}function beforeUpdateProperty(){}function doUpdateProperties(newValues,ignoreUpdate,oldState,newState){var overwrittenValues=this.updatePropertiesWithoutEvents$IuP_(newValues,ignoreUpdate);this.firePropertyChangeEvents(overwrittenValues,newValues,oldState,newState);if(!ignoreUpdate&&overwrittenValues)this.propertiesUpdated(overwrittenValues,newValues);return overwrittenValues}function propertiesUpdated(overwrittenValues,newValues){}function updatePropertiesWithoutEvents(newValues,
ignoreUpdate){var overwrittenValues={};var result=null;for(var propertyPath in newValues){var alreadyOverwritten=false;var propertyPathArcs=com.coremedia.ui.data.impl.PropertyPathUtil.deserialize(propertyPath);var base=this.value$IuP_;var propertyPathPrefix=null;for(var i=0;i<propertyPathArcs.length-1;i++){var property=propertyPathArcs[i];propertyPathPrefix=com.coremedia.ui.data.impl.PropertyPathUtil.append(propertyPathPrefix,property);var newBase=base[property];if(!this.isSubObjectInternal(newBase,
propertyPathPrefix)&&!(Ext.isArray(newBase)&&this.hasIndex$IuP_(newBase,propertyPathArcs[i+1]))){if(!alreadyOverwritten){overwrittenValues[propertyPathPrefix]=newBase;result=overwrittenValues;alreadyOverwritten=true}if(Ext.isArray(newBase)&&propertyPathArcs[i+1]===String(newBase.length)){newBase=newBase.concat();newBase.push(this.createSubObject())}else newBase=this.createSubObject();base[property]=newBase}base=newBase}var newValue=newValues[propertyPath];var lastProperty=propertyPathArcs[propertyPathArcs.length-
1];var oldValue=base[lastProperty];if(!com.coremedia.ui.util.ObjectUtils.equal(oldValue,newValue)){if(!ignoreUpdate)this.beforeUpdateProperty();newValue=this.rescueBlobs$IuP_(oldValue,newValue,propertyPath);if(newValue===undefined)delete base[lastProperty];else base[lastProperty]=newValue;if(!alreadyOverwritten){overwrittenValues[propertyPath]=oldValue;result=overwrittenValues;alreadyOverwritten=true}}}return result}function hasIndex(array,property){return array.hasOwnProperty(property)&&property===
String(Number(property))}function rescueBlobs(oldValue,newValue,propertyPath){if(AS3.is(newValue,com.coremedia.ui.data.Blob)&&AS3.is(oldValue,com.coremedia.ui.data.Blob)){var newBlob=AS3.cast(com.coremedia.ui.data.impl.BlobImpl,newValue);var oldBlob=AS3.cast(com.coremedia.ui.data.impl.BlobImpl,oldValue);if(newBlob.getSize()===oldBlob.getSize()&&newBlob.getContentType()===oldBlob.getContentType()){if(newBlob.getHash()&&newBlob.getHash()===oldBlob.getHash())return oldValue;if(oldBlob.getUri()===newBlob.getUri()&&
newBlob.isImmutable())return oldValue}}else if(this.isSubObjectInternal(oldValue,propertyPath)&&this.isSubObjectInternal(newValue,propertyPath))for(var key in newValue)newValue[key]=this.rescueBlobs$IuP_(oldValue[key],newValue[key],com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPath,key));return newValue}function createSubBean(propertyPathPrefix){return new com.coremedia.ui.data.impl.SubBean(this,propertyPathPrefix)}function createSubObject(){return{}}function isSubObjectInternal(value,
propertyPath){return!propertyPath||value!==null&&typeof value==="object"&&this.isSubObject(value,propertyPath)}function isSubObject(value,propertyPath){return false}function firePropertyChangeEvents(oldValues,newValues,oldState,newState){if(oldValues)for(var property in oldValues){var oldValue=oldValues[property];var newValue=newValues[property];this.fireTopLevelPropertyChangeEvent(property,oldValue,newValue,oldState,newState);this.fireSubBeanPropertyChangeEvents$IuP_("",property,oldValue,newValue)}}
function fireTopLevelPropertyChangeEvent(property,oldValue,newValue,oldState,newState){var isPropertyChange=!this.isSubObjectInternal(oldValue,property)||!this.isSubObjectInternal(newValue,property);if(isPropertyChange&&this.hasListener(property)||this.hasListener(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME)){var propertyChangeEvent=com.coremedia.ui.data.util.PropertyChangeEventUtil.createEvent(this,property,oldValue,newValue,oldState,newState);if(isPropertyChange)this.fireEvent(property,
propertyChangeEvent);this.fireEvent(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME,propertyChangeEvent)}}function fireSubBeanPropertyChangeEvents(propertyPathPrefix,property,oldValue,newValue){var subBeanPropertyPath=propertyPathPrefix===""?property:com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPathPrefix,property);var isPropertyChange=!this.isSubObjectInternal(oldValue,subBeanPropertyPath)||!this.isSubObjectInternal(newValue,subBeanPropertyPath);var listenerPropertyPath=
com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPathPrefix,property);var valueChangeListenerPath=com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPathPrefix,com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME);if(isPropertyChange&&this.hasListener(listenerPropertyPath)||this.hasListener(valueChangeListenerPath)){var subBean=this.createSubBean(propertyPathPrefix);var propertyChangeEvent=com.coremedia.ui.data.util.PropertyChangeEventUtil.createEvent(subBean,
property,oldValue,newValue);if(isPropertyChange)this.fireEvent(listenerPropertyPath,propertyChangeEvent);this.fireEvent(valueChangeListenerPath,propertyChangeEvent)}this.fireNestedPropertyChangeEvents$IuP_(subBeanPropertyPath,oldValue,newValue)}function fireNestedPropertyChangeEvents(propertyPathPrefix,oldValues,newValues){var wasSubObject=this.isSubObjectInternal(oldValues,propertyPathPrefix);var isSubObjectNow=this.isSubObjectInternal(newValues,propertyPathPrefix);if(wasSubObject||isSubObjectNow){if(wasSubObject)for(var prop1 in oldValues)if(oldValues.hasOwnProperty(prop1)){var overwrittenPropertyValue1=
oldValues[prop1];var newPropertyValue1=isSubObjectNow&&newValues.hasOwnProperty(prop1)?newValues[prop1]:undefined;this.subBeanPropertyMightHaveChanged$IuP_(propertyPathPrefix,prop1,overwrittenPropertyValue1,newPropertyValue1)}if(isSubObjectNow)for(var prop2 in newValues)if(newValues.hasOwnProperty(prop2))if(!(wasSubObject&&oldValues.hasOwnProperty(prop2)))this.subBeanPropertyMightHaveChanged$IuP_(propertyPathPrefix,prop2,undefined,newValues[prop2])}else{var overwrittenArray=AS3.as(oldValues,Array);
var newArray=AS3.as(newValues,Array);if(overwrittenArray||newArray){overwrittenArray=overwrittenArray||[];newArray=newArray||[];var maxLength=Math.max(overwrittenArray.length,newArray.length);for(var i=0;i<maxLength;i++)this.fireNestedPropertyChangeEvents$IuP_(com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(propertyPathPrefix,i),overwrittenArray[i],newArray[i])}}}function subBeanPropertyMightHaveChanged(propertyPathPrefix,prop,oldValue,newValue){if(!com.coremedia.ui.util.ObjectUtils.equal(oldValue,
newValue))this.fireSubBeanPropertyChangeEvents$IuP_(propertyPathPrefix,prop,oldValue,newValue)}function toJson(){return com.coremedia.ui.util.ObjectUtils.toJson(this.toObject())}function toString(){return this.toJson()}function getState(){return com.coremedia.ui.data.BeanState.READABLE}function getDependencyId(){if(this.dependencyKey$IuP_===null)this.dependencyKey$IuP_="local:"+nextDependencyId$static++;return this.dependencyKey$IuP_}return{extend:"Ext.util.Observable",mixins:["com.coremedia.ui.data.impl.SubBeanParent"],
value$IuP_:null,propertiesWithListeners:null,dependencyKey$IuP_:null,constructor:BeanImpl$,super$IuP_:function(){Ext.util.Observable.prototype.constructor.apply(this,arguments)},getValueObject:getValueObject,addPropertyChangeListener:addPropertyChangeListener,removePropertyChangeListener:removePropertyChangeListener,hasPropertyChangeListener:hasPropertyChangeListener,addValueChangeListener:addValueChangeListener,removeValueChangeListener:removeValueChangeListener,hasValueChangeListener:hasValueChangeListener,
get:get,doGet:doGet,wrapSubBeansInArray$IuP_:wrapSubBeansInArray,getUnwrapped:getUnwrapped,getOrCreate:getOrCreate,instantiate:instantiate,set:set,getUpdatableArray$IuP_:getUpdatableArray,addAt:addAt,removeAt:removeAt,toObject:toObject,dependencyOnValue:dependencyOnValue,toObjectInternal$IuP_:toObjectInternal,updateProperties:updateProperties,beforeUpdateProperty:beforeUpdateProperty,doUpdateProperties:doUpdateProperties,propertiesUpdated:propertiesUpdated,updatePropertiesWithoutEvents$IuP_:updatePropertiesWithoutEvents,
hasIndex$IuP_:hasIndex,rescueBlobs$IuP_:rescueBlobs,createSubBean:createSubBean,createSubObject:createSubObject,isSubObjectInternal:isSubObjectInternal,isSubObject:isSubObject,firePropertyChangeEvents:firePropertyChangeEvents,fireTopLevelPropertyChangeEvent:fireTopLevelPropertyChangeEvent,fireSubBeanPropertyChangeEvents$IuP_:fireSubBeanPropertyChangeEvents,fireNestedPropertyChangeEvents$IuP_:fireNestedPropertyChangeEvents,subBeanPropertyMightHaveChanged$IuP_:subBeanPropertyMightHaveChanged,toJson:toJson,
toString:toString,getState:getState,getDependencyId:getDependencyId,requires:["AS3.Error","Ext","Ext.util.Observable","com.coremedia.ui.data.BeanState","com.coremedia.ui.data.Blob","com.coremedia.ui.data.beanFactory","com.coremedia.ui.data.dependencies.DependencyTracker","com.coremedia.ui.data.impl.SubBeanParent","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.ui.data.impl.BeanConstants","com.coremedia.ui.data.impl.BeanPropertyDependency","com.coremedia.ui.data.impl.BeanValueDependency",
"com.coremedia.ui.data.impl.BlobImpl","com.coremedia.ui.data.impl.PropertyPathUtil","com.coremedia.ui.data.impl.SubBean","com.coremedia.ui.data.util.PropertyChangeEventUtil"]}});Ext.define("com.coremedia.ui.data.impl.SubBeanParent",function(SubBeanParent){return{mixins:["com.coremedia.ui.data.Bean"],requires:["com.coremedia.ui.data.Bean"]}});Ext.define("com.coremedia.ui.data.impl.RequestQueueEntry",function(RequestQueueEntry){function RequestQueueEntry$(remoteBean){this.remoteBean$s7K2=remoteBean}function getRemoteBean(){return this.remoteBean$s7K2}function getChangedProperties(){return this.changedProperties$s7K2}function clearChangedProperties(){this.changedProperties$s7K2=null}function setProperty(propertyName,value){if(!this.changedProperties$s7K2)this.changedProperties$s7K2={};var merged=this.tryToMergeProperty$s7K2(propertyName,
value);if(merged)return;this.removeObsoleteCurrentProperties$s7K2(propertyName);this.changedProperties$s7K2[propertyName]=value}function tryToMergeProperty(propertyName,value){var subsumingPropName;for(var propName in this.changedProperties$s7K2)if(com.coremedia.ui.data.impl.PropertyPathUtil.pathSubsumesPath(propName,propertyName)){subsumingPropName=propName;break}if(subsumingPropName){try{var subsumer=this.changedProperties$s7K2[subsumingPropName];var remainingPropPathArgs=com.coremedia.ui.data.impl.PropertyPathUtil.deserialize(propertyName.substr(subsumingPropName.length+
1));var lastPropertyName=remainingPropPathArgs.pop();var base=com.coremedia.ui.util.ObjectUtils.getPropertyAt(subsumer,remainingPropPathArgs);com.coremedia.ui.util.ObjectUtils.setProperty(base,lastPropertyName,value)}catch(err){if(AS3.is(err,AS3.Error));else throw err;}return true}return false}function removeObsoleteCurrentProperties(propertyName){var this$=this;var currentPropertyNames=[];for(var propName in this.changedProperties$s7K2)currentPropertyNames.push(propName);currentPropertyNames.forEach(function(propName){if(com.coremedia.ui.data.impl.PropertyPathUtil.pathSubsumesPath(propertyName,
propName))delete this$.changedProperties$s7K2[propName]})}return{callback:null,changedProperties$s7K2:null,remoteBean$s7K2:null,constructor:RequestQueueEntry$,getRemoteBean:getRemoteBean,getChangedProperties:getChangedProperties,clearChangedProperties:clearChangedProperties,setProperty:setProperty,tryToMergeProperty$s7K2:tryToMergeProperty,removeObsoleteCurrentProperties$s7K2:removeObsoleteCurrentProperties,requires:["AS3.Error","com.coremedia.ui.util.ObjectUtils"],uses:["com.coremedia.ui.data.impl.PropertyPathUtil"]}});Ext.define("com.coremedia.ui.data.impl.RemoteBeanImpl",function(RemoteBeanImpl){var LOADED_CHANGED_EVENT_NAME$static="_loadedChanged";var REMOTE_BEAN_LOADED_EVENT_NAME$static="_remoteBeanLoaded";var BEFORE_FLUSH_EVENT_NAME$static="_beforeFlush";var ETAG_EVENT_NAME$static="_etag";var INVALID$static=-4;var WAITING$static=-3;var LOADING$static=-2;var OVERTAKEN$static=-1;var VALID$static=0;function state_(){this.state$dHfa=INVALID$static}function beanState_(){this.beanState$dHfa=com.coremedia.ui.data.BeanState.UNKNOWN}
function static$0(){com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl.initRemoteErrorHandlerRegistry().registerErrorHandler(remoteErrorHandler$static);com.coremedia.ui.data.impl.RemoteService.registerMarshaller(RemoteBeanImpl,RemoteBeanImpl.marshal)}function RemoteBeanImpl$(path){this.super$dHfa();state_.call(this);beanState_.call(this);this.immediateProperties$dHfa={};this.path$dHfa=path;this.rq$dHfa=this.createRequestQueue();this.rq$dHfa.addBean(this)}function createRequestQueue(){return new com.coremedia.ui.data.impl.RequestQueue}
function getUriPath(){return this.path$dHfa}function getUri(){return com.coremedia.ui.data.impl.RemoteService.calculateRequestURI(this.path$dHfa)}function getAbsoluteUri(){return com.coremedia.ui.data.impl.RemoteService.calculateAbsoluteURI(this.path$dHfa).toString()}function get(property){if(property===com.coremedia.ui.data.BeanState.PROPERTY_NAME)return this.getState();if(property==="uriPath")return this.getUriPath();if(this.immediateProperties$dHfa[property])return this.doGet(property,false);this.queried$dHfa();
if(this.getState().exists===false)throw new com.coremedia.ui.data.error.NotExistsError(this,"get('"+property+"') on non-existing bean with path\x3d'"+this.path$dHfa+"'");if(this.getState().readable===false)throw new com.coremedia.ui.data.error.NotReadableError(this,property,"get('"+property+"') on unreadable bean with path\x3d'"+this.path$dHfa+"'");return com.coremedia.ui.data.impl.BeanImpl.prototype.get.call(this,property)}function getOrCreate(object,propertyPath,lastProperty){return object[lastProperty]}
function load(callback){if(arguments.length<=0)callback=null;if(this.state$dHfa===VALID$static){if(callback)callback(this)}else{if(callback)this.addListener(REMOTE_BEAN_LOADED_EVENT_NAME$static,function(passThroughData){callback(passThroughData)},undefined,{single:true});this.queried$dHfa()}}function flush(callback){if(arguments.length<=0)callback=null;if(this.hasListener(BEFORE_FLUSH_EVENT_NAME$static)){var beforeFlushEvent=new com.coremedia.ui.data.impl.BeforeFlushEventImpl(this);this.fireEvent(BEFORE_FLUSH_EVENT_NAME$static,
beforeFlushEvent)}this.rq$dHfa.flush(this,callback)}function isLoaded(){com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanPropertyDependency(this,LOADED_CHANGED_EVENT_NAME$static));return this.loaded$dHfa}function setImmediateProperty(property,value){this.immediateProperties$dHfa[property]=true;this.setInternal(property,value)}function setInternal(property,value){var properties={};properties[property]=value;return this.setInternalProperties(properties)}
function setInternalProperties(newValues){return this.doUpdateProperties(newValues,true,this.beanState$dHfa,this.beanState$dHfa)}function propertiesUpdated(overwrittenValues,newValues){if(this.state$dHfa===LOADING$static)this.state$dHfa=OVERTAKEN$static;if(this.writesAllowed$dHfa)this.rq$dHfa.propertiesUpdated(this,overwrittenValues,newValues);com.coremedia.ui.data.impl.BeanImpl.prototype.propertiesUpdated.call(this,overwrittenValues,newValues)}function invalidate(callback){if(arguments.length<=0)callback=
null;if(callback&&AS3.is(callback,Function))this.addListener(REMOTE_BEAN_LOADED_EVENT_NAME$static,function(passThroughData){callback(passThroughData)},undefined,{single:true});if(this.state$dHfa===LOADING$static)this.state$dHfa=OVERTAKEN$static;else if(this.state$dHfa===VALID$static||this.state$dHfa===INVALID$static){this.state$dHfa=INVALID$static;if(this.hasAnyListener())this.issueLoadRequest$dHfa();else if(this.beanState$dHfa===com.coremedia.ui.data.BeanState.NON_EXISTENT){this.beanState$dHfa=com.coremedia.ui.data.BeanState.UNKNOWN;
var oldLoaded=this.loaded$dHfa;this.loaded$dHfa=false;if(oldLoaded)this.fireEvent(LOADED_CHANGED_EVENT_NAME$static,this)}}}function checkOutdated(){if(this.state$dHfa===VALID$static)return false;com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanPropertyDependency(this,REMOTE_BEAN_LOADED_EVENT_NAME$static));this.queried$dHfa();return true}function hasAnyListener(){for(var e in this.events)if(this.hasListener(e))return true;return false}function queried(){if(this.state$dHfa===
INVALID$static)this.issueLoadRequest$dHfa()}function issueLoadRequest(){this.state$dHfa=WAITING$static;if(this.rq$dHfa.writePending())this.rq$dHfa.notifyWhenIdle(this);else if(!com.coremedia.ui.util.RequestCounter.isRequestRecommended())com.coremedia.ui.util.RequestCounter.whenRequestRecommended(AS3.bind(this,"issueLoadRequest$dHfa"));else this.doLoad$dHfa()}function notifyRequestQueueIdle(){this.issueLoadRequest$dHfa()}function doLoad(){this.state$dHfa=LOADING$static;var requestObject={url:this.getUri(),
method:"GET",success:AS3.bind(this,"onReadSuccess$dHfa"),failure:AS3.bind(this,"onReadFailure$dHfa")};com.coremedia.ui.util.RequestCounter.openRequest();try{com.coremedia.ui.data.impl.RemoteService.getConnection().request(requestObject)}catch(e){com.coremedia.ui.util.RequestCounter.closeRequest();throw new AS3.Error("Unable to send Bean "+requestObject.method+" request: "+e);}}function inject(newValues){this.state$dHfa=VALID$static;var oldLoaded=this.loaded$dHfa;this.loaded$dHfa=true;this.setInternalProperties(newValues);
this.fireLoaded(oldLoaded)}function fireLoaded(oldLoaded){this.fireEvent(REMOTE_BEAN_LOADED_EVENT_NAME$static,this);if(!oldLoaded)this.fireEvent(LOADED_CHANGED_EVENT_NAME$static,this)}function doWriteChanges(changedProperties){var requestObject={url:this.getUri(),method:"PUT",success:AS3.bind(this,"onWriteSuccessInternal$dHfa"),failure:AS3.bind(this,"onWriteFailureInternal$dHfa")};var etag=this.rq$dHfa.getETag();if(etag)requestObject.headers={"Etag":'"'+com.coremedia.ui.data.impl.RemoteService.formatEtag(etag)};
this.marshalChangedProperties(requestObject,changedProperties);com.coremedia.ui.util.RequestCounter.openRequest();try{com.coremedia.ui.data.impl.RemoteService.getConnection().request(requestObject)}catch(e){com.coremedia.ui.util.RequestCounter.closeRequest();throw new AS3.Error("Unable to send Bean "+requestObject.method+" request: "+e);}}function marshalChangedProperties(requestObject,changedProperties){var jsonData={};for(var propertyPath in changedProperties){var value=changedProperties[propertyPath];
if(value!==undefined){var propertyPathArcs=com.coremedia.ui.data.impl.PropertyPathUtil.deserialize(propertyPath);AS3.assert(propertyPathArcs.length>=1,"RemoteBeanImpl.as",436,9);var current=jsonData;var propertyPathPrefix;for(var i=0;i<propertyPathArcs.length-1;i++){var property=propertyPathArcs[i];propertyPathPrefix=com.coremedia.ui.data.impl.PropertyPathUtil.append(propertyPathPrefix,property);var next=current[property];if(!next){next=changedProperties[propertyPathPrefix]||{};current[property]=
next}current=next}var lastProperty=propertyPathArcs[propertyPathArcs.length-1];if(current[lastProperty]===undefined)current[lastProperty]=com.coremedia.ui.data.impl.RemoteService.marshalValue(value)}}requestObject.jsonData=jsonData}function onWriteComplete(error){this.rq$dHfa.onWriteComplete(error)}function onWriteSuccessInternal(response,options){com.coremedia.ui.util.RequestCounter.closeRequest();var oldETag=this.eTag$dHfa;var newETag=com.coremedia.ui.data.impl.RemoteService.getEtag(response);this.updateETag$dHfa(newETag);
var isJsonResponse="application/json"===response.getResponseHeader("Content-Type")&&response.responseText.substr(0,1)==="{";var writeResult=isJsonResponse?AS3.as(com.coremedia.ui.data.impl.RemoteService.resolveResponse(response.responseText,this.path$dHfa),com.coremedia.ui.data.impl.WriteResult):null;if(writeResult&&writeResult.timestamps)com.coremedia.ui.data.impl.TimeTracker.advanceTimestamps(writeResult.timestamps);this.onWriteComplete$dHfa(null);if(writeResult)for(var updatedPath in writeResult.updates){var properties=
writeResult.updates[updatedPath];var updatedBean=AS3.cast(RemoteBeanImpl,com.coremedia.ui.data.impl.RemoteBeanCache.peek(updatedPath));if(updatedBean&&updatedBean.isLoaded())updatedBean.writeResultReceived$dHfa(properties)}this.rq$dHfa.onWriteSuccess(this);this.onWriteSuccess(response,options);if(oldETag!==newETag)this.fireETag()}function writeResultReceived(properties){var newValues=this.processWriteResult(properties);var pendingWriteProperties=this.rq$dHfa.getPendingWriteProperties(this);for(var i=
0;i<pendingWriteProperties.length;i++)delete newValues[pendingWriteProperties[i]];this.setInternalProperties(newValues)}function onWriteFailureInternal(response,options){var this$=this;com.coremedia.ui.util.RequestCounter.closeRequest();this.writesAllowed$dHfa=false;this.rq$dHfa.onWriteFailureInternal();var willHandleStrategy=new com.coremedia.ui.util.ExecuteEventually(function(){if(!error.isHandled())com.coremedia.ui.logging.Logger.error(RemoteBeanImpl+" "+this$.getUriPath()+": Communication error: "+
response.status+" "+response.responseText+" "+error);this$.invalidate(AS3.bind(this$,"allowWrites$dHfa"))});var error=com.coremedia.ui.data.impl.RemoteService.createRemoteError(response,willHandleStrategy);this.onWriteComplete$dHfa(error);AS3.as(com.coremedia.ui.data.error.remoteErrorHandlerRegistry,com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl).handleError(error,this);willHandleStrategy.proceed()}function allowWrites(){this.writesAllowed$dHfa=true}function onWriteSuccess(response,options){com.coremedia.ui.logging.Logger.debug(RemoteBeanImpl+
" "+this.getUriPath()+": POST successful")}function onReadSuccess(result){com.coremedia.ui.util.RequestCounter.closeRequest();if(this.rq$dHfa.writePending()){this.state$dHfa=WAITING$static;this.rq$dHfa.notifyWhenIdle(this)}else if(this.state$dHfa===OVERTAKEN$static)this.issueLoadRequest$dHfa();else{var newValues=com.coremedia.ui.data.impl.RemoteService.resolveResponse(result.responseText,this.path$dHfa);AS3.assert(!(com.coremedia.ui.data.BeanState.PROPERTY_NAME in newValues),"RemoteBeanImpl.as",579,
7);var oldState=this.beanState$dHfa;this.beanState$dHfa=com.coremedia.ui.data.BeanState.READABLE;var oldETag=this.eTag$dHfa;var newETag=com.coremedia.ui.data.impl.RemoteService.getEtag(result);this.updateETag$dHfa(newETag);this.state$dHfa=VALID$static;var oldLoaded=this.loaded$dHfa;this.loaded$dHfa=true;var oldValues=this.doUpdateProperties(this.processReadResult(newValues),true,oldState,this.beanState$dHfa);this.fireLoaded(oldLoaded);this.broadcastStateChange$dHfa(oldState,oldValues);if(oldETag!==
newETag)this.fireETag()}}function updateETag(newETag){this.eTag$dHfa=newETag;this.rq$dHfa.setETag(this.eTag$dHfa)}function requestQueueETagUpdated(){if(this.eTag$dHfa&&this.rq$dHfa.getETag()!==this.eTag$dHfa)this.invalidate()}function fireETag(){this.fireEvent(ETAG_EVENT_NAME$static,this)}function dependOnEtag(){com.coremedia.ui.data.dependencies.DependencyTracker.dependOnObservable(this,ETAG_EVENT_NAME$static)}function processReadResult(newValues){return newValues}function processWriteResult(properties){var flattened=
{};this.processWriteResultRecursively$dHfa(properties,this.getValueObject(),null,flattened);return flattened}function processWriteResultRecursively(newValue,oldValue,prefix,flattened){if(this.isSubObjectInternal(newValue,prefix))for(var propertyName in newValue){var propertyPath=com.coremedia.ui.data.impl.PropertyPathUtil.append(prefix,propertyName);this.processWriteResultRecursively$dHfa(newValue[propertyName],oldValue[propertyName],propertyPath,flattened)}else{if(newValue instanceof com.coremedia.ui.data.impl.BlobHash){var oldBlob=
AS3.as(oldValue,com.coremedia.ui.data.impl.BlobImpl);if(oldBlob)oldBlob.setHash(AS3.cast(com.coremedia.ui.data.impl.BlobHash,newValue).getHash());return}flattened[prefix]=newValue}}function isTemporaryError$static(response){return response.status<=0||response.status===408||response.status===429||response.status===502||response.status===503||response.status===504||response.status===509}function onReadFailure(response){com.coremedia.ui.util.RequestCounter.closeRequest();if(RemoteBeanImpl.isTemporaryError(response)){window.setTimeout(AS3.bind(this,
"issueLoadRequest$dHfa"),1E4);return}var error=com.coremedia.ui.data.impl.RemoteService.createRemoteError(response);AS3.as(com.coremedia.ui.data.error.remoteErrorHandlerRegistry,com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl).handleError(error,this);if(!error.isHandled())com.coremedia.ui.logging.Logger.error(RemoteBeanImpl+" "+this.getUriPath()+": Communication error: "+response.status+" "+response.responseText+" "+error)}function broadcastStateChange(oldState,oldValues){if(oldState!=this.beanState$dHfa)for(var listenerProperty in this.propertiesWithListeners)if(!oldValues||
!oldValues.hasOwnProperty(listenerProperty)){var propertyPath=com.coremedia.ui.data.impl.PropertyPathUtil.deserialize(listenerProperty);var source;AS3.assert(propertyPath.length>0,"RemoteBeanImpl.as",714,11);var eventProperty=propertyPath.pop();if(propertyPath.length===0)source=this;else source=this.createSubBean(com.coremedia.ui.data.impl.PropertyPathUtil.serialize(propertyPath));if(eventProperty===com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME)eventProperty=com.coremedia.ui.data.BeanState.PROPERTY_NAME;
var oldValue;var newValue;if(eventProperty===com.coremedia.ui.data.BeanState.PROPERTY_NAME){oldValue=oldState;newValue=this.beanState$dHfa}else oldValue=newValue=this.beanState$dHfa.readable===true?this.get(listenerProperty):undefined;this.fireEvent(listenerProperty,com.coremedia.ui.data.util.PropertyChangeEventUtil.createEvent(source,eventProperty,oldValue,newValue,oldState,this.beanState$dHfa))}}function injectBeanState(newState){var oldState=this.beanState$dHfa;this.beanState$dHfa=newState;this.broadcastStateChange$dHfa(oldState,
null)}function getState(){com.coremedia.ui.data.dependencies.DependencyTracker.dependOn(new com.coremedia.ui.data.impl.BeanPropertyDependency(this,com.coremedia.ui.data.BeanState.PROPERTY_NAME));return this.beanState$dHfa}function toJson(){return'{"'+RemoteBeanImpl.REF_PROPERTY+'":"'+this.getUriPath()+'"}'}function marshal$static(self){var result={};result[RemoteBeanImpl.REF_PROPERTY]=self.getUriPath();return result}function remoteErrorHandler$static(error,source){var remoteBeanImpl=AS3.as(source,
RemoteBeanImpl);if(remoteBeanImpl)remoteBeanImpl.handleRemoteError$dHfa(error)}function handleRemoteError(error){var status=error.status;if(status===401||status===403||status===404||status===410){var oldState=this.beanState$dHfa;if(status<404)this.beanState$dHfa=com.coremedia.ui.data.BeanState.UNREADABLE;else this.beanState$dHfa=com.coremedia.ui.data.BeanState.NON_EXISTENT;var isExpectedError=com.coremedia.ui.data.impl.RemoteService.HTTP_ERROR!=error.errorName;error.setHandled(isExpectedError);com.coremedia.ui.logging.Logger.debug("handled remote error "+
error+" raised by bean "+this.getUriPath());this.state$dHfa=VALID$static;var oldLoaded=this.loaded$dHfa;this.loaded$dHfa=true;var newValues=this.buildUnreadableProperties();var oldValues=this.doUpdateProperties(newValues,true,oldState,this.beanState$dHfa);this.fireLoaded(oldLoaded);this.broadcastStateChange$dHfa(oldState,oldValues)}}function buildUnreadableProperties(){var newValues={};var valueObject=this.getValueObject();for(var property in valueObject)if(valueObject.hasOwnProperty(property))newValues[property]=
undefined;return newValues}function addBeforeFlushListener(onChange){this.addListener(BEFORE_FLUSH_EVENT_NAME$static,onChange)}function removeBeforeFlushListener(onChange){this.removeListener(BEFORE_FLUSH_EVENT_NAME$static,onChange)}function getDependencyId(){return this.getUriPath()}return{extend:"com.coremedia.ui.data.impl.BeanImpl",mixins:["com.coremedia.ui.data.impl.QueuedRemoteBean"],path$dHfa:null,loaded$dHfa:false,writesAllowed$dHfa:true,immediateProperties$dHfa:null,eTag$dHfa:null,rq$dHfa:null,
constructor:RemoteBeanImpl$,super$dHfa:function(){com.coremedia.ui.data.impl.BeanImpl.prototype.constructor.apply(this,arguments)},createRequestQueue:createRequestQueue,getUriPath:getUriPath,getUri:getUri,getAbsoluteUri:getAbsoluteUri,get:get,getOrCreate:getOrCreate,load:load,flush:flush,isLoaded:isLoaded,setImmediateProperty:setImmediateProperty,setInternal:setInternal,setInternalProperties:setInternalProperties,propertiesUpdated:propertiesUpdated,invalidate:invalidate,checkOutdated:checkOutdated,
hasAnyListener:hasAnyListener,queried$dHfa:queried,issueLoadRequest$dHfa:issueLoadRequest,notifyRequestQueueIdle:notifyRequestQueueIdle,doLoad$dHfa:doLoad,inject:inject,fireLoaded:fireLoaded,doWriteChanges:doWriteChanges,marshalChangedProperties:marshalChangedProperties,onWriteComplete$dHfa:onWriteComplete,onWriteSuccessInternal$dHfa:onWriteSuccessInternal,writeResultReceived$dHfa:writeResultReceived,onWriteFailureInternal$dHfa:onWriteFailureInternal,allowWrites$dHfa:allowWrites,onWriteSuccess:onWriteSuccess,
onReadSuccess$dHfa:onReadSuccess,updateETag$dHfa:updateETag,requestQueueETagUpdated:requestQueueETagUpdated,fireETag:fireETag,dependOnEtag:dependOnEtag,processReadResult:processReadResult,processWriteResult:processWriteResult,processWriteResultRecursively$dHfa:processWriteResultRecursively,onReadFailure$dHfa:onReadFailure,broadcastStateChange$dHfa:broadcastStateChange,injectBeanState:injectBeanState,getState:getState,toJson:toJson,handleRemoteError$dHfa:handleRemoteError,buildUnreadableProperties:buildUnreadableProperties,
addBeforeFlushListener:addBeforeFlushListener,removeBeforeFlushListener:removeBeforeFlushListener,getDependencyId:getDependencyId,statics:{REF_PROPERTY:"$Ref",isTemporaryError:isTemporaryError$static,marshal:marshal$static,__initStatics__:function(){static$0()}},requires:["AS3.Error","com.coremedia.ui.data.BeanState","com.coremedia.ui.data.dependencies.DependencyTracker","com.coremedia.ui.data.error.NotExistsError","com.coremedia.ui.data.error.NotReadableError","com.coremedia.ui.data.error.remoteErrorHandlerRegistry",
"com.coremedia.ui.data.impl.BeanImpl","com.coremedia.ui.data.impl.QueuedRemoteBean","com.coremedia.ui.util.ExecuteEventually","com.coremedia.ui.util.RequestCounter"],uses:["com.coremedia.ui.data.impl.BeanConstants","com.coremedia.ui.data.impl.BeanPropertyDependency","com.coremedia.ui.data.impl.BeforeFlushEventImpl","com.coremedia.ui.data.impl.BlobHash","com.coremedia.ui.data.impl.BlobImpl","com.coremedia.ui.data.impl.PropertyPathUtil","com.coremedia.ui.data.impl.RemoteBeanCache","com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl",
"com.coremedia.ui.data.impl.RemoteService","com.coremedia.ui.data.impl.RequestQueue","com.coremedia.ui.data.impl.TimeTracker","com.coremedia.ui.data.impl.WriteResult","com.coremedia.ui.data.util.PropertyChangeEventUtil","com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.ui.data.impl.BlobImpl",function(BlobImpl){var NOT_LOADED$static=-2;var LOADING$static=-1;var LOADED$static=0;var browserHasNameSpaceSupport$static=false;function static$0(){try{browserHasNameSpaceSupport$static=window.document.documentElement["getAttributeNS"]}catch(e){browserHasNameSpaceSupport$static=false}com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl.initRemoteErrorHandlerRegistry().registerErrorHandler(remoteErrorHandler$static)}function BlobImpl$(path,contentType,
size,data,hash,metadata){this.super$qUFh();switch(Math.max(arguments.length,4)){case 4:hash=null;case 5:metadata=null}this.path$qUFh=path;this.contentType$qUFh=contentType;this.size$qUFh=size;this.data$qUFh=data;this.hash$qUFh=hash;this.metadata$qUFh=metadata;this.state$qUFh=data===undefined?NOT_LOADED$static:LOADED$static}function isImmutable(){return this.size$qUFh!==undefined}function getUri(){return com.coremedia.ui.data.impl.RemoteService.calculateRequestURI(this.path$qUFh)}function getPath(){return this.path$qUFh}
function isLoaded(){return this.state$qUFh===LOADED$static}function getSize(){return this.size$qUFh}function getData(){if(this.state$qUFh===NOT_LOADED$static){this.state$qUFh=LOADING$static;this.doRequest$qUFh(false)}return this.data$qUFh}function doRequest(isRetryingAfterTimeout){var this$=this;if(!com.coremedia.ui.util.RequestCounter.isRequestRecommended()){com.coremedia.ui.util.RequestCounter.whenRequestRecommended(function(){this$.doRequest$qUFh(isRetryingAfterTimeout)});return}var thys=this;
com.coremedia.ui.util.RequestCounter.openRequest();try{com.coremedia.ui.data.impl.RemoteService.getConnection().request({url:this.getUri(),method:"GET",callback:function(options,success,response){com.coremedia.ui.util.RequestCounter.closeRequest();if(success){this$.state$qUFh=LOADED$static;this$.data$qUFh=response.responseText;this$.hash$qUFh=com.coremedia.ui.data.impl.RemoteService.getEtag(response)}else if(!isRetryingAfterTimeout&&com.coremedia.ui.data.impl.RemoteBeanImpl.isTemporaryError(response)){window.setTimeout(function(){this$.doRequest$qUFh(response.status===
-1)},1E4);return}else{this$.state$qUFh=LOADED$static;var error=com.coremedia.ui.data.impl.RemoteService.createRemoteError(response);AS3.as(com.coremedia.ui.data.error.remoteErrorHandlerRegistry,com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl).handleError(error,thys);if(!error.isHandled())throw new AS3.Error("Communication error: "+this$.getUri()+", "+response.status+": "+response.statusText);}com.coremedia.ui.data.util.PropertyChangeEventUtil.fireEvent(thys,"data",undefined,this$.data$qUFh);
com.coremedia.ui.data.util.PropertyChangeEventUtil.fireEvent(thys,"size",undefined,this$.getSize())}})}catch(e){com.coremedia.ui.util.RequestCounter.closeRequest();throw new AS3.Error("Unable to send BLOB GET request: "+e);}}function getHash(){return this.hash$qUFh}function setHash(hash){this.hash$qUFh=hash}function getContentType(){return this.contentType$qUFh}function remoteErrorHandler$static(error,source){var blobImpl=AS3.as(source,BlobImpl);if(blobImpl&&error.status===404){blobImpl.data$qUFh=
null;AS3.trace("blob "+blobImpl.getUri()+" not found: "+error)}}function create$static(original,data,mimeType,calculateSize){switch(Math.max(arguments.length,2)){case 2:mimeType=null;case 3:calculateSize=false}var path="";if(original)path=AS3.as(original,BlobImpl).getPath();if(!mimeType)if(original&&original.getContentType())mimeType=original.getContentType();else mimeType="text/xml";var size=calculateSize?data.length:undefined;return new BlobImpl(path,mimeType,size,data)}function loadData(callback){if(arguments.length<=
0)callback=null;if(this.isLoaded()){if(callback)callback(this)}else{if(callback){var blob=this;this.addListener("data",function(){callback(blob)},undefined,{single:true})}this.getData()}}function static$1(){com.coremedia.ui.data.impl.RemoteService.registerMarshaller(BlobImpl,marshal$static)}function marshal$static(self){var size=self.getSize();var contentType=self.getContentType();var hash=self.getHash();if(size===Number(size)&&contentType&&hash)return{"contentType":contentType,"size":size,"hash":hash};
else return{"contentType":contentType,"data":self.getData()}}function equals(o){var that=AS3.as(o,BlobImpl);if(!that)return false;if(this.getSize()===that.getSize()&&this.getContentType()===that.getContentType())if(this.isLoaded()&&that.isLoaded())return this.getData()===that.getData();else if(!this.isLoaded()&&!that.isLoaded()||this.isImmutable()&&that.isImmutable())return this.getUri()===that.getUri();return false}function getMetadata(){return this.metadata$qUFh}return{extend:"Ext.util.Observable",
mixins:["com.coremedia.ui.data.Blob","com.coremedia.ui.util.WithEquals"],path$qUFh:null,contentType$qUFh:null,size$qUFh:0,data$qUFh:undefined,hash$qUFh:null,metadata$qUFh:null,state$qUFh:0,constructor:BlobImpl$,super$qUFh:function(){Ext.util.Observable.prototype.constructor.apply(this,arguments)},isImmutable:isImmutable,getUri:getUri,getPath:getPath,isLoaded:isLoaded,getSize:getSize,getData:getData,doRequest$qUFh:doRequest,getHash:getHash,setHash:setHash,getContentType:getContentType,loadData:loadData,
equals:equals,getMetadata:getMetadata,statics:{create:create$static,__initStatics__:function(){static$0();static$1()}},requires:["AS3.Error","AS3.trace","Ext.util.Observable","com.coremedia.ui.data.Blob","com.coremedia.ui.data.error.remoteErrorHandlerRegistry","com.coremedia.ui.util.RequestCounter","com.coremedia.ui.util.WithEquals"],uses:["com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl","com.coremedia.ui.data.impl.RemoteService","com.coremedia.ui.data.util.PropertyChangeEventUtil"]}});Ext.define("com.coremedia.ui.data.impl.TimeTracker",function(TimeTracker){var timestamps$static;function timestamps$static_(){timestamps$static={}}function advanceTimestamps$static(newTimestamps){for(var key in newTimestamps){var newTimestamp=newTimestamps[key];if(AS3.is(newTimestamp,Number)){var oldTimestamp=timestamps$static[key];if(!oldTimestamp||newTimestamp>oldTimestamp)timestamps$static[key]=newTimestamp}}}function getTimestamp$static(key){return timestamps$static[key]}function TimeTracker$(){}
return{constructor:TimeTracker$,statics:{timestamps:undefined,advanceTimestamps:advanceTimestamps$static,getTimestamp:getTimestamp$static,__initStatics__:function(){timestamps$static_()}}}});Ext.define("com.coremedia.ui.data.impl.BeanClassRegistry",function(BeanClassRegistry){var RESOURCE_MANAGER$static;function RESOURCE_MANAGER$static_(){RESOURCE_MANAGER$static=mx.resources.ResourceManager.getInstance()}var PROPERTY_NAME_AND_FACTORY_FUNCTION$static;function PROPERTY_NAME_AND_FACTORY_FUNCTION$static_(){PROPERTY_NAME_AND_FACTORY_FUNCTION$static=["$Date",function(type,json){return Ext.Date.parse(json[type],"c")},"$Calendar",function(type,json){var date=Ext.Date.parse(json[type],"c");return new com.coremedia.ui.data.Calendar({year:date.getFullYear(),
month:date.getMonth(),day:date.getDate(),hour:date.getHours(),minute:date.getMinutes(),second:date.getSeconds(),timeZone:json["timeZone"],offset:json["offset"],normalized:true})},"$Localized",function(type,json){var key=json[type];var bundle=json.bundle;var default_=json["default"]||key;return RESOURCE_MANAGER$static.getString(bundle,key)||default_},"$Type",function(type,json){var typeName=json[type];var clazz=typeToClass$static[typeName];if(!clazz){clazz=AS3.cast(Class,Ext.ClassManager.get(typeName));
if(!clazz)throw new AS3.Error("cannot convert JSON data with $Type\x3d'"+typeName+"', because the class is unknown");}if(json.name&&com.coremedia.ui.util.Enum.isEnumType(clazz))return com.coremedia.ui.util.Enum.namedIn(json.name,clazz);else{var resolveJson={};for(var propertyName in json)resolveJson[propertyName]=BeanClassRegistry.resolveBeans(json[propertyName]);return new clazz(resolveJson)}}]}var typeToClass$static;function typeToClass$static_(){typeToClass$static={}}function registerRemoteObjectResolver$static(property,
resolver){PROPERTY_NAME_AND_FACTORY_FUNCTION$static.push(property,resolver)}function registerTypeImplementation$static(type,clazz){typeToClass$static[type]=clazz}function resolveBeans$static(object){if(Ext.isArray(object))for(var i=0;i<object.length;++i)object[i]=BeanClassRegistry.resolveBeans(object[i]);else if(Ext.isObject(object)){for(var t=0;t<PROPERTY_NAME_AND_FACTORY_FUNCTION$static.length;t+=2){var propertyName=PROPERTY_NAME_AND_FACTORY_FUNCTION$static[t];if(propertyName in object)return PROPERTY_NAME_AND_FACTORY_FUNCTION$static[t+
1](propertyName,object)}for(var m in object)object[m]=BeanClassRegistry.resolveBeans(object[m])}return object}function BeanClassRegistry$(){}return{constructor:BeanClassRegistry$,statics:{RESOURCE_MANAGER:undefined,PROPERTY_NAME_AND_FACTORY_FUNCTION:undefined,typeToClass:undefined,registerRemoteObjectResolver:registerRemoteObjectResolver$static,registerTypeImplementation:registerTypeImplementation$static,resolveBeans:resolveBeans$static,__initStatics__:function(){RESOURCE_MANAGER$static_();PROPERTY_NAME_AND_FACTORY_FUNCTION$static_();
typeToClass$static_()}},requires:["AS3.Error","Ext","Ext.ClassManager","Ext.Date","com.coremedia.ui.data.Calendar","com.coremedia.ui.util.Enum","mx.resources.ResourceManager"]}});Ext.define("com.coremedia.ui.data.impl.SubBean",function(SubBean){function SubBean$(parent,propertyPrefix){this.parent$b6V2=parent;this.propertyPrefix$b6V2=propertyPrefix}function getParentBean(){return this.parent$b6V2}function addPropertyChangeListener(property,onChange){this.parent$b6V2.addPropertyChangeListener(this.prefixWithSeparator$b6V2(property),onChange)}function removePropertyChangeListener(property,onChange){this.parent$b6V2.removePropertyChangeListener(this.prefixWithSeparator$b6V2(property),
onChange)}function hasPropertyChangeListener(property){return this.parent$b6V2.hasPropertyChangeListener(this.prefixWithSeparator$b6V2(property))}function addValueChangeListener(onChange){this.parent$b6V2.addPropertyChangeListener(this.prefixWithSeparator$b6V2(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME),onChange)}function removeValueChangeListener(onChange){this.parent$b6V2.removePropertyChangeListener(this.prefixWithSeparator$b6V2(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME),
onChange)}function hasValueChangeListener(){return this.parent$b6V2.hasPropertyChangeListener(this.prefixWithSeparator$b6V2(com.coremedia.ui.data.impl.BeanConstants.VALUE_CHANGED_EVENT_NAME))}function get(property){return this.parent$b6V2.get(this.prefix$b6V2(property))}function instantiate(property){return this.parent$b6V2.instantiate(this.prefix$b6V2(property))}function set(property,value){var newValue={};newValue[property]=value;return this.updateProperties(newValue)}function addAt(property,position,
value){switch(Math.max(arguments.length,1)){case 1:position=-1;case 2:value=null}this.getParentBean().addAt(this.prefix$b6V2(property),position,value)}function removeAt(property,position){if(arguments.length<=1)position=-1;return this.getParentBean().removeAt(this.prefix$b6V2(property),position)}function toObject(){this.parent$b6V2.dependencyOnValue();return deepCopy$static(this.parent$b6V2.getUnwrapped(this.propertyPrefix$b6V2,false))}function deepCopy$static(object){if(!object||typeof object!==
"object"||object.constructor!==Object)return object;var copy={};for(var property in object){var value=object[property];var copiedValue=value;if(value&&typeof value==="object")switch(value.constructor){case Object:copiedValue=deepCopy$static(value);break;case Array:copiedValue=value.map(deepCopy$static)}copy[property]=copiedValue}return copy}function updateProperties(newValue){var prefixedNewValue={};for(var prop in newValue){var propertyPath=this.prefix$b6V2(prop);prefixedNewValue[propertyPath]=newValue[prop]}return this.parent$b6V2.updateProperties(prefixedNewValue)}
function toJson(){return com.coremedia.ui.util.ObjectUtils.toJson(this.toObject())}function getState(){return this.parent$b6V2.getState()}function equals(o){var that=AS3.as(o,SubBean);return that&&this.parent$b6V2===that.parent$b6V2&&this.propertyPrefix$b6V2===that.propertyPrefix$b6V2}function prefix(property){return com.coremedia.ui.data.impl.PropertyPathUtil.append(this.propertyPrefix$b6V2,property)}function prefixWithSeparator(property){return com.coremedia.ui.data.impl.PropertyPathUtil.appendWithSeparator(this.propertyPrefix$b6V2,
property)}return{mixins:["com.coremedia.ui.data.Bean","com.coremedia.ui.util.WithEquals"],parent$b6V2:null,propertyPrefix$b6V2:null,constructor:SubBean$,getParentBean:getParentBean,addPropertyChangeListener:addPropertyChangeListener,removePropertyChangeListener:removePropertyChangeListener,hasPropertyChangeListener:hasPropertyChangeListener,addValueChangeListener:addValueChangeListener,removeValueChangeListener:removeValueChangeListener,hasValueChangeListener:hasValueChangeListener,get:get,instantiate:instantiate,
set:set,addAt:addAt,removeAt:removeAt,toObject:toObject,updateProperties:updateProperties,toJson:toJson,getState:getState,equals:equals,prefix$b6V2:prefix,prefixWithSeparator$b6V2:prefixWithSeparator,requires:["com.coremedia.ui.data.Bean","com.coremedia.ui.util.ObjectUtils","com.coremedia.ui.util.WithEquals"],uses:["com.coremedia.ui.data.impl.BeanConstants","com.coremedia.ui.data.impl.PropertyPathUtil"]}});Ext.define("com.coremedia.ui.data.impl.QueuedRemoteBean",function(QueuedRemoteBean){return{mixins:["com.coremedia.ui.data.RemoteBean"],requires:["com.coremedia.ui.data.RemoteBean"]}});Ext.define("com.coremedia.ui.data.impl.BeanPropertyDependency",function(BeanPropertyDependency){function BeanPropertyDependency$(bean,property){this.bean$WoxU=bean;this.property$WoxU=property}function getId(){return this.bean$WoxU.getDependencyId()+"#"+this.property$WoxU}function addListener(listener){this.bean$WoxU.addPropertyChangeListener(this.property$WoxU,listener)}function removeListener(listener){this.bean$WoxU.removePropertyChangeListener(this.property$WoxU,listener)}return{mixins:["com.coremedia.ui.data.dependencies.Dependency"],
bean$WoxU:null,property$WoxU:null,constructor:BeanPropertyDependency$,getId:getId,addListener:addListener,removeListener:removeListener,requires:["com.coremedia.ui.data.dependencies.Dependency"]}});Ext.define("com.coremedia.ui.data.impl.WriteResult",function(WriteResult){function WriteResult$(json){this["updates"]=json["updates"];var issuesJson=json["issues"];this["issues"]=com.coremedia.ui.data.impl.IssuesUtil.getAllIssues(issuesJson);this["timestamps"]=json["timestamps"]}return{constructor:WriteResult$,uses:["com.coremedia.ui.data.impl.IssuesUtil"]}});Ext.define("com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl",function(RemoteErrorHandlerRegistryImpl){function READ_ERROR_HANDLERS_(){this.READ_ERROR_HANDLERS$ZJMp=[]}function WRITE_ERROR_HANDLERS_(){this.WRITE_ERROR_HANDLERS$ZJMp=[]}function initRemoteErrorHandlerRegistry$static(){if(!com.coremedia.ui.data.error.remoteErrorHandlerRegistry){com.coremedia.ui.logging.Logger.info(RemoteErrorHandlerRegistryImpl+": initializing singleton");com.coremedia.ui.data.error.remoteErrorHandlerRegistry=
new RemoteErrorHandlerRegistryImpl}return com.coremedia.ui.data.error.remoteErrorHandlerRegistry}function handleError(error,source){if(error.method==="PUT"||error.method==="POST")handle$static(this.WRITE_ERROR_HANDLERS$ZJMp.concat(this.READ_ERROR_HANDLERS$ZJMp),error,source);else handle$static(this.READ_ERROR_HANDLERS$ZJMp,error,source)}function handle$static(handlers,error,source){Ext.each(handlers,function(f){f(error,source);return!error.isHandled()},null)}function registerErrorHandler(errorHandler,
append){if(arguments.length<=1)append=false;appendHandler$static(this.READ_ERROR_HANDLERS$ZJMp,errorHandler,append)}function registerWriteErrorHandler(errorHandler,append){if(arguments.length<=1)append=false;appendHandler$static(this.WRITE_ERROR_HANDLERS$ZJMp,errorHandler,append)}function appendHandler$static(handlers,errorHandler,append){var index=handlers.indexOf(errorHandler);if(index<0)if(append)handlers.push(errorHandler);else handlers.unshift(errorHandler);else com.coremedia.ui.logging.Logger.info(RemoteErrorHandlerRegistryImpl+
": error handler already registered at index "+index)}function RemoteErrorHandlerRegistryImpl$(){READ_ERROR_HANDLERS_.call(this);WRITE_ERROR_HANDLERS_.call(this)}return{mixins:["com.coremedia.ui.data.error.IRemoteErrorHandlerRegistry"],handleError:handleError,registerErrorHandler:registerErrorHandler,registerWriteErrorHandler:registerWriteErrorHandler,constructor:RemoteErrorHandlerRegistryImpl$,statics:{initRemoteErrorHandlerRegistry:initRemoteErrorHandlerRegistry$static},requires:["Ext","com.coremedia.ui.data.error.IRemoteErrorHandlerRegistry",
"com.coremedia.ui.data.error.remoteErrorHandlerRegistry"],uses:["com.coremedia.ui.logging.Logger"]}});Ext.define("com.coremedia.ui.data.impl.RemoteServiceMethodResponseImpl",function(RemoteServiceMethodResponseImpl){function RemoteServiceMethodResponseImpl$(url,success,response,params){this.url$dCiZ=url;this["success"]=success;this["response"]=response;this["params"]=params;if(!success)this.error$dCiZ=com.coremedia.ui.data.impl.RemoteService.createRemoteError(response)}function getResponseJSON(){if(this.responseJSON$dCiZ===undefined)this.responseJSON$dCiZ=this.response["isAbort"]||this.response["isTimeout"]||
!/^application\/json(;|$)/.test(this.response.getResponseHeader("Content-Type"))?null:com.coremedia.ui.data.impl.RemoteService.resolveResponse(this.response.responseText,com.coremedia.ui.data.impl.RemoteService.calculateRemoteURI(this.url$dCiZ));return this.responseJSON$dCiZ}function getLocationAsRemoteBean(){return AS3.as(this.getResponseJSON(),com.coremedia.ui.data.RemoteBean)}function getError(){return this.error$dCiZ}return{mixins:["com.coremedia.ui.data.impl.RemoteServiceMethodResponse"],url$dCiZ:null,
responseJSON$dCiZ:undefined,error$dCiZ:null,constructor:RemoteServiceMethodResponseImpl$,getResponseJSON:getResponseJSON,getLocationAsRemoteBean:getLocationAsRemoteBean,getError:getError,requires:["com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.impl.RemoteServiceMethodResponse"],uses:["com.coremedia.ui.data.impl.RemoteService"]}});Ext.define("com.coremedia.ui.data.impl.BeanConstants",function(BeanConstants){function BeanConstants$(){}return{constructor:BeanConstants$,statics:{VALUE_CHANGED_EVENT_NAME:"42_beanchanged"}}});Ext.define("com.coremedia.ui.data.impl.IssuesImpl",function(IssuesImpl){function IssuesImpl$(path){this.super$RsK8(path)}function getEntity(){return this.get("entity")}function isValid(){return this.get("valid")}function getAll(){return this.get("all")}function getByProperty(){return this.get("byProperty")}function getGlobal(){return this.get("global")}function isSubObject(value,propertyPath){return propertyPath==="byProperty"}function doUpdateProperties(originalValues,ignoreUpdate,oldState,newState){var values=
Ext.apply({global:[],byProperty:{}},originalValues);var allIssues=com.coremedia.ui.data.impl.IssuesUtil.getAllIssues(values);values["all"]=allIssues;values["valid"]=allIssues.length===0;return com.coremedia.ui.data.impl.RemoteBeanImpl.prototype.doUpdateProperties.call(this,values,ignoreUpdate,oldState,newState)}return{extend:"com.coremedia.ui.data.impl.RemoteBeanImpl",mixins:["com.coremedia.ui.data.validation.Issues"],constructor:IssuesImpl$,super$RsK8:function(){com.coremedia.ui.data.impl.RemoteBeanImpl.prototype.constructor.apply(this,
arguments)},getEntity:getEntity,isValid:isValid,getAll:getAll,getByProperty:getByProperty,getGlobal:getGlobal,isSubObject:isSubObject,doUpdateProperties:doUpdateProperties,requires:["Ext","com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.validation.Issues"],uses:["com.coremedia.ui.data.impl.IssuesUtil"]}});Ext.define("com.coremedia.ui.data.impl.PropertyPathUtil",function(PropertyPathUtil){var INTERNAL_PROPERTY_PATH_SEPARATOR$static="\n";function appendWithSeparator$static(propertyPrefix,property){return propertyPrefix+INTERNAL_PROPERTY_PATH_SEPARATOR$static+property}function append$static(propertyPrefix,property){return propertyPrefix?PropertyPathUtil.appendWithSeparator(propertyPrefix,property):property}function deserialize$static(propertyPath){return String(propertyPath).split(INTERNAL_PROPERTY_PATH_SEPARATOR$static)}
function serialize$static(propertyPathArcs){return propertyPathArcs.join(INTERNAL_PROPERTY_PATH_SEPARATOR$static)}function pathSubsumesPath$static(path1,path2){return path1!==path2&&path2.indexOf(path1)===0&&path2.charAt(path1.length)===INTERNAL_PROPERTY_PATH_SEPARATOR$static}function PropertyPathUtil$(){}return{constructor:PropertyPathUtil$,statics:{appendWithSeparator:appendWithSeparator$static,append:append$static,deserialize:deserialize$static,serialize:serialize$static,pathSubsumesPath:pathSubsumesPath$static}}});Ext.define("com.coremedia.ui.data.impl.RemoteServiceMethod",function(RemoteServiceMethod){function HTTP_METHODS_(){this.HTTP_METHODS$4uW2={"GET":true,"PUT":true,"DELETE":true,"POST":true}}function RemoteServiceMethod$(path,method,writeJson,isBackground,options,isRetryable){HTTP_METHODS_.call(this);switch(Math.max(arguments.length,2)){case 2:writeJson=false;case 3:isBackground=false;case 4:options=null}this.path$4uW2=path;this.method$4uW2=method;this.writeJson$4uW2=writeJson;this.isBackground$4uW2=
isBackground;this.options$4uW2=options;this.isRetryable$4uW2=isRetryable===undefined?method==="GET":isRetryable}function request(params,success,failure){switch(arguments.length){case 0:params=null;case 1:success=null;case 2:failure=null}this.doRequest$4uW2(params,success,failure,false)}function doRequest(params,success,failure,isRetryingAfterTimeout){var this$=this;if(!this.isBackground$4uW2&&!com.coremedia.ui.util.RequestCounter.isRequestRecommended()){com.coremedia.ui.util.RequestCounter.whenRequestRecommended(function(){this$.doRequest$4uW2(params,
success,failure,isRetryingAfterTimeout)});return}var requestParams=undefined;var jsonData=undefined;if(this.writeJson$4uW2)jsonData=com.coremedia.ui.data.impl.RemoteService.marshalValue(params);else requestParams=this.convertParams$4uW2(params);com.coremedia.ui.util.RequestCounter.openRequest(this.isBackground$4uW2);try{var httpMethod;var headers;if(!this.HTTP_METHODS$4uW2[this.method$4uW2]){httpMethod="POST";headers={};headers["X-HTTP-Method-Override"]=this.method$4uW2}else{httpMethod=this.method$4uW2;
headers=undefined}var url=com.coremedia.ui.data.impl.RemoteService.calculateRequestURI(this.path$4uW2);var requestOptions={method:httpMethod,url:url,params:requestParams,jsonData:jsonData,headers:headers,success:function(response){com.coremedia.ui.util.RequestCounter.closeRequest(this$.isBackground$4uW2);success&&success(new com.coremedia.ui.data.impl.RemoteServiceMethodResponseImpl(url,true,response,params))},failure:function(response){com.coremedia.ui.util.RequestCounter.closeRequest(this$.isBackground$4uW2);
if(this$.isRetryable$4uW2&&!isRetryingAfterTimeout&&com.coremedia.ui.data.impl.RemoteBeanImpl.isTemporaryError(response))window.setTimeout(function(){this$.doRequest$4uW2(params,success,failure,response.status===-1)},1E4);else{var methodResponse=new com.coremedia.ui.data.impl.RemoteServiceMethodResponseImpl(url,false,response,params);if(failure||success)(failure||success)(methodResponse);if(!methodResponse.getError().isHandled())AS3.as(com.coremedia.ui.data.error.remoteErrorHandlerRegistry,com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl).handleError(methodResponse.getError(),
AS3.cast(RemoteServiceMethod,this))}},scope:this};if(this.options$4uW2)Ext.apply(requestOptions,this.options$4uW2);com.coremedia.ui.data.impl.RemoteService.getConnection().request(requestOptions)}catch(e){if(!this.isBackground$4uW2)com.coremedia.ui.util.RequestCounter.closeRequest();throw new AS3.Error("Unable to send Service "+this.method$4uW2+" request: "+e);}}function convertParams(params){var requestParams={};if(params)for(var paramName in params){var paramValue=params[paramName];if(paramValue!==
undefined){var remoteBean=AS3.as(paramValue,com.coremedia.ui.data.RemoteBean);requestParams[paramName]=remoteBean?remoteBean.getUriPath():paramValue}}return requestParams}return{path$4uW2:null,method$4uW2:null,writeJson$4uW2:false,isBackground$4uW2:false,options$4uW2:null,isRetryable$4uW2:false,constructor:RemoteServiceMethod$,request:request,doRequest$4uW2:doRequest,convertParams$4uW2:convertParams,requires:["AS3.Error","Ext","com.coremedia.ui.data.RemoteBean","com.coremedia.ui.data.error.remoteErrorHandlerRegistry",
"com.coremedia.ui.util.RequestCounter"],uses:["com.coremedia.ui.data.impl.RemoteBeanImpl","com.coremedia.ui.data.impl.RemoteErrorHandlerRegistryImpl","com.coremedia.ui.data.impl.RemoteService","com.coremedia.ui.data.impl.RemoteServiceMethodResponseImpl"]}});Ext.define("com.coremedia.ui.data.impl.BeforeFlushEventImpl",function(BeforeFlushEventImpl){function BeforeFlushEventImpl$(bean){this["bean"]=bean}return{mixins:["com.coremedia.ui.data.BeforeFlushEvent"],constructor:BeforeFlushEventImpl$,requires:["com.coremedia.ui.data.BeforeFlushEvent"]}});Ext.define("com.coremedia.ui.logging.Logger",function(Logger){var LEVELS$static;function LEVELS$static_(){LEVELS$static=["debug","info","warn","error"]}var debugLogger$static=null;var infoLogger$static=null;var warnLogger$static=null;var errorLogger$static=null;function static$0(){com.coremedia.ui.util.WindowUtil.addHashChangeListener(initLogger$static);initLogger$static()}function initLogger$static(){var logLevel=com.coremedia.ui.util.UrlUtil.getHashParam("loglevel");if(!logLevel)logLevel="error";
var index=LEVELS$static.indexOf(logLevel);Logger.DISABLED_LEVELS=-1<index?LEVELS$static.slice(0,index):LEVELS$static;debugLogger$static=getLogger$static("debug","[LOG]");infoLogger$static=getLogger$static("info","[INFO]");warnLogger$static=getLogger$static("warn","[WARN]");errorLogger$static=getLogger$static("error","[ERROR]")}function getLogger$static(level,fallback){if(Logger.DISABLED_LEVELS.indexOf(level)<0){if(window.console&&window.console[level])return function(msg){window.console[level](msg)};
return function(msg){AS3.trace(fallback,msg)}}return null}function debug$static(msg){debugLogger$static&&debugLogger$static(msg)}function info$static(msg){infoLogger$static&&infoLogger$static(msg)}function warn$static(msg){warnLogger$static&&warnLogger$static(msg)}function error$static(msg){errorLogger$static&&errorLogger$static(msg)}function isDebugEnabled$static(){return null!==debugLogger$static}function isInfoEnabled$static(){return null!==infoLogger$static}function isWarnEnabled$static(){return null!==
warnLogger$static}function isErrorEnabled$static(){return null!==errorLogger$static}function Logger$(){}return{constructor:Logger$,statics:{LEVELS:undefined,DISABLED_LEVELS:null,debug:debug$static,info:info$static,warn:warn$static,error:error$static,isDebugEnabled:isDebugEnabled$static,isInfoEnabled:isInfoEnabled$static,isWarnEnabled:isWarnEnabled$static,isErrorEnabled:isErrorEnabled$static,__initStatics__:function(){LEVELS$static_();static$0()}},requires:["AS3.trace","com.coremedia.ui.util.UrlUtil",
"com.coremedia.ui.util.WindowUtil"]}});
//# sourceMappingURL=com.coremedia.ui.toolkit__client-core-impl.js.map
